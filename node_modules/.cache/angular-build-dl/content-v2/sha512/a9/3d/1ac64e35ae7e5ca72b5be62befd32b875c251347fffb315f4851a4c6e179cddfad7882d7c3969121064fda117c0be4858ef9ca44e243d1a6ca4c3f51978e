!function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{fQQq:function(i,n,a){"use strict";a.r(n),a.d(n,"DelaysModule",function(){return K});var b,r=a("tyNb"),o=a("ofXK"),l=a("3Pt+"),c=a("quSY"),s=a("fXoL"),d=a("TMEm"),p=[[["",8,"mib-action"]]],u=[".mib-action"],m=((b=function t(){e(this,t)}).\u0275fac=function(t){return new(t||b)},b.\u0275cmp=s.Eb({type:b,selectors:[["header-page"]],inputs:{title:"title",description:"description"},ngContentSelectors:u,decls:8,vars:2,consts:[[1,"header","lg"],[1,"title"],[1,"subheader"],[1,"actions"]],template:function(t,e){1&t&&(s.gc(p),s.Qb(0,"div",0),s.Qb(1,"div",1),s.Qb(2,"h2"),s.Hc(3),s.Pb(),s.Qb(4,"div",2),s.Hc(5),s.Pb(),s.Pb(),s.Qb(6,"div",3),s.fc(7),s.Pb(),s.Pb()),2&t&&(s.zb(3),s.Ic(e.title),s.zb(2),s.Ic(e.description))},encapsulation:2}),b),v=a("rEr+"),y=a("7zfz"),f=a("/RsI"),h=a("7kUa"),P=a("jIHw");function g(t,e){1&t&&(s.Qb(0,"tr"),s.Qb(1,"th"),s.Qb(2,"div",11),s.Qb(3,"div"),s.Hc(4,"\u041f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u044c"),s.Pb(),s.Pb(),s.Pb(),s.Qb(5,"th"),s.Qb(6,"div",11),s.Qb(7,"div"),s.Hc(8,"\u0414\u043e\u0433\u043e\u0432\u043e\u0440 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438"),s.Pb(),s.Pb(),s.Pb(),s.Qb(9,"th"),s.Qb(10,"div",11),s.Qb(11,"div"),s.Hc(12,"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f"),s.Pb(),s.Pb(),s.Pb(),s.Qb(13,"th"),s.Qb(14,"div",11),s.Qb(15,"div"),s.Hc(16,"\u0421\u0443\u043c\u043c\u0430 \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438"),s.Pb(),s.Pb(),s.Pb(),s.Qb(17,"th"),s.Qb(18,"div",11),s.Qb(19,"div"),s.Hc(20," \u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0441\u0440\u043e\u0447\u043a\u0438"),s.Pb(),s.Pb(),s.Pb(),s.Qb(21,"th"),s.Qb(22,"div",11),s.Qb(23,"div"),s.Hc(24,"\u0414\u0430\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439"),s.Pb(),s.Pb(),s.Pb(),s.Qb(25,"th"),s.Qb(26,"div",11),s.Qb(27,"div"),s.Hc(28,"\u0414\u0430\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),s.Pb(),s.Pb(),s.Pb(),s.Qb(29,"th"),s.Qb(30,"div",11),s.Qb(31,"div"),s.Hc(32," \u0414\u0430\u0442\u0430 \u0434\u043e\u043f"),s.Pb(),s.Pb(),s.Pb(),s.Pb())}function Q(t,e){if(1&t&&(s.Qb(0,"tr"),s.Qb(1,"td"),s.Qb(2,"div",12),s.Qb(3,"div"),s.Hc(4),s.Pb(),s.Pb(),s.Pb(),s.Qb(5,"td"),s.Qb(6,"div",12),s.Qb(7,"div"),s.Hc(8),s.Pb(),s.Pb(),s.Pb(),s.Qb(9,"td"),s.Qb(10,"div",12),s.Qb(11,"div"),s.Hc(12),s.Pb(),s.Pb(),s.Pb(),s.Qb(13,"td"),s.Qb(14,"div",13),s.Qb(15,"div"),s.Hc(16),s.bc(17,"currency"),s.Pb(),s.Pb(),s.Pb(),s.Qb(18,"td"),s.Qb(19,"div",13),s.Qb(20,"div"),s.Hc(21),s.bc(22,"currency"),s.Pb(),s.Pb(),s.Pb(),s.Qb(23,"td"),s.Qb(24,"div",12),s.Qb(25,"div"),s.Hc(26),s.bc(27,"date"),s.Pb(),s.Pb(),s.Pb(),s.Qb(28,"td"),s.Qb(29,"div",14),s.Qb(30,"div"),s.Hc(31),s.bc(32,"date"),s.Pb(),s.Pb(),s.Pb(),s.Qb(33,"td"),s.Qb(34,"div",15),s.Qb(35,"div"),s.Hc(36),s.bc(37,"date"),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&t){var i=e.$implicit,n=s.ac();s.zb(4),s.Jc(" ",i.DebtorTitle," "),s.zb(4),s.Jc("",i.ContractDeliveryNumber," "),s.zb(4),s.Jc(" ",i.ShipmentFullTitle,""),s.zb(4),s.Ic(s.ec(17,9,i.ShipmentSumm,"RUB","symbol-narrow")),s.zb(5),s.Ic(s.ec(22,13,i.DutyDebtor,"RUB","symbol-narrow")),s.zb(5),s.Ic(s.dc(27,17,i.DateShipment,"dd.MM.yyyy")),s.zb(5),s.Jc(" ",s.dc(32,20,i.DatePayment,"dd.MM.yyyy"),""),s.zb(3),s.hc("ngClass",n.checkDateAddon(i.DateAddon)?"red":""),s.zb(2),s.Ic(s.dc(37,23,i.DateAddon,"dd.MM.yyyy"))}}function D(t,e){1&t&&(s.Qb(0,"tr"),s.Qb(1,"td",16),s.Hc(2,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445."),s.Pb(),s.Pb())}function w(t,e){if(1&t){var i=s.Rb();s.Qb(0,"form",17),s.Xb("ngSubmit",function(){return s.yc(i),s.ac().updateDelays()}),s.Qb(1,"div",18),s.Qb(2,"label",19),s.Hc(3,"\u0414\u0430\u0442\u0430 \u043f\u043e: "),s.Pb(),s.Lb(4,"input",20),s.Pb(),s.Qb(5,"div",21),s.Lb(6,"button",22),s.Qb(7,"button",23),s.Xb("click",function(){return s.yc(i),s.ac().closeDateModal()}),s.Pb(),s.Pb(),s.Pb()}if(2&t){var n=s.ac();s.hc("formGroup",n.filterForm)}}var T,k,C,H,z,x=function(){return[10,25,50]},S=function(){return{width:"450px"}},F=[{path:"",children:[{path:"",component:(T=function(){function i(t,n,a){e(this,i),this.fb=t,this.datepipe=n,this.reportService=a,this.reportData=[],this.columns=[],this._subscription$=new c.a,this.filterDialog=!1}var n,b,r;return n=i,(b=[{key:"ngOnInit",value:function(){this._initializeForm(),this._initValues(),this._fetch()}},{key:"exportExcel",value:function(){var t=this;a.e(5).then(a.t.bind(null,"EUZL",7)).then(function(e){var i=[];t.reportData.forEach(function(e){var n={};t.columns.forEach(function(t){n[t.title]=e[t.name]}),i.push(n)});var n=e.utils.json_to_sheet(i),a=e.write({Sheets:{data:n},SheetNames:["data"]},{bookType:"xlsx",type:"array"});t._saveAsExcelFile(a,"\u043e\u0442\u0447\u0435\u0442")})}},{key:"updateDelays",value:function(){this._fetch()}},{key:"openDateModal",value:function(){this.filterDialog=!0}},{key:"closeDateModal",value:function(){this.filterDialog=!1}},{key:"checkDateAddon",value:function(t){return new Date(t)<new Date(this.filterForm.value.dateTo)}},{key:"_fetch",value:function(){var t=this,e={Type:"DebtorDelay",Title:"\u041f\u0440\u043e\u0441\u0440\u043e\u0447\u043a\u0438 \u043f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u044f",Export:"JSON",CustomerID:0,Date:new Date(this.filterForm.value.dateTo),DebtorID:0,Delay:1};this._subscription$.add(this.reportService.getReport(e).subscribe(function(e){t.reportData=e,t.reportData.sort(function(t,e){return new Date(t.DatePayment).getTime()-new Date(e.DatePayment).getTime()}),t.closeDateModal(),t.isLoading=!1}))}},{key:"_saveAsExcelFile",value:function(t,e){a.e(7).then(a.t.bind(null,"Iab2",7)).then(function(i){var n=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});i.saveAs(n,e+"_export_"+(new Date).getTime()+".xlsx")})}},{key:"_initValues",value:function(){this.columns=[{name:"ShipmentID",title:"ID \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438",type:"string",visible:!0},{name:"CustomerTitle",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430",type:"string",visible:!0},{name:"DebtorTitle",title:"\u041f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u044c",type:"string",visible:!0},{name:"ContractDeliveryNumber",title:"\u0414\u043e\u0433\u043e\u0432\u043e\u0440 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438",type:"string",visible:!0},{name:"RequestDate",title:"\u0414\u0430\u0442\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430",type:"string",visible:!0},{name:"RequestNumber",title:"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043f\u0440\u043e\u0441\u0430",type:"string",visible:!0},{name:"ShipmentFullTitle",title:"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f",type:"string",visible:!0},{name:"StatusTitle",title:"\u0421\u0442\u0430\u0442\u0443\u0441",type:"string",visible:!0},{name:"CurrencyTitle",title:"\u0412\u0430\u043b\u044e\u0442\u0430",type:"string",visible:!0},{name:"ShipmentSumm",title:"\u0421\u0443\u043c\u043c\u0430 \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438",type:"string",visible:!0},{name:"DutyDebtor",title:"\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0441\u0440\u043e\u0447\u043a\u0438",type:"string",visible:!0},{name:"DutyCustomer",title:"\u0421\u0443\u043c\u043c\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0430",type:"string",visible:!0},{name:"DutyCommission",title:"\u0421\u0443\u043c\u043c\u0430 \u043a\u043e\u043c\u0438\u0441\u0441\u0438\u0438",type:"string",visible:!0},{name:"DateShipment",title:"\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438",type:"string",visible:!0},{name:"DatePayment",title:"\u0414\u0430\u0442\u0430 \u043e\u043f\u043b\u0430\u0442\u044b",type:"string",visible:!0},{name:"DateOpen",title:"\u0414\u0430\u0442\u0430 \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u044f",type:"string",visible:!0},{name:"DatePayed",title:"\u0414\u0430\u0442\u0430 \u043e\u043f\u043b\u0430\u0447\u0435\u043d\u043e",type:"string",visible:!0},{name:"DateAddon",title:"\u0414\u0430\u0442\u0430 \u0434\u043e\u043f",type:"string",visible:!0},{name:"RateStandart",title:"Rate Standart",type:"string",visible:!0},{name:"RateExtra",title:"Rate Extra",type:"string",visible:!0},{name:"CommissionPercent",title:"Commission Percent",type:"string",visible:!0},{name:"PenyPercent",title:"Peny Percent",type:"string",visible:!0},{name:"CommissionBottomBorder",title:"Commission Bottom Border",type:"string",visible:!0},{name:"CommissionTopBorder",title:"Commission Top Border",type:"string",visible:!0},{name:"RegionTitle",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0440\u0435\u0433\u0438\u043e\u043d\u0430",type:"string",visible:!0},{name:"ProductCodeTitle",title:"Product Code Title",type:"string",visible:!0}]}},{key:"_initializeForm",value:function(){var t=new Date;this.filterForm=this.fb.group({dateTo:[this.datepipe.transform(t,"yyyy-MM-dd"),[l.x.required]]})}},{key:"ngOnDestroy",value:function(){this._subscription$.unsubscribe()}}])&&t(n.prototype,b),r&&t(n,r),i}(),T.\u0275fac=function(t){return new(t||T)(s.Kb(l.d),s.Kb(o.f),s.Kb(d.a))},T.\u0275cmp=s.Eb({type:T,selectors:[["app-delays-page"]],features:[s.yb([o.f])],decls:13,vars:20,consts:[["id","step1",1,"card-content"],[3,"title"],[1,"mib-action","button-content","p-mr-2",3,"click"],["pTooltip","\u042d\u043a\u0441\u043f\u043e\u0440\u0442 \u0444\u0430\u0439\u043b\u0430 Excel",1,"mib-action","mib-button-icon","excel-icon","can-click",3,"click"],["src","../../../../../../assets/icons/mib-excel.png","alt",""],["styleClass","p-datatable-customers mib-table","currentPageReportTemplate","\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u043e: \u043e\u0442 {first} \u0434\u043e {last} \u0438\u0437 {totalRecords}",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","metaKeySelection"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["header","\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0435\u0440\u0438\u043e\u0434","styleClass","p-fluid",3,"visible","draggable","resizable","modal","visibleChange"],["pTemplate","content"],[1,"m-th"],[1,"m-td"],[1,"m-td","currency"],[1,"m-td","red"],[1,"m-td",3,"ngClass"],["colspan","8"],[3,"formGroup","ngSubmit"],[1,"p-field"],["for","dateTo"],["id","dateTo","type","date","pInputText","","placeholder","\u0414\u0430\u0442\u0430 \u043f\u043e","formControlName","dateTo"],[1,"modal-actions"],["pButton","","pRipple","","label","\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c","type","submit",1,"p-button-text","save"],["pButton","","pRipple","","label","\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c","type","button",1,"p-button-text","cancel",3,"click"]],template:function(t,e){1&t&&(s.Qb(0,"div",0),s.Qb(1,"header-page",1),s.Qb(2,"div",2),s.Xb("click",function(){return e.openDateModal()}),s.Hc(3),s.bc(4,"date"),s.Pb(),s.Qb(5,"div",3),s.Xb("click",function(){return e.exportExcel()}),s.Lb(6,"img",4),s.Pb(),s.Pb(),s.Qb(7,"p-table",5),s.Fc(8,g,33,0,"ng-template",6),s.Fc(9,Q,38,26,"ng-template",7),s.Fc(10,D,3,0,"ng-template",8),s.Pb(),s.Pb(),s.Qb(11,"p-dialog",9),s.Xb("visibleChange",function(t){return e.filterDialog=t}),s.Fc(12,w,8,1,"ng-template",10),s.Pb()),2&t&&(s.zb(1),s.hc("title","\u041f\u0440\u043e\u0441\u0440\u043e\u0447\u043a\u0438 \u043f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u044f"),s.zb(2),s.Jc(" ",s.dc(4,15,e.filterForm.value.dateTo,"dd.MM.yyyy")," "),s.zb(4),s.hc("value",e.reportData)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",s.lc(18,x))("loading",e.isLoading)("paginator",!0)("metaKeySelection",!0),s.zb(4),s.Dc(s.lc(19,S)),s.hc("visible",e.filterDialog)("draggable",!1)("resizable",!1)("modal",!0))},directives:[m,v.h,y.i,f.a,o.l,l.y,l.q,l.h,l.b,h.a,l.p,l.f,P.b],pipes:[o.f,o.d],styles:[""]}),T)}]}],I=((k=function t(){e(this,t)}).\u0275mod=s.Ib({type:k}),k.\u0275inj=s.Hb({factory:function(t){return new(t||k)},imports:[[r.j.forChild(F)],r.j]}),k),M=a("arFO"),R=a("QIUk"),E=a("lVkt"),_=a("+DzE"),B=a("+la4"),J=a("Ji6n"),j=a("LuMj"),A=a("zFJ7"),L=a("b1Ni"),N=a("+F6F"),O=a("tk/3"),U=((H=function t(i){e(this,t),this.http=i}).\u0275fac=function(t){return new(t||H)(s.Ub(O.b))},H.\u0275prov=s.Gb({token:H,factory:H.\u0275fac}),H),X=((C=function t(){e(this,t)}).\u0275mod=s.Ib({type:C}),C.\u0275inj=s.Hb({factory:function(t){return new(t||C)}}),C),q=a("J7/z"),K=((z=function t(){e(this,t)}).\u0275mod=s.Ib({type:z}),z.\u0275inj=s.Hb({factory:function(t){return new(t||z)},providers:[q.a,U,d.a],imports:[[o.c,h.b,J.b,P.c,j.a,A.b,B.a,v.k,M.b,f.b,l.j,_.b,E.b,l.v,R.b,L.a,N.a,I,X]]}),z)}}])}();