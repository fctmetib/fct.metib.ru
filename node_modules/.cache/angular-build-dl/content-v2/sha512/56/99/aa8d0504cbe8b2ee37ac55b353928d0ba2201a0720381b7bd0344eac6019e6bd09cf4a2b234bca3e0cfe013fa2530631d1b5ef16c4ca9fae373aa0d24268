!function(){function e(e,i){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e))||i&&e&&"number"==typeof e.length){n&&(e=n);var b=0,c=function(){};return{s:c,n:function(){return b>=e.length?{done:!0}:{done:!1,value:e[b++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw r}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{DWHD:function(t,i,c){"use strict";c.r(i),c.d(i,"RequestModule",function(){return mi});var r,o=c("i4ku"),a=c("KWQS"),s=c("9jGm"),l=c("eIep"),u=c("lJxs"),d=c("JIr8"),m=c("LRne"),p=c("l7P3"),h=function(e){return e.ADD_REQUEST="[Requests] Add request",e.ADD_REQUEST_SUCCESS="[Requests] Add request success",e.ADD_REQUEST_FAILURE="[Requests] Add request failure",e.SET_ERROR="[Requests] Set error",e}({}),v=Object(p.n)(h.ADD_REQUEST,Object(p.s)()),f=Object(p.n)(h.ADD_REQUEST_SUCCESS,Object(p.s)()),P=Object(p.n)(h.ADD_REQUEST_FAILURE,Object(p.s)()),Q=Object(p.n)(h.SET_ERROR,Object(p.s)()),g=c("fXoL"),y=c("eUBX"),D=((r=function e(t,i,n){var c=this;b(this,e),this.actions$=t,this.store=i,this.requestsService=n,this.add$=Object(s.c)(function(){return c.actions$.pipe(Object(s.d)(v),Object(l.a)(function(e){var t=e.request;return c.requestsService.add(t).pipe(Object(u.a)(function(e){return f({response:e})}),Object(d.a)(function(e){return Object(m.a)(P({errors:e.error}))}))}))})}).\u0275fac=function(e){return new(e||r)(g.Ub(s.a),g.Ub(p.h),g.Ub(y.a))},r.\u0275prov=g.Gb({token:r,factory:r.\u0275fac}),r),I=c("0s3d"),S=c("quSY"),F=function(e){return e.NonFinancing="NonFinancing",e.Financing="Financing",e.Correction="Correction",e}({}),H=c("J7/z"),w=c("ofXK"),z=c("rEr+"),k=c("7zfz"),C=c("jIHw"),x=c("qZOx"),R=c("3Pt+"),q=c("7kUa"),N=c("jeV5");function T(e,t){if(1&e&&g.Lb(0,"metib-success-messages",10),2&e){var i=g.ac();g.hc("message",i.successMessage)}}function L(e,t){1&e&&(g.Qb(0,"tr"),g.Qb(1,"th"),g.Qb(2,"div",11),g.Qb(3,"div"),g.Hc(4,"\u0421\u0447\u0451\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430"),g.Pb(),g.Pb(),g.Pb(),g.Qb(5,"th"),g.Qb(6,"div",11),g.Qb(7,"div"),g.Hc(8,"\u0421\u0447. \u0444\u0430\u043a\u0442\u0443\u0440 \u0434\u0430\u0442\u0430"),g.Pb(),g.Pb(),g.Pb(),g.Qb(9,"th"),g.Qb(10,"div",11),g.Qb(11,"div"),g.Hc(12,"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f"),g.Pb(),g.Pb(),g.Pb(),g.Qb(13,"th"),g.Qb(14,"div",11),g.Qb(15,"div"),g.Hc(16,"\u0414\u0430\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439"),g.Pb(),g.Pb(),g.Pb(),g.Qb(17,"th"),g.Qb(18,"div",11),g.Qb(19,"div"),g.Hc(20,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438"),g.Pb(),g.Pb(),g.Pb(),g.Qb(21,"th"),g.Qb(22,"div",11),g.Qb(23,"div"),g.Hc(24,"\u0421\u0443\u043c\u043c\u0430"),g.Pb(),g.Pb(),g.Pb(),g.Qb(25,"th"),g.Qb(26,"div",11),g.Qb(27,"div"),g.Hc(28,"\u0421\u0443\u043c\u043c\u0430(\u0418\u0441\u0445.)"),g.Pb(),g.Pb(),g.Pb(),g.Pb())}function O(e,t){if(1&e){var i=g.Rb();g.Qb(0,"input",21),g.Xb("ngModelChange",function(e){return g.yc(i),g.ac().$implicit.Summ=e})("ngModelChange",function(){g.yc(i);var e=g.ac().$implicit;return g.ac().setChangedShipment(e,e.Summ)}),g.Pb()}if(2&e){var n=g.ac().$implicit;g.hc("ngModel",n.Summ)("min",n.SummToFactor)}}function M(e,t){if(1&e&&(g.Lb(0,"div"),g.Hc(1),g.bc(2,"currency")),2&e){var i=g.ac().$implicit;g.zb(1),g.Jc(" ",g.ec(2,1,i.Summ,"RUB","symbol-narrow")," ")}}function E(e,t){if(1&e&&(g.Qb(0,"tr",12),g.Qb(1,"td"),g.Qb(2,"div",13),g.Qb(3,"div"),g.Hc(4),g.Pb(),g.Pb(),g.Pb(),g.Qb(5,"td"),g.Qb(6,"div",13),g.Qb(7,"div"),g.Hc(8),g.bc(9,"date"),g.Pb(),g.Pb(),g.Pb(),g.Qb(10,"td"),g.Qb(11,"div",13),g.Qb(12,"div"),g.Hc(13),g.Pb(),g.Pb(),g.Pb(),g.Qb(14,"td"),g.Qb(15,"div",13),g.Qb(16,"div"),g.Hc(17),g.bc(18,"date"),g.Pb(),g.Pb(),g.Pb(),g.Qb(19,"td"),g.Qb(20,"div",13),g.Qb(21,"div"),g.Hc(22),g.bc(23,"date"),g.Pb(),g.Pb(),g.Pb(),g.Qb(24,"td",14),g.Qb(25,"div",15),g.Qb(26,"div"),g.Qb(27,"p-cellEditor"),g.Fc(28,O,1,2,"ng-template",16),g.Fc(29,M,3,5,"ng-template",17),g.Pb(),g.Pb(),g.Qb(30,"div",18),g.Lb(31,"img",19),g.Pb(),g.Pb(),g.Pb(),g.Qb(32,"td"),g.Qb(33,"div",20),g.Qb(34,"div"),g.Hc(35),g.bc(36,"currency"),g.Pb(),g.Pb(),g.Pb(),g.Pb()),2&e){var i=t.$implicit;g.hc("pSelectableRow",i),g.zb(4),g.Ic(i.ID),g.zb(4),g.Ic(g.dc(9,7,i.AccountDate,"dd.MM.yyyy")),g.zb(5),g.Ic(i.InvoiceNumber),g.zb(4),g.Ic(g.dc(18,10,i.InvoiceDate,"dd.MM.yyyy")),g.zb(5),g.Ic(g.dc(23,13,i.DateShipment,"dd.MM.yyyy")),g.zb(13),g.Jc(" ",g.ec(36,16,i.SummToFactor,"RUB","symbol-narrow")," ")}}function j(e,t){if(1&e&&(g.Qb(0,"tr"),g.Lb(1,"td",22),g.Qb(2,"td",23),g.Hc(3),g.bc(4,"currency"),g.Pb(),g.Lb(5,"td",24),g.Pb()),2&e){var i=g.ac();g.zb(3),g.Jc(" ",g.ec(4,1,i.sumCurrentPage,"RUB","symbol-narrow")," ")}}function $(e,t){1&e&&(g.Ob(0),g.Qb(1,"tr"),g.Qb(2,"td",27),g.Hc(3,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445."),g.Pb(),g.Pb(),g.Nb())}function A(e,t){1&e&&(g.Qb(0,"tr"),g.Lb(1,"td"),g.Qb(2,"td"),g.Qb(3,"div",13),g.Lb(4,"p-skeleton"),g.Pb(),g.Pb(),g.Qb(5,"td"),g.Qb(6,"div",13),g.Lb(7,"p-skeleton"),g.Pb(),g.Pb(),g.Qb(8,"td"),g.Qb(9,"div",13),g.Lb(10,"p-skeleton"),g.Pb(),g.Pb(),g.Qb(11,"td"),g.Qb(12,"div",13),g.Lb(13,"p-skeleton"),g.Pb(),g.Pb(),g.Pb())}var B=function(){return{}},X=function(e,t,i,n,b){return[e,t,i,n,b]};function V(e,t){1&e&&g.Fc(0,A,14,0,"tr",28),2&e&&g.hc("ngForOf",g.qc(6,X,g.lc(1,B),g.lc(2,B),g.lc(3,B),g.lc(4,B),g.lc(5,B)))}function K(e,t){if(1&e&&(g.Fc(0,$,4,0,"ng-container",25),g.Fc(1,V,1,12,"ng-template",null,26,g.Gc)),2&e){var i=g.vc(2),n=g.ac();g.hc("ngIf",n.shipments)("ngIfElse",i)}}var _,U=((_=function(){function e(t,i,n,c){b(this,e),this.ref=t,this.service=i,this.config=n,this.store=c,this.shipments=[],this.changedShipments=[],this.sumCurrentPage=0,this.successMessage="",this.subscription$=new S.a}return n(e,[{key:"ngOnInit",value:function(){this.initValues()}},{key:"setChangedShipment",value:function(e,t){e.Summ<e.SummToFactor?e.Summ=e.SummToFactor:(this.changedShipments.push(e),this.calcSumCurrentPage())}},{key:"onSubmit",value:function(){var e=this;this.successMessage="";var t={Date:new Date,DeliveryID:this.request.Delivery.ID,ID:this.request.ID,Shipments:this.changedShipments,Type:F.Correction};this.subscription$.add(this.service.add(t).subscribe(function(t){e.successMessage="\u0417\u0430\u044f\u0432\u043a\u0430 \u043d\u0430 \u043a\u043e\u0440\u0440\u0435\u043a\u0446\u0438\u044e \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430!"}))}},{key:"initValues",value:function(){var e=this;this.subscription$.add(this.service.getRequestByIdAndParams(this.config.data[0].ID,!0,!1,!1).subscribe(function(t){e.request=t,e.shipments=e.request.Shipments,e.calcSumCurrentPage()}))}},{key:"calcSumCurrentPage",value:function(){var e=this.shipments.map(function(e){return e.Summ});this.sumCurrentPage=e.reduce(function(e,t){return Number(e)+Number(t)})}},{key:"ngOnDestroy",value:function(){this.subscription$.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||_)(g.Kb(H.d),g.Kb(y.a),g.Kb(H.b),g.Kb(p.h))},_.\u0275cmp=g.Eb({type:_,selectors:[["app-request-correct-dialog"]],decls:12,vars:3,consts:[[3,"message",4,"ngIf"],[1,"p-field","p-col-12","p-md-12"],[1,"p-text-center"],[1,"responsive-table"],["styleClass","p-datatable-customers mib-table",3,"value","rows"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],["id","btn_submit","pButton","","pRipple","","type","submit","label","\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",1,"btn-mib-submit",3,"click"],[3,"message"],[1,"m-th"],[3,"pSelectableRow"],[1,"m-td"],["pEditableColumn",""],[1,"m-td","with-icon","can-click",2,"justify-self","flex-start","flex-direction","row-reverse"],["pTemplate","input"],["pTemplate","output"],[1,"icon"],["src","../../../../../../assets/icons/edit_icon.png","alt",""],[1,"m-td","currency"],["pInputText","","type","text","required","",3,"ngModel","min","ngModelChange"],["colspan","5"],[2,"text-align","right"],["colspan","1"],[4,"ngIf","ngIfElse"],["skeletonRequestsTemplate",""],["colspan","8"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(g.Fc(0,T,1,1,"metib-success-messages",0),g.Qb(1,"div",1),g.Qb(2,"p",2),g.Hc(3,'\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u0435 \u0441\u0443\u043c\u043c\u0443 \u043f\u043e\u0441\u0442\u0430\u0432\u043e\u043a \u0433\u0434\u0435 \u044d\u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"'),g.Pb(),g.Qb(4,"div",3),g.Qb(5,"p-table",4),g.Fc(6,L,29,0,"ng-template",5),g.Fc(7,E,37,20,"ng-template",6),g.Fc(8,j,6,5,"ng-template",7),g.Fc(9,K,3,2,"ng-template",8),g.Pb(),g.Pb(),g.Pb(),g.Qb(10,"div",1),g.Qb(11,"button",9),g.Xb("click",function(){return t.onSubmit()}),g.Pb(),g.Pb()),2&e&&(g.hc("ngIf",t.successMessage),g.zb(5),g.hc("value",t.shipments)("rows",10))},directives:[w.n,z.h,k.i,C.b,x.a,z.e,z.c,z.a,R.b,q.a,R.w,R.p,R.s,w.m,N.a],pipes:[w.f,w.d],styles:[".form[_ngcontent-%COMP%]{padding-top:10px}.p-fluid[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{height:45%}"]}),_),J=c("Qx8d"),G=c("lYeo"),W=function(){function e(){b(this,e)}return n(e,[{key:"processData",value:function(e){for(var t=e.split("\n"),i=0;i<t.length;i++)t[i]=t[i].split("\t"),1===t[t.length-1].length&&""===t[t.length-1][0]&&t.pop(),1!==t.length||1!==t[0].length||""!==t[0][0]&&"\r"!==t[0][0]||t.pop();return t}}]),e}(),Z=c("K0fe"),Y=c("dixg"),ee=c("arFO"),te=c("dPl2"),ie=c("/RsI"),ne=c("DVgK"),be=c("eO1q"),ce=c("7LiV");function re(e,t){if(1&e&&(g.Lb(0,"metib-backend-error-messages",38),g.bc(1,"async")),2&e){var i=g.ac();g.hc("backendErrors",g.cc(1,1,i.errorsMessage$))}}function oe(e,t){if(1&e&&(g.Lb(0,"metib-success-messages",39),g.bc(1,"async")),2&e){var i=g.ac();g.hc("message",g.cc(1,1,i.successMessage$))}}function ae(e,t){1&e&&(g.Qb(0,"small",41),g.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),g.Pb())}function se(e,t){if(1&e&&(g.Qb(0,"div"),g.Fc(1,ae,2,0,"small",40),g.Pb()),2&e){var i=g.ac();g.zb(1),g.hc("ngIf",i.form.controls.deliveryID.errors.required)}}function le(e,t){1&e&&(g.Qb(0,"small",41),g.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),g.Pb())}function ue(e,t){if(1&e&&(g.Qb(0,"div"),g.Fc(1,le,2,0,"small",40),g.Pb()),2&e){var i=g.ac();g.zb(1),g.hc("ngIf",i.form.controls.number.errors.required)}}function de(e,t){1&e&&(g.Qb(0,"small",41),g.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),g.Pb())}function me(e,t){if(1&e&&(g.Qb(0,"div"),g.Fc(1,de,2,0,"small",40),g.Pb()),2&e){var i=g.ac();g.zb(1),g.hc("ngIf",i.form.controls.type.errors.required)}}function pe(e,t){1&e&&(g.Qb(0,"small",41),g.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),g.Pb())}function he(e,t){if(1&e&&(g.Qb(0,"div"),g.Fc(1,pe,2,0,"small",40),g.Pb()),2&e){var i=g.ac();g.zb(1),g.hc("ngIf",i.form.controls.date.errors.required)}}function ve(e,t){1&e&&(g.Qb(0,"tr"),g.Qb(1,"th",42),g.Lb(2,"p-tableHeaderCheckbox"),g.Pb(),g.Qb(3,"th"),g.Qb(4,"div",43),g.Qb(5,"div"),g.Hc(6,"ID"),g.Pb(),g.Pb(),g.Pb(),g.Qb(7,"th"),g.Qb(8,"div",43),g.Qb(9,"div"),g.Hc(10,"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f"),g.Pb(),g.Pb(),g.Pb(),g.Qb(11,"th"),g.Qb(12,"div",43),g.Qb(13,"div"),g.Hc(14,"\u0414\u0430\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439"),g.Pb(),g.Pb(),g.Pb(),g.Qb(15,"th"),g.Qb(16,"div",43),g.Qb(17,"div"),g.Hc(18,"\u0421\u0447\u0451\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430"),g.Pb(),g.Pb(),g.Pb(),g.Qb(19,"th"),g.Qb(20,"div",43),g.Qb(21,"div"),g.Hc(22,"\u0414\u0430\u0442\u0430 \u0441\u0447\u0451\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u044b"),g.Pb(),g.Pb(),g.Pb(),g.Qb(23,"th"),g.Qb(24,"div",43),g.Qb(25,"div"),g.Hc(26,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438"),g.Pb(),g.Pb(),g.Pb(),g.Qb(27,"th"),g.Qb(28,"div",43),g.Qb(29,"div"),g.Hc(30,"\u0421\u0443\u043c\u043c\u0430"),g.Pb(),g.Pb(),g.Pb(),g.Pb())}function fe(e,t){if(1&e&&(g.Qb(0,"tr"),g.Qb(1,"td"),g.Lb(2,"p-tableCheckbox",44),g.Pb(),g.Qb(3,"td"),g.Qb(4,"div",45),g.Qb(5,"div"),g.Hc(6),g.Pb(),g.Pb(),g.Pb(),g.Qb(7,"td"),g.Qb(8,"div",45),g.Qb(9,"div"),g.Hc(10),g.Pb(),g.Pb(),g.Pb(),g.Qb(11,"td"),g.Qb(12,"div",45),g.Qb(13,"div"),g.Hc(14),g.bc(15,"date"),g.Pb(),g.Pb(),g.Pb(),g.Qb(16,"td"),g.Qb(17,"div",45),g.Qb(18,"div"),g.Hc(19),g.Pb(),g.Pb(),g.Pb(),g.Qb(20,"td"),g.Qb(21,"div",45),g.Qb(22,"div"),g.Hc(23),g.bc(24,"date"),g.Pb(),g.Pb(),g.Pb(),g.Qb(25,"td"),g.Qb(26,"div",45),g.Qb(27,"div"),g.Hc(28),g.bc(29,"date"),g.Pb(),g.Pb(),g.Pb(),g.Qb(30,"td"),g.Qb(31,"div",46),g.Qb(32,"div"),g.Hc(33),g.bc(34,"currency"),g.Pb(),g.Pb(),g.Pb(),g.Pb()),2&e){var i=t.$implicit;g.zb(2),g.hc("value",i),g.zb(4),g.Ic(i.ID),g.zb(4),g.Ic(i.AccountNumber),g.zb(4),g.Ic(g.dc(15,8,i.AccountDate,"dd/MM/yyyy")),g.zb(5),g.Ic(i.InvoiceNumber),g.zb(4),g.Ic(g.dc(24,11,i.InvoiceDate,"dd/MM/yyyy")),g.zb(5),g.Ic(g.dc(29,14,i.DateShipment,"dd/MM/yyyy")),g.zb(5),g.Ic(g.ec(34,17,i.Summ,"RUB","symbol"))}}function Pe(e,t){if(1&e&&(g.Qb(0,"tr"),g.Lb(1,"td",47),g.Qb(2,"td"),g.Hc(3),g.bc(4,"currency"),g.Pb(),g.Pb()),2&e){var i=g.ac();g.zb(3),g.Ic(g.ec(4,1,i.getShipmentsSum(i.shipments),"RUB","symbol"))}}function Qe(e,t){1&e&&(g.Qb(0,"small",41),g.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),g.Pb())}function ge(e,t){if(1&e&&(g.Qb(0,"div"),g.Fc(1,Qe,2,0,"small",40),g.Pb()),2&e){var i=g.ac(2);g.zb(1),g.hc("ngIf",i.shipmentForm.controls.accountNumber.errors.required)}}function ye(e,t){1&e&&(g.Qb(0,"small",41),g.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),g.Pb())}function De(e,t){if(1&e&&(g.Qb(0,"div"),g.Fc(1,ye,2,0,"small",40),g.Pb()),2&e){var i=g.ac(2);g.zb(1),g.hc("ngIf",i.shipmentForm.controls.accountDate.errors.required)}}function Ie(e,t){1&e&&(g.Qb(0,"small",41),g.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),g.Pb())}function Se(e,t){if(1&e&&(g.Qb(0,"div"),g.Fc(1,Ie,2,0,"small",40),g.Pb()),2&e){var i=g.ac(2);g.zb(1),g.hc("ngIf",i.shipmentForm.controls.invoiceNumber.errors.required)}}function Fe(e,t){1&e&&(g.Qb(0,"small",41),g.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),g.Pb())}function He(e,t){if(1&e&&(g.Qb(0,"div"),g.Fc(1,Fe,2,0,"small",40),g.Pb()),2&e){var i=g.ac(2);g.zb(1),g.hc("ngIf",i.shipmentForm.controls.invoiceDate.errors.required)}}function we(e,t){1&e&&(g.Qb(0,"small",41),g.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),g.Pb())}function ze(e,t){if(1&e&&(g.Qb(0,"div"),g.Fc(1,we,2,0,"small",40),g.Pb()),2&e){var i=g.ac(2);g.zb(1),g.hc("ngIf",i.shipmentForm.controls.dateShipment.errors.required)}}function ke(e,t){1&e&&(g.Qb(0,"small",41),g.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),g.Pb())}function Ce(e,t){if(1&e&&(g.Qb(0,"div"),g.Fc(1,ke,2,0,"small",40),g.Pb()),2&e){var i=g.ac(2);g.zb(1),g.hc("ngIf",i.shipmentForm.controls.summ.errors.required)}}function xe(e,t){if(1&e){var i=g.Rb();g.Qb(0,"form",2),g.Xb("ngSubmit",function(){return g.yc(i),g.ac().addShipment()}),g.Qb(1,"div",48),g.Qb(2,"label",49),g.Hc(3,"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f: "),g.Pb(),g.Lb(4,"input",50),g.Fc(5,ge,2,1,"div",7),g.Pb(),g.Qb(6,"div",48),g.Qb(7,"label",51),g.Hc(8,"\u0414\u0430\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439: "),g.Pb(),g.Lb(9,"p-calendar",52),g.Fc(10,De,2,1,"div",7),g.Pb(),g.Qb(11,"div",48),g.Qb(12,"label",53),g.Hc(13,"\u0421\u0447\u0435\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430: "),g.Pb(),g.Lb(14,"input",54),g.Fc(15,Se,2,1,"div",7),g.Pb(),g.Qb(16,"div",48),g.Qb(17,"label",55),g.Hc(18,"\u0414\u0430\u0442\u0430 \u0441\u0447\u0435\u0442\u0430-\u0444: "),g.Pb(),g.Lb(19,"p-calendar",56),g.Fc(20,He,2,1,"div",7),g.Pb(),g.Qb(21,"div",48),g.Qb(22,"label",57),g.Hc(23,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438: "),g.Pb(),g.Lb(24,"p-calendar",58),g.Fc(25,ze,2,1,"div",7),g.Pb(),g.Qb(26,"div",48),g.Qb(27,"label",59),g.Hc(28,"\u0421\u0443\u043c\u043c\u0430: "),g.Pb(),g.Lb(29,"input",60),g.Fc(30,Ce,2,1,"div",7),g.Pb(),g.Qb(31,"div",61),g.Lb(32,"button",62),g.Lb(33,"button",63),g.Pb(),g.Pb()}if(2&e){var n=g.ac();g.hc("formGroup",n.shipmentForm),g.zb(5),g.hc("ngIf",n.shipmentForm.controls.accountNumber.invalid),g.zb(4),g.hc("maxDate",n.maxDate)("readonlyInput",!0),g.zb(1),g.hc("ngIf",n.shipmentForm.controls.accountDate.invalid),g.zb(5),g.hc("ngIf",n.shipmentForm.controls.invoiceNumber.invalid),g.zb(4),g.hc("maxDate",n.maxDate)("readonlyInput",!0),g.zb(1),g.hc("ngIf",n.shipmentForm.controls.invoiceDate.invalid),g.zb(4),g.hc("maxDate",n.maxDate)("readonlyInput",!0),g.zb(1),g.hc("ngIf",n.shipmentForm.controls.dateShipment.invalid),g.zb(5),g.hc("ngIf",n.shipmentForm.controls.summ.invalid),g.zb(2),g.hc("disabled",n.shipmentForm.invalid)}}function Re(e,t){if(1&e&&(g.Qb(0,"li"),g.Hc(1),g.Pb()),2&e){var i=t.$implicit;g.zb(1),g.Jc(" ",i," ")}}function qe(e,t){if(1&e&&(g.Ob(0),g.Qb(1,"p-accordion"),g.Qb(2,"p-accordionTab",64),g.Qb(3,"p"),g.Hc(4),g.Pb(),g.Qb(5,"p"),g.Hc(6,"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435, \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438: "),g.Pb(),g.Qb(7,"ul"),g.Fc(8,Re,2,1,"li",65),g.Pb(),g.Pb(),g.Pb(),g.Nb()),2&e){var i=g.ac();g.zb(4),g.Kc("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c ",i.errorsShipments.length," \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0445 \u0438\u0437 ",i.lengthShipments,"."),g.zb(4),g.hc("ngForOf",i.errorsShipments)}}function Ne(e,t){if(1&e){var i=g.Rb();g.Qb(0,"p-button",66),g.Xb("click",function(){return g.yc(i),g.ac().rowDataValidateDialog=!1}),g.Pb()}}function Te(e,t){1&e&&(g.Qb(0,"tr"),g.Qb(1,"th",42),g.Lb(2,"p-tableHeaderCheckbox"),g.Pb(),g.Qb(3,"th"),g.Qb(4,"div",43),g.Qb(5,"div"),g.Hc(6," ID "),g.Pb(),g.Pb(),g.Pb(),g.Qb(7,"th"),g.Qb(8,"div",43),g.Qb(9,"div"),g.Hc(10," \u041d\u043e\u043c\u0435\u0440 "),g.Pb(),g.Pb(),g.Pb(),g.Qb(11,"th"),g.Qb(12,"div",43),g.Qb(13,"div"),g.Hc(14," \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 "),g.Pb(),g.Pb(),g.Pb(),g.Qb(15,"th"),g.Qb(16,"div",43),g.Qb(17,"div"),g.Hc(18," \u0422\u0438\u043f "),g.Pb(),g.Pb(),g.Pb(),g.Qb(19,"th"),g.Qb(20,"div",43),g.Qb(21,"div"),g.Hc(22," \u0421\u0442\u0430\u0442\u0443\u0441 "),g.Pb(),g.Pb(),g.Pb(),g.Qb(23,"th"),g.Qb(24,"div",43),g.Qb(25,"div"),g.Hc(26," \u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f "),g.Pb(),g.Pb(),g.Pb(),g.Qb(27,"th"),g.Qb(28,"div",43),g.Qb(29,"div"),g.Hc(30," \u0410\u043a\u0442\u0438\u0432\u043d\u0430\u044f... "),g.Pb(),g.Pb(),g.Pb(),g.Qb(31,"th"),g.Qb(32,"div",43),g.Qb(33,"div"),g.Hc(34," \u0424\u0430\u043c\u0438\u043b\u0438\u044f "),g.Pb(),g.Pb(),g.Pb(),g.Qb(35,"th"),g.Qb(36,"div",43),g.Qb(37,"div"),g.Hc(38," \u0418\u043c\u044f "),g.Pb(),g.Pb(),g.Pb(),g.Pb())}function Le(e,t){if(1&e&&(g.Ob(0),g.Qb(1,"tr",67),g.Qb(2,"td"),g.Lb(3,"p-tableCheckbox",44),g.Pb(),g.Qb(4,"td"),g.Qb(5,"div",45),g.Qb(6,"div"),g.Hc(7," ID "),g.Pb(),g.Pb(),g.Pb(),g.Qb(8,"td"),g.Qb(9,"div",45),g.Qb(10,"div"),g.Hc(11," \u041d\u043e\u043c\u0435\u0440 "),g.Pb(),g.Pb(),g.Pb(),g.Qb(12,"td"),g.Qb(13,"div",45),g.Qb(14,"div"),g.Hc(15),g.Pb(),g.Pb(),g.Pb(),g.Qb(16,"td"),g.Qb(17,"div",45),g.Qb(18,"div"),g.Hc(19," \u0422\u0438\u043f "),g.Pb(),g.Pb(),g.Pb(),g.Qb(20,"td"),g.Qb(21,"div",45),g.Qb(22,"div"),g.Hc(23," \u0421\u0442\u0430\u0442\u0443\u0441 "),g.Pb(),g.Pb(),g.Pb(),g.Qb(24,"td"),g.Qb(25,"div",45),g.Qb(26,"div"),g.Hc(27," \u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434... "),g.Pb(),g.Pb(),g.Pb(),g.Qb(28,"td"),g.Qb(29,"div",45),g.Qb(30,"div"),g.Hc(31," \u0410\u043a\u0442\u0438\u0432\u043d\u0430\u044f... "),g.Pb(),g.Pb(),g.Pb(),g.Qb(32,"td"),g.Qb(33,"div",45),g.Qb(34,"div"),g.Hc(35," \u0424\u0430\u043c\u0438\u043b\u0438\u044f "),g.Pb(),g.Pb(),g.Pb(),g.Qb(36,"td"),g.Qb(37,"div",45),g.Qb(38,"div"),g.Hc(39," \u0418\u043c\u044f "),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Nb()),2&e){var i=g.ac(),n=i.$implicit,b=i.rowIndex;g.zb(1),g.hc("pSelectableRow",n)("pSelectableRowIndex",b),g.zb(2),g.hc("value",n),g.zb(12),g.Jc(" ",n.FileName," ")}}function Oe(e,t){1&e&&g.Fc(0,Le,40,4,"ng-container",7),2&e&&g.hc("ngIf","Scan"===t.$implicit.Identifier)}function Me(e,t){1&e&&(g.Qb(0,"tr"),g.Qb(1,"th",42),g.Lb(2,"p-tableHeaderCheckbox"),g.Pb(),g.Qb(3,"th"),g.Qb(4,"div",43),g.Qb(5,"div"),g.Hc(6," ID "),g.Pb(),g.Pb(),g.Pb(),g.Qb(7,"th"),g.Qb(8,"div",43),g.Qb(9,"div"),g.Hc(10," \u041d\u043e\u043c\u0435\u0440 "),g.Pb(),g.Pb(),g.Pb(),g.Qb(11,"th"),g.Qb(12,"div",43),g.Qb(13,"div"),g.Hc(14," \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 "),g.Pb(),g.Pb(),g.Pb(),g.Qb(15,"th"),g.Qb(16,"div",43),g.Qb(17,"div"),g.Hc(18," \u0422\u0438\u043f "),g.Pb(),g.Pb(),g.Pb(),g.Qb(19,"th"),g.Qb(20,"div",43),g.Qb(21,"div"),g.Hc(22," \u0421\u0442\u0430\u0442\u0443\u0441 "),g.Pb(),g.Pb(),g.Pb(),g.Qb(23,"th"),g.Qb(24,"div",43),g.Qb(25,"div"),g.Hc(26," \u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f "),g.Pb(),g.Pb(),g.Pb(),g.Qb(27,"th"),g.Qb(28,"div",43),g.Qb(29,"div"),g.Hc(30," \u0410\u043a\u0442\u0438\u0432\u043d\u0430\u044f... "),g.Pb(),g.Pb(),g.Pb(),g.Qb(31,"th"),g.Qb(32,"div",43),g.Qb(33,"div"),g.Hc(34," \u0424\u0430\u043c\u0438\u043b\u0438\u044f "),g.Pb(),g.Pb(),g.Pb(),g.Qb(35,"th"),g.Qb(36,"div",43),g.Qb(37,"div"),g.Hc(38," \u0418\u043c\u044f "),g.Pb(),g.Pb(),g.Pb(),g.Pb())}function Ee(e,t){if(1&e&&(g.Ob(0),g.Qb(1,"tr",68),g.Qb(2,"td"),g.Lb(3,"p-tableCheckbox",44),g.Pb(),g.Qb(4,"td"),g.Qb(5,"div",45),g.Qb(6,"div"),g.Hc(7," ID "),g.Pb(),g.Pb(),g.Pb(),g.Qb(8,"td"),g.Qb(9,"div",45),g.Qb(10,"div"),g.Hc(11," \u041d\u043e\u043c\u0435\u0440 "),g.Pb(),g.Pb(),g.Pb(),g.Qb(12,"td"),g.Qb(13,"div",45),g.Qb(14,"div"),g.Hc(15),g.Pb(),g.Pb(),g.Pb(),g.Qb(16,"td"),g.Qb(17,"div",45),g.Qb(18,"div"),g.Hc(19," \u0422\u0438\u043f "),g.Pb(),g.Pb(),g.Pb(),g.Qb(20,"td"),g.Qb(21,"div",45),g.Qb(22,"div"),g.Hc(23," \u0421\u0442\u0430\u0442\u0443\u0441 "),g.Pb(),g.Pb(),g.Pb(),g.Qb(24,"td"),g.Qb(25,"div",45),g.Qb(26,"div"),g.Hc(27," \u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f "),g.Pb(),g.Pb(),g.Pb(),g.Qb(28,"td"),g.Qb(29,"div",45),g.Qb(30,"div"),g.Hc(31," \u0410\u043a\u0442\u0438\u0432\u043d\u0430\u044f... "),g.Pb(),g.Pb(),g.Pb(),g.Qb(32,"td"),g.Qb(33,"div",45),g.Qb(34,"div"),g.Hc(35," \u0424\u0430\u043c\u0438\u043b\u0438\u044f "),g.Pb(),g.Pb(),g.Pb(),g.Qb(36,"td"),g.Qb(37,"div",45),g.Qb(38,"div"),g.Hc(39," \u0418\u043c\u044f "),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Nb()),2&e){var i=g.ac().$implicit;g.zb(1),g.hc("pSelectableRow",i),g.zb(2),g.hc("value",i),g.zb(12),g.Jc(" ",i.FileName," ")}}function je(e,t){1&e&&g.Fc(0,Ee,40,3,"ng-container",7),2&e&&g.hc("ngIf","All"===t.$implicit.Identifier)}var $e,Ae=function(){return{width:"650px"}},Be=function(){return{width:"50vw"}},Xe=(($e=function(){function t(e,i,n,c,r,o,a){b(this,t),this.ref=e,this.fb=i,this.fileService=n,this.deliveryService=c,this.config=r,this.commonService=o,this.store=a,this.deliveries=[],this.types=[{name:"\u0411\u0435\u0437 \u0444\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",value:"NonFinancing"},{name:"\u0421 \u0444\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c",value:"Financing"}],this.freeDuty=0,this.shipments=[],this.selectedShipments=[],this.files=[],this.uploadedFiles=[],this.btnSubmitValue="\u0421\u043e\u0437\u0434\u0430\u0442\u044c",this.currentShipmentID=null,this.maxDate=new Date,this.errorsShipments=[],this.lengthShipments=0,this.selectedImages=[],this.subscription$=new S.a}return n(t,[{key:"ngOnInit",value:function(){this.errorsMessage$=this.store.pipe(Object(p.t)(J.a)),this.successMessage$=this.store.pipe(Object(p.t)(J.b)),this.initializeForm()}},{key:"ngOnDestroy",value:function(){this.subscription$.unsubscribe()}},{key:"initializeForm",value:function(){var e=this;if(this.form=this.fb.group({deliveryID:[0,[R.x.required]],number:[""],type:["NonFinancing",[R.x.required]],date:["",[R.x.required]]}),this.shipmentForm=this.fb.group({accountNumber:["",[R.x.required]],accountDate:["",[R.x.required]],invoiceNumber:["",[R.x.required]],invoiceDate:["",[R.x.required]],dateShipment:["",[R.x.required]],summ:[1,[R.x.required]]}),this.subscription$.add(this.deliveryService.getDeliveriesWithStats().subscribe(function(t){if(e.deliveries=t.sort(function(e,t){return new Date(e.DateTo).getTime()-new Date(t.DateTo).getTime()}).reverse(),e.config.data){var i=e.deliveries.find(function(t){return t.ID===e.config.data.Delivery.ID});e.freeDuty=i.Statistics.DutyDebtor}})),this.config.data){var t=this.config.data;console.log(t),t.Shipments&&(this.shipments=t.Shipments),this.form.patchValue({deliveryID:t.Delivery.ID,number:t.Number,type:t.Type,date:t.Date}),this.btnSubmitValue="\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}}},{key:"onSubmit",value:function(){if(this.shipments.length>0){var e={Date:new Date(this.form.value.date),DeliveryID:this.form.value.deliveryID,Files:this.files,Number:this.form.value.number,Shipments:this.shipments,Type:this.form.value.type};this.store.dispatch(v({request:e}))}else this.store.dispatch(Q({errors:"\u041e\u0448\u0438\u0431\u043a\u0430! \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043c\u0438\u043d\u0438\u043c\u0443\u043c 1 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0443."}))}},{key:"onDeliveryChange",value:function(e){var t=this.deliveries.find(function(t){return t.ID===e.value});this.freeDuty=t.Statistics.DutyDebtor}},{key:"onKeyPress",value:function(e){var t=this;if((e.ctrlKey||e.metaKey)&&86==e.keyCode){var i=new W;if(window.clipboardData){var n=window.clipboardData.getData("Text"),b=i.processData(n);this.addRowsFromClipboard(b)}else navigator.clipboard.readText().then(function(e){var n=i.processData(e);t.addRowsFromClipboard(n)})}}},{key:"getShipmentsSum",value:function(e){if(e)return e.reduce(function(e,t){return e+t.Summ},0)}},{key:"openNew",value:function(e){if(e){var t=this.selectedShipments[0];if(!t)return;this.currentShipmentID=t.ID,this.shipmentForm.patchValue({accountNumber:t.AccountNumber||"",accountDate:new Date(t.AccountDate),invoiceNumber:t.InvoiceNumber,invoiceDate:new Date(t.InvoiceDate),dateShipment:new Date(t.DateShipment),summ:t.Summ})}this.addDeliveryDialog=!0}},{key:"hideDialog",value:function(){this.addDeliveryDialog=!1}},{key:"deleteShipments",value:function(){var e=this;this.selectedShipments.forEach(function(t){e.shipments.splice(e.shipments.indexOf(t),1)}),this.selectedShipments=[]}},{key:"addShipment",value:function(){var e=this,t={AccountNumber:this.shipmentForm.value.accountNumber,AccountDate:this.shipmentForm.value.accountDate,InvoiceNumber:this.shipmentForm.value.invoiceNumber,InvoiceDate:this.shipmentForm.value.invoiceDate,WaybillNumber:null,WaybillDate:null,DateShipment:this.shipmentForm.value.dateShipment,DatePayment:null,SummToFactor:null,Summ:this.shipmentForm.value.summ,ID:Math.floor(100*Math.random())};if(this.currentShipmentID){t.ID=this.currentShipmentID;var i=this.shipments.indexOf(this.shipments.find(function(t){return t.ID===e.currentShipmentID}));this.shipments[i]=t,this.currentShipmentID=null}else this.shipments.push(t);this.shipmentForm.reset(),this.hideDialog()}},{key:"removeFile",value:function(){var e=this;this.selectedImages.forEach(function(t){e.files.splice(e.files.indexOf(e.files.find(function(e){return e===t})),1)}),this.selectedImages=[]}},{key:"onSelect",value:function(t,i){var n=this,b=t.target.files;this.uploadedFiles=b;var c,r=e(b);try{var o=function(){var e=c.value,t=G.a.newGuid();n.subscription$.add(n.commonService.getBase64(e).subscribe(function(b){n.fileService.uploadFileChunks(b,e.name,e.size.toString(),t).subscribe(function(e){n.files.push({Code:e.Code,FileName:e.FileName,ID:e.ID,Size:e.Size,Identifier:i}),console.log(n.files)},function(e){return console.log(e)})}))};for(r.s();!(c=r.n()).done;)o()}catch(a){r.e(a)}finally{r.f()}}},{key:"addRowsFromClipboard",value:function(t){this.lengthShipments=0,this.errorsShipments=[];var i,n=null,b=1,c=this.getColumns(),r=e(t);try{for(r.s();!(i=r.n()).done;){var o,a=i.value,s={},l=e(c);try{for(l.s();!(o=l.n()).done;){var u=o.value;s[u.field]=a[u.visibleIndex]}}catch(m){l.e(m)}finally{l.f()}if(this.validateRowData(s)){var d={AccountNumber:s.AccountNumber,AccountDate:s.AccountDate,InvoiceNumber:s.InvoiceNumber,InvoiceDate:s.InvoiceDate,WaybillNumber:null,WaybillDate:null,DateShipment:s.DateShipment,DatePayment:null,SummToFactor:null,Summ:s.Summ,ID:Math.floor(100*Math.random())};console.log(d),this.shipments.push(d)}else this.errorsShipments.push(b),n=!0;b++}}catch(m){r.e(m)}finally{r.f()}n&&(this.lengthShipments=t.length,this.showRowDataValidateMessage())}},{key:"validateRowData",value:function(e){return!!(e.AccountDate&&e.AccountNumber&&e.DateShipment&&e.InvoiceDate&&e.InvoiceNumber&&e.Summ)}},{key:"showRowDataValidateMessage",value:function(){this.rowDataValidateDialog=!0}},{key:"getColumns",value:function(){return[{field:"InvoiceNumber",visibleIndex:0},{field:"InvoiceDate",visibleIndex:1},{field:"AccountNumber",visibleIndex:2},{field:"AccountDate",visibleIndex:3},{field:"Summ",visibleIndex:4},{field:"DateShipment",visibleIndex:5}]}}]),t}()).\u0275fac=function(e){return new(e||$e)(g.Kb(H.d),g.Kb(R.d),g.Kb(Z.a),g.Kb(I.a),g.Kb(H.b),g.Kb(Y.a),g.Kb(p.h))},$e.\u0275cmp=g.Eb({type:$e,selectors:[["app-request-create-dialog"]],hostBindings:function(e,t){1&e&&g.Xb("keydown",function(e){return t.onKeyPress(e)},!1,g.xc)},decls:84,vars:49,consts:[[3,"backendErrors",4,"ngIf"],[3,"message",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","p-grid","form"],[1,"p-field","p-col-12","p-md-6"],["for","deliveryID"],["id","deliveryID","placeholder","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440","formControlName","deliveryID","optionLabel","Title","optionValue","ID",3,"options","onChange"],[4,"ngIf"],["for","freeDuty"],["id","freeDuty","type","text","pInputText","","placeholder","\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0439 \u041b\u0438\u043c\u0438\u0442","readonly","",3,"value"],["for","number"],["id","number","type","text","pInputText","","placeholder","\u041d\u043e\u043c\u0435\u0440 \u0417\u0430\u044f\u0432\u043a\u0438","formControlName","number"],["for","type"],["id","type","formControlName","type","optionLabel","name","optionValue","value",3,"options"],["for","date"],["id","date","type","date","pInputText","","placeholder","\u0414\u0430\u0442\u0430","formControlName","date"],["for","btn_submit"],["id","btn_submit","pButton","","pRipple","","type","submit",1,"btn-mib-submit",3,"label","disabled"],["header","\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0438"],[1,"card"],[1,"mib-toolbar"],["type","button","pButton","","pRipple","","label","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",1,"p-mr-2",3,"click"],["type","button","pButton","","pRipple","","label","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",1,"p-mr-2",3,"click"],["type","button","pButton","","pRipple","",1,"p-mr-2",3,"label","click"],["selectionMode","multiple",3,"rows","rowHover","value","selection","selectionChange"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["header","\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f","styleClass","p-fluid",3,"visible","modal","draggable","resizable","visibleChange"],["pTemplate","content"],["header","\u041e\u0448\u0438\u0431\u043a\u0430",3,"visible","baseZIndex","modal","draggable","resizable","visibleChange"],["header","\u0421\u043a\u0430\u043d-\u043a\u043e\u043f\u0438\u0438 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0445"],["type","file","id","Scan","multiple","true","accept","image/jpeg,image/png,image/gif,application/pdf","hidden","",3,"change"],["for","Scan","pButton","","pRipple","","label","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",1,"p-mr-2","button"],["selectionMode","multiple","dataKey","ID","styleClass","p-datatable-customers mib-table",3,"value","selection","metaKeySelection","selectionChange"],["header","\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u042d\u0414\u041e"],["type","file","id","All","multiple","true","accept","image/jpeg,image/png,image/gif,application/pdf","hidden","",3,"change"],["for","All","pButton","","pRipple","","label","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",1,"p-mr-2","button"],[3,"backendErrors"],[3,"message"],["class","p-error",4,"ngIf"],[1,"p-error"],[2,"width","3rem"],[1,"m-th"],[3,"value"],[1,"m-td"],[1,"m-td","currency"],["colspan","7",1,"p-text-right"],[1,"p-field"],["for","accountNumber"],["id","accountNumber","type","text","pInputText","","placeholder","\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f","formControlName","accountNumber"],["for","accountDate"],["id","accountDate","selectOtherMonths","true","formControlName","accountDate","placeholder","\u0414\u0430\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439",3,"maxDate","readonlyInput"],["for","invoiceNumber"],["id","invoiceNumber","type","text","pInputText","","placeholder","\u0421\u0447\u0435\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430","formControlName","invoiceNumber"],["for","invoiceDate"],["id","invoiceDate","selectOtherMonths","true","formControlName","invoiceDate","placeholder","\u0414\u0430\u0442\u0430 \u0441\u0447\u0435\u0442\u0430-\u0444",3,"maxDate","readonlyInput"],["for","dateShipment"],["id","dateShipment","selectOtherMonths","true","formControlName","dateShipment","placeholder","\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438",3,"maxDate","readonlyInput"],["for","summ"],["id","summ","type","number","pInputText","","placeholder","\u0421\u0443\u043c\u043c\u0430","formControlName","summ","min","1"],[1,"modal-actions"],["pButton","","pRipple","","label","\u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c","type","submit",1,"p-button-text","save",3,"disabled"],["pButton","","pRipple","","label","\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",1,"p-button-text","cancel"],["header","\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"],[4,"ngFor","ngForOf"],["icon","pi pi-check","label","\u041e\u041a","styleClass","p-button-text",3,"click"],[3,"pSelectableRow","pSelectableRowIndex"],[3,"pSelectableRow"]],template:function(e,t){1&e&&(g.Fc(0,re,2,3,"metib-backend-error-messages",0),g.bc(1,"async"),g.Fc(2,oe,2,3,"metib-success-messages",1),g.bc(3,"async"),g.Qb(4,"form",2),g.Xb("ngSubmit",function(){return t.onSubmit()}),g.Qb(5,"div",3),g.Qb(6,"div",4),g.Qb(7,"label",5),g.Hc(8,"\u0414\u043e\u0433\u043e\u0432\u043e\u0440 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438:"),g.Pb(),g.Qb(9,"p-dropdown",6),g.Xb("onChange",function(e){return t.onDeliveryChange(e)}),g.Pb(),g.Fc(10,se,2,1,"div",7),g.Pb(),g.Qb(11,"div",4),g.Qb(12,"label",8),g.Hc(13,"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0439 \u043b\u0438\u043c\u0438\u0442:"),g.Pb(),g.Lb(14,"input",9),g.bc(15,"currency"),g.Pb(),g.Qb(16,"div",4),g.Qb(17,"label",10),g.Hc(18,"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u044f\u0432\u043a\u0438:"),g.Pb(),g.Lb(19,"input",11),g.Fc(20,ue,2,1,"div",7),g.Pb(),g.Qb(21,"div",4),g.Qb(22,"label",12),g.Hc(23,"\u0422\u0438\u043f \u0437\u0430\u044f\u0432\u043a\u0438:"),g.Pb(),g.Lb(24,"p-dropdown",13),g.Fc(25,me,2,1,"div",7),g.Pb(),g.Qb(26,"div",4),g.Qb(27,"label",14),g.Hc(28,"\u0414\u0430\u0442\u0430: "),g.Pb(),g.Lb(29,"input",15),g.Fc(30,he,2,1,"div",7),g.Pb(),g.Qb(31,"div",4),g.Qb(32,"label",16),g.Hc(33,"\xa0"),g.Pb(),g.Lb(34,"button",17),g.Pb(),g.Pb(),g.Pb(),g.Qb(35,"p-tabView"),g.Qb(36,"p-tabPanel",18),g.Qb(37,"div",19),g.Qb(38,"div",20),g.Qb(39,"button",21),g.Xb("click",function(){return t.openNew(!1)}),g.Pb(),g.Qb(40,"button",22),g.Xb("click",function(){return t.openNew(!0)}),g.Pb(),g.Qb(41,"button",23),g.Xb("click",function(){return t.deleteShipments()}),g.Pb(),g.Pb(),g.Qb(42,"p-table",24),g.Xb("selectionChange",function(e){return t.selectedShipments=e}),g.Fc(43,ve,31,0,"ng-template",25),g.Fc(44,fe,35,21,"ng-template",26),g.Fc(45,Pe,5,5,"ng-template",27),g.Pb(),g.Pb(),g.Qb(46,"p-dialog",28),g.Xb("visibleChange",function(e){return t.addDeliveryDialog=e}),g.Fc(47,xe,34,14,"ng-template",29),g.Pb(),g.Qb(48,"p-dialog",30),g.Xb("visibleChange",function(e){return t.rowDataValidateDialog=e}),g.Qb(49,"h3"),g.Hc(50,"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0435 \u0438\u0437 \u0431\u0443\u0444\u0435\u0440\u0430 \u043e\u0431\u043c\u0435\u043d\u0430!"),g.Pb(),g.Qb(51,"p"),g.Hc(52,"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u043a\u043e\u043b\u043e\u043d\u043e\u043a:"),g.Pb(),g.Qb(53,"ul"),g.Qb(54,"li"),g.Hc(55,"\u041d\u043e\u043c\u0435\u0440 \u0441\u0447\u0435\u0442\u0430-\u0444\u0430\u043a\u0442\u0443\u0440\u044b"),g.Pb(),g.Qb(56,"li"),g.Hc(57,"\u0414\u0430\u0442\u0430 \u0441\u0447\u0435\u0442\u0430-\u0444\u0430\u043a\u0442\u0443\u0440\u044b"),g.Pb(),g.Qb(58,"li"),g.Hc(59,"\u041d\u043e\u043c\u0435\u0440 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439"),g.Pb(),g.Qb(60,"li"),g.Hc(61,"\u0414\u0430\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439"),g.Pb(),g.Qb(62,"li"),g.Hc(63,"\u0421\u0443\u043c\u043c\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439"),g.Pb(),g.Qb(64,"li"),g.Hc(65,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438"),g.Pb(),g.Pb(),g.Fc(66,qe,9,3,"ng-container",7),g.Fc(67,Ne,1,0,"ng-template",27),g.Pb(),g.Pb(),g.Qb(68,"p-tabPanel",31),g.Qb(69,"div",20),g.Qb(70,"input",32),g.Xb("change",function(e){return t.onSelect(e,"Scan")}),g.Pb(),g.Lb(71,"label",33),g.Qb(72,"button",23),g.Xb("click",function(){return t.removeFile()}),g.Pb(),g.Pb(),g.Qb(73,"p-table",34),g.Xb("selectionChange",function(e){return t.selectedImages=e}),g.Fc(74,Te,39,0,"ng-template",25),g.Fc(75,Oe,1,1,"ng-template",26),g.Pb(),g.Pb(),g.Qb(76,"p-tabPanel",35),g.Qb(77,"div",20),g.Qb(78,"input",36),g.Xb("change",function(e){return t.onSelect(e,"All")}),g.Pb(),g.Lb(79,"label",37),g.Qb(80,"button",23),g.Xb("click",function(){return t.removeFile()}),g.Pb(),g.Pb(),g.Qb(81,"p-table",34),g.Xb("selectionChange",function(e){return t.selectedImages=e}),g.Fc(82,Me,39,0,"ng-template",25),g.Fc(83,je,1,1,"ng-template",26),g.Pb(),g.Pb(),g.Pb()),2&e&&(g.hc("ngIf",g.cc(1,39,t.errorsMessage$)),g.zb(2),g.hc("ngIf",g.cc(3,41,t.successMessage$)),g.zb(2),g.hc("formGroup",t.form),g.zb(5),g.hc("options",t.deliveries),g.zb(1),g.hc("ngIf",t.form.controls.deliveryID.invalid),g.zb(4),g.ic("value",g.ec(15,43,t.freeDuty,"RUB","symbol-narrow")),g.zb(6),g.hc("ngIf",t.form.controls.number.invalid),g.zb(4),g.hc("options",t.types),g.zb(1),g.hc("ngIf",t.form.controls.type.invalid),g.zb(5),g.hc("ngIf",t.form.controls.date.invalid),g.zb(4),g.ic("label",t.btnSubmitValue),g.hc("disabled",t.form.invalid),g.zb(7),g.jc("label","\u0423\u0434\u0430\u043b\u0438\u0442\u044c (",t.selectedShipments.length,")"),g.zb(1),g.hc("rows",10)("rowHover",!0)("value",t.shipments)("selection",t.selectedShipments),g.zb(4),g.Dc(g.lc(47,Ae)),g.hc("visible",t.addDeliveryDialog)("modal",!0)("draggable",!1)("resizable",!1),g.zb(2),g.Dc(g.lc(48,Be)),g.hc("visible",t.rowDataValidateDialog)("baseZIndex",1e4)("modal",!0)("draggable",!1)("resizable",!1),g.zb(18),g.hc("ngIf",t.errorsShipments),g.zb(6),g.jc("label","\u0423\u0434\u0430\u043b\u0438\u0442\u044c (",t.selectedImages.length,")"),g.zb(1),g.hc("value",t.files)("selection",t.selectedImages)("metaKeySelection",!0),g.zb(7),g.jc("label","\u0423\u0434\u0430\u043b\u0438\u0442\u044c (",t.selectedImages.length,")"),g.zb(1),g.hc("value",t.files)("selection",t.selectedImages)("metaKeySelection",!0))},directives:[w.n,R.y,R.q,R.h,ee.a,R.p,R.f,q.a,R.b,C.b,te.b,te.a,z.h,k.i,ie.a,ne.a,x.a,z.j,z.i,be.a,R.t,ce.a,ce.c,w.m,C.a,z.e],pipes:[w.b,w.d,w.f],styles:[".form[_ngcontent-%COMP%]{padding-top:10px}.p-fluid[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{height:45%}"]}),$e);function Ve(e,t){1&e&&(g.Qb(0,"tr"),g.Qb(1,"th",24),g.Lb(2,"p-tableHeaderCheckbox"),g.Pb(),g.Qb(3,"th"),g.Qb(4,"div",25),g.Qb(5,"div"),g.Hc(6,"ID"),g.Pb(),g.Pb(),g.Pb(),g.Qb(7,"th"),g.Qb(8,"div",25),g.Qb(9,"div"),g.Hc(10,"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f"),g.Pb(),g.Pb(),g.Pb(),g.Qb(11,"th"),g.Qb(12,"div",25),g.Qb(13,"div"),g.Hc(14,"\u0414\u0430\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439"),g.Pb(),g.Pb(),g.Pb(),g.Qb(15,"th"),g.Qb(16,"div",25),g.Qb(17,"div"),g.Hc(18,"\u0421\u0447\u0451\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430"),g.Pb(),g.Pb(),g.Pb(),g.Qb(19,"th"),g.Qb(20,"div",25),g.Qb(21,"div"),g.Hc(22,"\u0414\u0430\u0442\u0430 \u0441\u0447\u0451\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u044b"),g.Pb(),g.Pb(),g.Pb(),g.Qb(23,"th"),g.Qb(24,"div",25),g.Qb(25,"div"),g.Hc(26,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438"),g.Pb(),g.Pb(),g.Pb(),g.Qb(27,"th"),g.Qb(28,"div",25),g.Qb(29,"div"),g.Hc(30,"\u0421\u0443\u043c\u043c\u0430"),g.Pb(),g.Pb(),g.Pb(),g.Pb())}function Ke(e,t){if(1&e&&(g.Qb(0,"tr"),g.Qb(1,"td"),g.Lb(2,"p-tableCheckbox",26),g.Pb(),g.Qb(3,"td"),g.Qb(4,"div",27),g.Qb(5,"div"),g.Hc(6),g.Pb(),g.Pb(),g.Pb(),g.Qb(7,"td"),g.Qb(8,"div",27),g.Qb(9,"div"),g.Hc(10),g.Pb(),g.Pb(),g.Pb(),g.Qb(11,"td"),g.Qb(12,"div",27),g.Qb(13,"div"),g.Hc(14),g.bc(15,"date"),g.Pb(),g.Pb(),g.Pb(),g.Qb(16,"td"),g.Qb(17,"div",27),g.Qb(18,"div"),g.Hc(19),g.Pb(),g.Pb(),g.Pb(),g.Qb(20,"td"),g.Qb(21,"div",27),g.Qb(22,"div"),g.Hc(23),g.bc(24,"date"),g.Pb(),g.Pb(),g.Pb(),g.Qb(25,"td"),g.Qb(26,"div",27),g.Qb(27,"div"),g.Hc(28),g.bc(29,"date"),g.Pb(),g.Pb(),g.Pb(),g.Qb(30,"td"),g.Qb(31,"div",28),g.Qb(32,"div"),g.Hc(33),g.bc(34,"currency"),g.Pb(),g.Pb(),g.Pb(),g.Pb()),2&e){var i=t.$implicit;g.zb(2),g.hc("value",i),g.zb(4),g.Ic(i.ID),g.zb(4),g.Ic(i.AccountNumber),g.zb(4),g.Ic(g.dc(15,8,i.AccountDate,"dd/MM/yyyy")),g.zb(5),g.Ic(i.InvoiceNumber),g.zb(4),g.Ic(g.dc(24,11,i.InvoiceDate,"dd/MM/yyyy")),g.zb(5),g.Ic(g.dc(29,14,i.DateShipment,"dd/MM/yyyy")),g.zb(5),g.Ic(g.ec(34,17,i.Summ,"RUB","symbol"))}}function _e(e,t){if(1&e&&(g.Qb(0,"tr"),g.Lb(1,"td",29),g.Qb(2,"td"),g.Hc(3),g.bc(4,"currency"),g.Pb(),g.Pb()),2&e){var i=g.ac().index,n=g.ac();g.zb(3),g.Ic(g.ec(4,1,n.getShipmentsSum(i),"RUB","symbol"))}}function Ue(e,t){if(1&e){var i=g.Rb();g.Qb(0,"p-accordionTab",8),g.Qb(1,"div",9),g.Qb(2,"div",10),g.Qb(3,"label",11),g.Hc(4,"\u0414\u043e\u0433\u043e\u0432\u043e\u0440 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438:"),g.Pb(),g.Qb(5,"p-dropdown",12),g.Xb("onChange",function(){g.yc(i);var e=t.index;return g.ac().deliveryChanged(e)}),g.Pb(),g.Pb(),g.Qb(6,"div",10),g.Qb(7,"label",13),g.Hc(8,"\u0414\u0430\u0442\u0430: "),g.Pb(),g.Lb(9,"input",14),g.Pb(),g.Pb(),g.Qb(10,"div",15),g.Qb(11,"div",16),g.Qb(12,"button",17),g.Xb("click",function(){g.yc(i);var e=t.index;return g.ac().openNew(!1,e)}),g.Pb(),g.Qb(13,"button",18),g.Xb("click",function(){g.yc(i);var e=t.index;return g.ac().openNew(!0,e)}),g.Pb(),g.Qb(14,"button",19),g.Xb("click",function(){g.yc(i);var e=t.index;return g.ac().deleteShipments(e)}),g.Pb(),g.Pb(),g.Qb(15,"p-table",20),g.Xb("selectionChange",function(e){return g.yc(i),g.ac().selectedShipments=e}),g.Fc(16,Ve,31,0,"ng-template",21),g.Fc(17,Ke,35,21,"ng-template",22),g.Fc(18,_e,5,5,"ng-template",23),g.Pb(),g.Pb(),g.Pb()}if(2&e){var n=t.index,b=g.ac();g.ic("header",b.requests.at(n).value.Title||"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438..."),g.zb(5),g.hc("options",b.deliveries)("formControlName",n),g.zb(4),g.ic("value",b.requests.at(n).value.DateFrom||"..."),g.hc("disabled",!0),g.zb(5),g.jc("label","\u0423\u0434\u0430\u043b\u0438\u0442\u044c (",b.selectedShipments.length,")"),g.zb(1),g.hc("rows",10)("rowHover",!0)("value",null==b.shipments[n]?null:b.shipments[n].shipmnets)("selection",b.selectedShipments)}}function Je(e,t){1&e&&(g.Qb(0,"small",48),g.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),g.Pb())}function Ge(e,t){if(1&e&&(g.Qb(0,"div"),g.Fc(1,Je,2,0,"small",47),g.Pb()),2&e){var i=g.ac(2);g.zb(1),g.hc("ngIf",i.shipmentForm.controls.accountNumber.errors.required)}}function We(e,t){1&e&&(g.Qb(0,"small",48),g.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),g.Pb())}function Ze(e,t){if(1&e&&(g.Qb(0,"div"),g.Fc(1,We,2,0,"small",47),g.Pb()),2&e){var i=g.ac(2);g.zb(1),g.hc("ngIf",i.shipmentForm.controls.accountDate.errors.required)}}function Ye(e,t){1&e&&(g.Qb(0,"small",48),g.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),g.Pb())}function et(e,t){if(1&e&&(g.Qb(0,"div"),g.Fc(1,Ye,2,0,"small",47),g.Pb()),2&e){var i=g.ac(2);g.zb(1),g.hc("ngIf",i.shipmentForm.controls.invoiceNumber.errors.required)}}function tt(e,t){1&e&&(g.Qb(0,"small",48),g.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),g.Pb())}function it(e,t){if(1&e&&(g.Qb(0,"div"),g.Fc(1,tt,2,0,"small",47),g.Pb()),2&e){var i=g.ac(2);g.zb(1),g.hc("ngIf",i.shipmentForm.controls.invoiceDate.errors.required)}}function nt(e,t){1&e&&(g.Qb(0,"small",48),g.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),g.Pb())}function bt(e,t){if(1&e&&(g.Qb(0,"div"),g.Fc(1,nt,2,0,"small",47),g.Pb()),2&e){var i=g.ac(2);g.zb(1),g.hc("ngIf",i.shipmentForm.controls.dateShipment.errors.required)}}function ct(e,t){1&e&&(g.Qb(0,"small",48),g.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),g.Pb())}function rt(e,t){if(1&e&&(g.Qb(0,"div"),g.Fc(1,ct,2,0,"small",47),g.Pb()),2&e){var i=g.ac(2);g.zb(1),g.hc("ngIf",i.shipmentForm.controls.summ.errors.required)}}function ot(e,t){if(1&e){var i=g.Rb();g.Qb(0,"form",0),g.Xb("ngSubmit",function(){return g.yc(i),g.ac().addShipment()}),g.Qb(1,"div",30),g.Qb(2,"label",31),g.Hc(3,"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f: "),g.Pb(),g.Lb(4,"input",32),g.Fc(5,Ge,2,1,"div",33),g.Pb(),g.Qb(6,"div",30),g.Qb(7,"label",34),g.Hc(8,"\u0414\u0430\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439: "),g.Pb(),g.Lb(9,"p-calendar",35),g.Fc(10,Ze,2,1,"div",33),g.Pb(),g.Qb(11,"div",30),g.Qb(12,"label",36),g.Hc(13,"\u0421\u0447\u0435\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430: "),g.Pb(),g.Lb(14,"input",37),g.Fc(15,et,2,1,"div",33),g.Pb(),g.Qb(16,"div",30),g.Qb(17,"label",38),g.Hc(18,"\u0414\u0430\u0442\u0430 \u0441\u0447\u0435\u0442\u0430-\u0444: "),g.Pb(),g.Lb(19,"p-calendar",39),g.Fc(20,it,2,1,"div",33),g.Pb(),g.Qb(21,"div",30),g.Qb(22,"label",40),g.Hc(23,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438: "),g.Pb(),g.Lb(24,"p-calendar",41),g.Fc(25,bt,2,1,"div",33),g.Pb(),g.Qb(26,"div",30),g.Qb(27,"label",42),g.Hc(28,"\u0421\u0443\u043c\u043c\u0430: "),g.Pb(),g.Lb(29,"input",43),g.Fc(30,rt,2,1,"div",33),g.Pb(),g.Qb(31,"div",44),g.Lb(32,"button",45),g.Lb(33,"button",46),g.Pb(),g.Pb()}if(2&e){var n=g.ac();g.hc("formGroup",n.shipmentForm),g.zb(5),g.hc("ngIf",n.shipmentForm.controls.accountNumber.invalid),g.zb(4),g.hc("maxDate",n.maxDate)("readonlyInput",!0),g.zb(1),g.hc("ngIf",n.shipmentForm.controls.accountDate.invalid),g.zb(5),g.hc("ngIf",n.shipmentForm.controls.invoiceNumber.invalid),g.zb(4),g.hc("maxDate",n.maxDate)("readonlyInput",!0),g.zb(1),g.hc("ngIf",n.shipmentForm.controls.invoiceDate.invalid),g.zb(4),g.hc("maxDate",n.maxDate)("readonlyInput",!0),g.zb(1),g.hc("ngIf",n.shipmentForm.controls.dateShipment.invalid),g.zb(5),g.hc("ngIf",n.shipmentForm.controls.summ.invalid),g.zb(2),g.hc("disabled",n.shipmentForm.invalid)}}var at,st=function(){return{width:"650px"}},lt=((at=function(){function e(t,i,n,c,r){b(this,e),this.ref=t,this.fb=i,this.deliveryService=n,this.config=c,this.store=r,this.deliveries=[],this.maxDate=new Date,this.btnSubmitValue="\u0421\u043e\u0437\u0434\u0430\u0442\u044c",this.currentShipmentID=null,this.shipments=[],this.selectedShipments=[],this.subscription$=new S.a}return n(e,[{key:"ngOnInit",value:function(){this.initValues(),this.initializeForm()}},{key:"onSubmit",value:function(){}},{key:"deliveryChanged",value:function(e){console.log(this.requests.at(e).value)}},{key:"getRequestByIndx",value:function(e){var t=this.requests.at(e).value;return this.deliveries.find(function(e){return e.ID===t})}},{key:"addRequest",value:function(){this.requests.push(this.fb.control("")),this.shipments.push({formId:this.requests.controls.length-1,shipmnets:[]})}},{key:"openNew",value:function(e,t){if(this.currentRequestId=t,e){var i=this.selectedShipments[0];if(!i)return;this.currentShipmentID=i.ID,this.shipmentForm.patchValue({accountNumber:i.AccountNumber||"",accountDate:new Date(i.AccountDate),invoiceNumber:i.InvoiceNumber,invoiceDate:new Date(i.InvoiceDate),dateShipment:new Date(i.DateShipment),summ:i.Summ})}this.addDeliveryDialog=!0}},{key:"hideDialog",value:function(){this.addDeliveryDialog=!1}},{key:"deleteShipments",value:function(e){var t=this,i=this.shipments.find(function(t){return t.formId===e}).shipmnets;this.selectedShipments.forEach(function(e){t.shipments.splice(i.indexOf(e),1)}),this.selectedShipments=[]}},{key:"addShipment",value:function(){var e=this,t=this.shipments.find(function(t){return t.formId===e.currentRequestId}),i={AccountNumber:this.shipmentForm.value.accountNumber,AccountDate:this.shipmentForm.value.accountDate,InvoiceNumber:this.shipmentForm.value.invoiceNumber,InvoiceDate:this.shipmentForm.value.invoiceDate,WaybillNumber:null,WaybillDate:null,DateShipment:this.shipmentForm.value.dateShipment,DatePayment:null,SummToFactor:null,Summ:this.shipmentForm.value.summ,ID:Math.floor(100*Math.random())};if(this.currentShipmentID){i.ID=this.currentShipmentID;var n=t.shipmnets.indexOf(t.shipmnets.find(function(t){return t.ID===e.currentShipmentID}));t.shipmnets[n]=i,this.currentShipmentID=null}else t.shipmnets.push(i);this.shipmentForm.reset(),this.hideDialog()}},{key:"getShipmentsSum",value:function(e){var t,i=null===(t=this.shipments.find(function(t){return t.formId===e}))||void 0===t?void 0:t.shipmnets;if(i)return i.reduce(function(e,t){return e+t.Summ},0)}},{key:"initValues",value:function(){var e=this;this.subscription$.add(this.deliveryService.getDeliveriesWithStats().subscribe(function(t){e.deliveries=t}))}},{key:"initializeForm",value:function(){this.form=this.fb.group({requests:this.fb.array([this.fb.control("")])}),this.shipmentForm=this.fb.group({accountNumber:["",[R.x.required]],accountDate:["",[R.x.required]],invoiceNumber:["",[R.x.required]],invoiceDate:["",[R.x.required]],dateShipment:["",[R.x.required]],summ:[1,[R.x.required]]}),this.shipments.push({formId:0,shipmnets:[]})}},{key:"ngOnDestroy",value:function(){this.subscription$.unsubscribe()}},{key:"requests",get:function(){return this.form.get("requests")}}]),e}()).\u0275fac=function(e){return new(e||at)(g.Kb(H.d),g.Kb(R.d),g.Kb(I.a),g.Kb(H.b),g.Kb(p.h))},at.\u0275cmp=g.Eb({type:at,selectors:[["app-agency-request-create-dialog"]],decls:10,vars:9,consts:[[3,"formGroup","ngSubmit"],["formArrayName","requests"],[3,"header",4,"ngFor","ngForOf"],[1,"p-field","p-col-12","p-md-12"],["id","btn_submit","pButton","","pRipple","","type","button","label","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443",1,"btn-mib-submit","p-button-outlined",3,"click"],["id","btn_submit","pButton","","pRipple","","type","submit","label","\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",1,"btn-mib-submit"],["header","\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f","styleClass","p-fluid",3,"visible","modal","draggable","resizable","visibleChange"],["pTemplate","content"],[3,"header"],[1,"p-fluid","p-formgrid","p-grid","form"],[1,"p-field","p-col-12","p-md-6"],["for","deliveryID"],["id","delivery","placeholder","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438","optionLabel","Title","valueLabel","ID",3,"options","formControlName","onChange"],["for","date"],["id","date","type","text","pInputText","","placeholder","\u0414\u0430\u0442\u0430",3,"value","disabled"],[1,"card"],[1,"mib-toolbar"],["type","button","pButton","","pRipple","","label","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",1,"p-mr-2",3,"click"],["type","button","pButton","","pRipple","","label","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",1,"p-mr-2",3,"click"],["type","button","pButton","","pRipple","",1,"p-mr-2",3,"label","click"],["selectionMode","multiple",3,"rows","rowHover","value","selection","selectionChange"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[2,"width","3rem"],[1,"m-th"],[3,"value"],[1,"m-td"],[1,"m-td","currency"],["colspan","7",1,"p-text-right"],[1,"p-field"],["for","accountNumber"],["id","accountNumber","type","text","pInputText","","placeholder","\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f","formControlName","accountNumber"],[4,"ngIf"],["for","accountDate"],["id","accountDate","formControlName","accountDate","selectOtherMonths","true","placeholder","\u0414\u0430\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439",3,"maxDate","readonlyInput"],["for","invoiceNumber"],["id","invoiceNumber","type","text","pInputText","","placeholder","\u0421\u0447\u0435\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430","formControlName","invoiceNumber"],["for","invoiceDate"],["id","invoiceDate","formControlName","invoiceDate","selectOtherMonths","true","placeholder","\u0414\u0430\u0442\u0430 \u0441\u0447\u0435\u0442\u0430-\u0444",3,"maxDate","readonlyInput"],["for","dateShipment"],["id","dateShipment","selectOtherMonths","true","formControlName","dateShipment","placeholder","\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438",3,"maxDate","readonlyInput"],["for","summ"],["id","summ","type","number","pInputText","","placeholder","\u0421\u0443\u043c\u043c\u0430","formControlName","summ","min","1"],[1,"modal-actions"],["pButton","","pRipple","","label","\u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c","type","submit",1,"p-button-text","save",3,"disabled"],["pButton","","pRipple","","label","\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",1,"p-button-text","cancel"],["class","p-error",4,"ngIf"],[1,"p-error"]],template:function(e,t){1&e&&(g.Qb(0,"form",0),g.Xb("ngSubmit",function(){return t.onSubmit()}),g.Qb(1,"div",1),g.Qb(2,"p-accordion"),g.Fc(3,Ue,19,10,"p-accordionTab",2),g.Pb(),g.Qb(4,"div",3),g.Qb(5,"button",4),g.Xb("click",function(){return t.addRequest()}),g.Pb(),g.Pb(),g.Pb(),g.Qb(6,"div",3),g.Lb(7,"button",5),g.Pb(),g.Pb(),g.Qb(8,"p-dialog",6),g.Xb("visibleChange",function(e){return t.addDeliveryDialog=e}),g.Fc(9,ot,34,14,"ng-template",7),g.Pb()),2&e&&(g.hc("formGroup",t.form),g.zb(3),g.hc("ngForOf",t.requests.controls),g.zb(5),g.Dc(g.lc(8,st)),g.hc("visible",t.addDeliveryDialog)("modal",!0)("draggable",!1)("resizable",!1))},directives:[R.y,R.q,R.h,R.c,ce.a,w.m,C.b,ie.a,k.i,ce.c,ee.a,R.p,R.f,q.a,z.h,z.j,z.i,R.b,w.n,be.a,R.t],pipes:[w.f,w.d],styles:[".form[_ngcontent-%COMP%]{padding-top:10px}.p-fluid[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{height:45%}"]}),at),ut=c("tAQN"),dt=c("Gxio"),mt=c("5EWq"),pt=c("B16f"),ht=c("xlun");function vt(e,t){1&e&&(g.Qb(0,"tr"),g.Qb(1,"th"),g.Qb(2,"div",4),g.Hc(3,"ID"),g.Pb(),g.Pb(),g.Qb(4,"th"),g.Qb(5,"div",4),g.Hc(6,"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f"),g.Pb(),g.Pb(),g.Qb(7,"th"),g.Qb(8,"div",4),g.Hc(9,"\u0414\u0430\u0442\u0430"),g.Pb(),g.Pb(),g.Qb(10,"th"),g.Qb(11,"div",4),g.Hc(12,"\u0421\u0443\u043c\u043c\u0430"),g.Pb(),g.Pb(),g.Pb())}function ft(e,t){if(1&e&&(g.Qb(0,"tr"),g.Qb(1,"td"),g.Qb(2,"div",5),g.Qb(3,"div"),g.Hc(4),g.Pb(),g.Pb(),g.Pb(),g.Qb(5,"td"),g.Qb(6,"div",5),g.Qb(7,"div"),g.Hc(8),g.Pb(),g.Pb(),g.Pb(),g.Qb(9,"td"),g.Qb(10,"div",5),g.Qb(11,"div"),g.Hc(12),g.bc(13,"date"),g.Pb(),g.Pb(),g.Pb(),g.Qb(14,"td"),g.Qb(15,"div",6),g.Qb(16,"div"),g.Hc(17),g.bc(18,"currency"),g.Pb(),g.Pb(),g.Pb(),g.Pb()),2&e){var i=t.$implicit;g.zb(4),g.Jc(" ",i.ID," "),g.zb(4),g.Jc(" ",i.InvoiceNumber," "),g.zb(4),g.Jc(" ",g.dc(13,4,i.DateShipment,"dd.MM.yyyy")," "),g.zb(5),g.Jc(" ",g.ec(18,7,i.Summ,"RUB","symbol-narrow")," ")}}function Pt(e,t){1&e&&(g.Qb(0,"tr"),g.Qb(1,"td",7),g.Hc(2,"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0445, \u0434\u043b\u044f \u044d\u0442\u043e\u0439 \u0437\u0430\u044f\u0432\u043a\u0438 \u043d\u0435\u0442."),g.Pb(),g.Pb())}var Qt,gt=((Qt=function(){function e(){b(this,e)}return n(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Qt)},Qt.\u0275cmp=g.Eb({type:Qt,selectors:[["shipments-view"]],inputs:{shipments:"shipments"},decls:4,vars:1,consts:[[3,"value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"m-th"],[1,"m-td"],[1,"m-td","currency"],["colspan","4"]],template:function(e,t){1&e&&(g.Qb(0,"p-table",0),g.Fc(1,vt,13,0,"ng-template",1),g.Fc(2,ft,19,11,"ng-template",2),g.Fc(3,Pt,3,0,"ng-template",3),g.Pb()),2&e&&g.hc("value",t.shipments)},directives:[z.h,k.i],pipes:[w.f,w.d],encapsulation:2}),Qt);function yt(e,t){1&e&&(g.Qb(0,"tr"),g.Qb(1,"th"),g.Qb(2,"div",4),g.Hc(3,"ID"),g.Pb(),g.Pb(),g.Qb(4,"th"),g.Qb(5,"div",4),g.Hc(6,"\u041d\u043e\u043c\u0435\u0440"),g.Pb(),g.Pb(),g.Qb(7,"th"),g.Qb(8,"div",4),g.Hc(9,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),g.Pb(),g.Pb(),g.Qb(10,"th"),g.Qb(11,"div",4),g.Hc(12,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),g.Pb(),g.Pb(),g.Pb())}function Dt(e,t){if(1&e){var i=g.Rb();g.Qb(0,"tr",5),g.Xb("click",function(){g.yc(i);var e=t.$implicit;return g.ac().viewDocument(e)}),g.Qb(1,"td"),g.Qb(2,"div",6),g.Qb(3,"div"),g.Hc(4),g.Pb(),g.Pb(),g.Pb(),g.Qb(5,"td"),g.Qb(6,"div",6),g.Qb(7,"div"),g.Hc(8),g.Pb(),g.Pb(),g.Pb(),g.Qb(9,"td"),g.Qb(10,"div",7),g.Qb(11,"div"),g.Hc(12),g.Pb(),g.Pb(),g.Pb(),g.Qb(13,"td"),g.Qb(14,"div",6),g.Qb(15,"div"),g.Hc(16),g.Pb(),g.Pb(),g.Pb(),g.Pb()}if(2&e){var n=t.$implicit;g.zb(4),g.Jc(" ",n.DocumentID," "),g.zb(4),g.Jc(" ",n.Number," "),g.zb(2),g.ic("pTooltip",n.Description),g.zb(2),g.Jc(" ",n.Description," "),g.zb(4),g.Jc(" ",n.Title," ")}}function It(e,t){1&e&&(g.Qb(0,"tr"),g.Qb(1,"td",8),g.Hc(2,"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0434\u043b\u044f \u044d\u0442\u043e\u0439 \u0437\u0430\u044f\u0432\u043a\u0438 \u043d\u0435\u0442."),g.Pb(),g.Pb())}var St,Ft=((St=function(){function e(){b(this,e),this.documentView=new g.n}return n(e,[{key:"ngOnInit",value:function(){}},{key:"viewDocument",value:function(e){this.documentView.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||St)},St.\u0275cmp=g.Eb({type:St,selectors:[["documents-view"]],inputs:{documents:"documents"},outputs:{documentView:"documentView"},decls:4,vars:1,consts:[[3,"value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"m-th"],[1,"can-click",3,"click"],[1,"m-td"],["tooltipPosition","bottom",1,"m-td",3,"pTooltip"],["colspan","4"]],template:function(e,t){1&e&&(g.Qb(0,"p-table",0),g.Fc(1,yt,13,0,"ng-template",1),g.Fc(2,Dt,17,5,"ng-template",2),g.Fc(3,It,3,0,"ng-template",3),g.Pb()),2&e&&g.hc("value",t.documents)},directives:[z.h,k.i,ht.a],encapsulation:2}),St);function Ht(e,t){if(1&e){var i=g.Rb();g.Qb(0,"button",16,17),g.Xb("click",function(e){return g.yc(i),g.vc(3).toggle(e)}),g.Pb(),g.Lb(2,"p-tieredMenu",18,19),g.Qb(4,"button",20),g.Xb("click",function(){return g.yc(i),g.ac().refresh()}),g.Pb()}if(2&e){var n=g.ac();g.zb(2),g.hc("model",n.items)("popup",!0)}}function wt(e,t){1&e&&g.Lb(0,"div")}function zt(e,t){1&e&&(g.Qb(0,"tr"),g.Qb(1,"th",21),g.Lb(2,"p-tableHeaderCheckbox"),g.Pb(),g.Qb(3,"th",22),g.Qb(4,"div",23),g.Qb(5,"div"),g.Hc(6," ID "),g.Lb(7,"p-sortIcon",24),g.Pb(),g.Pb(),g.Pb(),g.Qb(8,"th"),g.Qb(9,"div",23),g.Qb(10,"div"),g.Hc(11,"\u0414\u043e\u0433\u043e\u0432\u043e\u0440"),g.Pb(),g.Pb(),g.Pb(),g.Qb(12,"th",25),g.Qb(13,"div",23),g.Qb(14,"div"),g.Hc(15,"\u041d\u043e\u043c\u0435\u0440 "),g.Lb(16,"p-sortIcon",26),g.Pb(),g.Pb(),g.Pb(),g.Qb(17,"th",27),g.Qb(18,"div",23),g.Qb(19,"div"),g.Hc(20,"\u0414\u0430\u0442\u0430 "),g.Lb(21,"p-sortIcon",28),g.Pb(),g.Pb(),g.Pb(),g.Qb(22,"th",29),g.Qb(23,"div",23),g.Qb(24,"div"),g.Hc(25,"\u0422\u0438\u043f "),g.Lb(26,"p-sortIcon",30),g.Pb(),g.Pb(),g.Pb(),g.Qb(27,"th",31),g.Qb(28,"div",23),g.Qb(29,"div"),g.Hc(30,"\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 "),g.Lb(31,"p-sortIcon",32),g.Pb(),g.Pb(),g.Pb(),g.Qb(32,"th"),g.Qb(33,"div",23),g.Qb(34,"div"),g.Hc(35,"\u041f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u044c"),g.Pb(),g.Pb(),g.Pb(),g.Qb(36,"th"),g.Qb(37,"div",23),g.Qb(38,"div"),g.Hc(39,"\u0421\u0443\u043c\u043c\u0430 \u0437\u0430\u044f\u0432\u043a\u0438"),g.Pb(),g.Pb(),g.Pb(),g.Pb())}function kt(e,t){1&e&&(g.Qb(0,"div"),g.Hc(1," \u0421 \u0444\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c "),g.Pb())}function Ct(e,t){1&e&&(g.Qb(0,"div"),g.Hc(1," \u0411\u0435\u0437 \u0444\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f "),g.Pb())}function xt(e,t){if(1&e){var i=g.Rb();g.Qb(0,"tr",33),g.Xb("click",function(){g.yc(i);var e=t.$implicit;return g.ac().selectRow(e)}),g.Qb(1,"td"),g.Lb(2,"p-tableCheckbox",34),g.Pb(),g.Qb(3,"td"),g.Qb(4,"div",35),g.Qb(5,"div"),g.Hc(6),g.Pb(),g.Pb(),g.Pb(),g.Qb(7,"td"),g.Qb(8,"div",36),g.Qb(9,"div"),g.Hc(10),g.Pb(),g.Pb(),g.Pb(),g.Qb(11,"td"),g.Qb(12,"div",35),g.Qb(13,"div"),g.Hc(14),g.Pb(),g.Pb(),g.Pb(),g.Qb(15,"td"),g.Qb(16,"div",35),g.Qb(17,"div"),g.Hc(18),g.bc(19,"date"),g.Pb(),g.Pb(),g.Pb(),g.Qb(20,"td"),g.Qb(21,"div",35),g.Qb(22,"div",37),g.Fc(23,kt,2,0,"div",38),g.Fc(24,Ct,2,0,"div",38),g.Pb(),g.Pb(),g.Pb(),g.Qb(25,"td"),g.Qb(26,"div",35),g.Qb(27,"div"),g.Hc(28),g.Pb(),g.Pb(),g.Pb(),g.Qb(29,"td"),g.Qb(30,"div",36),g.Qb(31,"div"),g.Hc(32),g.Pb(),g.Pb(),g.Pb(),g.Qb(33,"td"),g.Qb(34,"div",39),g.bc(35,"currency"),g.Qb(36,"div"),g.Hc(37),g.bc(38,"currency"),g.Pb(),g.Pb(),g.Pb(),g.Pb()}if(2&e){var n=t.$implicit;g.hc("pRowToggler",n),g.zb(2),g.hc("value",n),g.zb(4),g.Ic(n.ID),g.zb(2),g.ic("pTooltip",n.Delivery.Title),g.zb(2),g.Ic(n.Delivery.Title),g.zb(4),g.Jc(" ",n.Number,""),g.zb(4),g.Ic(g.dc(19,15,n.Date,"dd.MM.yyyy")),g.zb(4),g.hc("ngSwitch",n.Type),g.zb(1),g.hc("ngSwitchCase","Financing"),g.zb(1),g.hc("ngSwitchCase","NonFinancing"),g.zb(4),g.Ic(n.Status),g.zb(2),g.ic("pTooltip",n.Delivery.Debtor),g.zb(2),g.Ic(n.Delivery.Debtor),g.zb(2),g.ic("pTooltip",g.ec(35,18,n.Summ,"RUB","symbol-narrow")),g.zb(3),g.Ic(g.ec(38,22,n.Summ,"RUB","symbol-narrow"))}}function Rt(e,t){1&e&&(g.Ob(0),g.Qb(1,"tr"),g.Qb(2,"td",41),g.Hc(3,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445."),g.Pb(),g.Pb(),g.Nb())}function qt(e,t){1&e&&(g.Qb(0,"tr"),g.Lb(1,"td"),g.Qb(2,"td"),g.Qb(3,"div",35),g.Qb(4,"div"),g.Lb(5,"p-skeleton",42),g.Pb(),g.Pb(),g.Pb(),g.Qb(6,"td"),g.Qb(7,"div",35),g.Qb(8,"div"),g.Lb(9,"p-skeleton",42),g.Pb(),g.Pb(),g.Pb(),g.Qb(10,"td"),g.Qb(11,"div",35),g.Qb(12,"div"),g.Lb(13,"p-skeleton",42),g.Pb(),g.Pb(),g.Pb(),g.Qb(14,"td"),g.Qb(15,"div",35),g.Qb(16,"div"),g.Lb(17,"p-skeleton",42),g.Pb(),g.Pb(),g.Pb(),g.Qb(18,"td"),g.Qb(19,"div",35),g.Qb(20,"div"),g.Lb(21,"p-skeleton",42),g.Pb(),g.Pb(),g.Pb(),g.Qb(22,"td"),g.Qb(23,"div",35),g.Qb(24,"div"),g.Lb(25,"p-skeleton",42),g.Pb(),g.Pb(),g.Pb(),g.Qb(26,"td"),g.Qb(27,"div",35),g.Qb(28,"div"),g.Lb(29,"p-skeleton",42),g.Pb(),g.Pb(),g.Pb(),g.Qb(30,"td"),g.Qb(31,"div",35),g.Qb(32,"div"),g.Lb(33,"p-skeleton",42),g.Pb(),g.Pb(),g.Pb(),g.Pb())}var Nt=function(){return{}},Tt=function(e,t,i,n,b){return[e,t,i,n,b]};function Lt(e,t){1&e&&g.Fc(0,qt,34,0,"tr",4),2&e&&g.hc("ngForOf",g.qc(6,Tt,g.lc(1,Nt),g.lc(2,Nt),g.lc(3,Nt),g.lc(4,Nt),g.lc(5,Nt)))}function Ot(e,t){if(1&e&&(g.Fc(0,Rt,4,0,"ng-container",10),g.bc(1,"async"),g.Fc(2,Lt,1,12,"ng-template",null,40,g.Gc)),2&e){var i=g.vc(3),n=g.ac();g.hc("ngIf",g.cc(1,2,n.loading$))("ngIfElse",i)}}function Mt(e,t){1&e&&(g.Ob(0),g.Qb(1,"div",43),g.Hc(2," \u0414\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u041d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0445 \u0438 \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 - \u043d\u0430\u0436\u043c\u0438\u0442\u0435, \u043d\u0430 \u043b\u044e\u0431\u0443\u044e \u0437\u0430\u044f\u0432\u043a\u0443. "),g.Pb(),g.Nb())}function Et(e,t){if(1&e){var i=g.Rb();g.Qb(0,"p"),g.Hc(1,"ID \u0417\u0430\u044f\u0432\u043a\u0438: "),g.Qb(2,"strong"),g.Hc(3),g.Pb(),g.Pb(),g.Qb(4,"p-tabView"),g.Qb(5,"p-tabPanel",44),g.Lb(6,"shipments-view",45),g.Pb(),g.Qb(7,"p-tabPanel",46),g.Qb(8,"documents-view",47),g.Xb("documentView",function(e){return g.yc(i),g.ac().documentViewHandler(e)}),g.Pb(),g.Pb(),g.Pb()}if(2&e){var n=g.ac();g.zb(3),g.Jc(" ",n.selectedRequest.ID,""),g.zb(3),g.hc("shipments",n.selectedRequest.Shipments),g.zb(2),g.hc("documents",n.selectedRequest.Documents)}}function jt(e,t){1&e&&(g.Qb(0,"div",48),g.Qb(1,"label",49),g.Hc(2,"\u041f\u0438\u043d-\u043a\u043e\u0434: "),g.Pb(),g.Lb(3,"input",50),g.Pb())}function $t(e,t){1&e&&(g.Lb(0,"button",51),g.Lb(1,"button",52))}var At,Bt,Xt,Vt=function(){return[10,25,50]},Kt=function(){return{width:"450px"}},_t=((Bt=function e(){b(this,e)}).\u0275fac=function(e){return new(e||Bt)},Bt.\u0275dir=g.Fb({type:Bt,selectors:[["","tableHighlight",""]]}),Bt),Ut=((At=function(){function e(t,i,n,c,r){b(this,e),this.dialogService=t,this.fb=i,this.requestService=n,this.requestStoreService=c,this.fileService=r,this.items=[],this.confirmDialog=!1,this.documentViewDialog=!1,this.selectedItems=[],this.successRequestsDialogMessage=null,this.errorRequestsDialogMessage=null,this.subscription$=new S.a}return n(e,[{key:"ngOnInit",value:function(){this.initializeValues(),this.fetch()}},{key:"initializeValues",value:function(){var e=this;this.items=[{id:"create",label:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",command:function(){return e.showCreateRequestDialog()}},{id:"edit",label:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",command:function(){return e.showEditDialog()}},{id:"agency",label:"\u0410\u0433\u0435\u043d\u0442\u0441\u043a\u0430\u044f \u0437\u0430\u044f\u0432\u043a\u0430",command:function(){return e.showCreateAgencyRequestDialog()}},{id:"createFrom",label:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0437 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0439",routerLink:""},{id:"createCorrection",label:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043a\u043e\u0440\u0440\u0435\u043a\u0446\u0438\u044e",command:function(){return e.showCorrectionDialog()}},{id:"events",label:"\u0421\u043e\u0431\u044b\u0442\u0438\u044f",routerLink:""},{id:"documents",label:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b",routerLink:""},{id:"remove",label:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",routerLink:""},{id:"send",label:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",command:function(){return e.initSend()}}],this.confirmForm=this.fb.group({pin:["",[R.x.required]],confirmCode:[""]})}},{key:"selectRow",value:function(e){var t=this;this.subscription$.add(this.requestService.getRequestByIdAndParams(e.ID,!0,!0,!0).subscribe(function(e){t.selectedRequest=e,console.log("SELECTED ROW: ",t.selectedRequest)}))}},{key:"documentViewHandler",value:function(e){var t=this;console.log(e),this.subscription$.add(this.fileService.getFile(this.selectedRequest.ID,e.DocumentID).subscribe(function(e){t.documentViewDialog=!0}))}},{key:"refresh",value:function(){this.fetch(!0)}},{key:"fetch",value:function(e){this.requests$=this.requestStoreService.getRequests(e),this.loading$=this.requestStoreService.getLoading()}},{key:"showCreateAgencyRequestDialog",value:function(){this.ref=this.dialogService.open(lt,{header:"\u0417\u0430\u044f\u0432\u043a\u0430 \u043d\u0430 \u0430\u0433\u0435\u043d\u0442\u0441\u043a\u0438\u0439 \u0444\u0430\u043a\u0442\u043e\u0440\u0438\u043d\u0433",width:"85%",contentStyle:{height:"800px",overflow:"auto"},baseZIndex:1e4}),this.ref.onClose.subscribe(function(e){console.log("closed")})}},{key:"showCreateRequestDialog",value:function(){this.ref=this.dialogService.open(Xe,{header:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u044f\u0432\u043a\u0438",width:"85%",contentStyle:{height:"800px",overflow:"auto"},baseZIndex:1e4}),this.ref.onClose.subscribe(function(e){console.log("closed")})}},{key:"customSort",value:function(e){}},{key:"showCorrectionDialog",value:function(){this.ref=this.dialogService.open(U,{data:this.selectedItems,header:"\u0417\u0430\u044f\u0432\u043a\u0430 \u043d\u0430 \u043a\u043e\u0440\u0440\u0435\u043a\u0446\u0438\u044e",width:"85%",baseZIndex:1e4})}},{key:"showEditDialog",value:function(){var e=this,t=this.selectedItems[0];this.subscription$.add(this.requestService.getRequestByIdAndParams(t.ID,!0,!0,!0).subscribe(function(i){(t=i)&&(e.ref=e.dialogService.open(Xe,{header:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u044f\u0432\u043a\u0438",width:"70%",contentStyle:{height:"800px",overflow:"auto"},baseZIndex:1e4,data:t}),e.ref.onClose.subscribe(function(e){console.log("closed")}))}))}},{key:"initSend",value:function(){var e=this,t=this.selectedItems.map(function(e){return e.ID});this.subscription$.add(this.requestService.sendInit(t).subscribe(function(t){e.confirmForm.patchValue({confirmCode:t.ConfirmationCode}),e.confirmDialog=!0}))}},{key:"confirmSend",value:function(){var e=this;this.successRequestsDialogMessage=null,this.errorRequestsDialogMessage=null,this.subscription$.add(this.requestService.sendConfirm({ConfirmationCode:this.confirmForm.value.confirmCode,Pin:this.confirmForm.value.pin}).subscribe(function(t){e.confirmDialog=!1,e.successRequestsDialogMessage="\u0417\u0430\u044f\u0432\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0430"}))}},{key:"checkSelecteditems",value:function(){var e=this;this.items.forEach(function(t){"send"===t.id&&(t.disabled=e.checkSelectedItemIsCreate()),"remove"===t.id&&(t.disabled=e.checkSelectedItemIsCreate()),"edit"!==t.id?"edit"!==t.id||(t.disabled=e.checkSelectedItemIsCreate()):t.disabled=e.checkSelectedItemIsReadonly()})}},{key:"checkSelectedItemIsReadonly",value:function(){var e=this.selectedItems.filter(function(e){return!0===e.ReadOnly});return console.log(e),e.length>0}},{key:"checkSelectedItemIsCreate",value:function(){var e=this.selectedItems.filter(function(e){return"\u0421\u043e\u0437\u0434\u0430\u043d\u0430"!==e.Status});return console.log(e),e.length>0}},{key:"ngOnDestroy",value:function(){this.subscription$.unsubscribe(),this.ref&&this.ref.close()}}]),e}()).\u0275fac=function(e){return new(e||At)(g.Kb(H.a),g.Kb(R.d),g.Kb(y.a),g.Kb(ut.a),g.Kb(Z.a))},At.\u0275cmp=g.Eb({type:At,selectors:[["app-requests-page"]],viewQuery:function(e,t){var i;1&e&&g.Nc(_t,!0),2&e&&g.uc(i=g.Yb())&&(t.tableHighlight=i)},decls:20,vars:24,consts:[["id","step1",1,"card-content"],["styleClass","p-mb-4"],["pTemplate","left"],[1,"responsive-table"],[4,"ngFor","ngForOf"],["selectionMode","multiple","dataKey","ID","styleClass","p-datatable-customers mib-table","tableHighlight","","currentPageReportTemplate","\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u043e: \u043e\u0442 {first} \u0434\u043e {last} \u0438\u0437 {totalRecords}",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","selection","paginator","metaKeySelection","customSort","selectionChange","onRowSelect","sortFunction"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"card-content","card-content__tabs"],[4,"ngIf","ngIfElse"],["selectedRequestTemplate",""],[3,"formGroup","ngSubmit"],["header","\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435","styleClass","p-fluid",3,"visible","modal","draggable","resizable","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["type","button","pButton","","label","\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435","icon","pi pi-angle-down","id","step2",1,"basic",3,"click"],["btn",""],[3,"model","popup"],["menu",""],["type","button","pButton","","label","\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435",1,"basic","p-mr-2",3,"click"],[2,"width","3rem"],["pSortableColumn","ID"],[1,"m-th"],["field","ID"],["pSortableColumn","Number"],["field","Number"],["pSortableColumn","Date"],["field","Date"],["pSortableColumn","Type"],["field","Type"],["pSortableColumn","Status"],["field","Status"],[1,"can-click",3,"pRowToggler","click"],[3,"value"],[1,"m-td"],["tooltipPosition","bottom",1,"m-td",3,"pTooltip"],[3,"ngSwitch"],[4,"ngSwitchCase"],["tooltipPosition","bottom",1,"m-td","currency",3,"pTooltip"],["skeletonRequestsTemplate",""],["colspan","8"],["width","10rem"],[1,"card-content__text-center"],["header","\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0435"],[3,"shipments"],["header","\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b"],[3,"documents","documentView"],[1,"p-field"],["for","pin"],["id","pin","type","text","pInputText","","placeholder","\u041f\u0438\u043d-\u043a\u043e\u0434","formControlName","pin"],["pButton","","pRipple","","label","\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c","icon","pi pi-times",1,"p-button-text"],["pButton","","pRipple","","label","\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c","icon","pi pi-check","type","submit",1,"p-button-text"]],template:function(e,t){if(1&e&&(g.Lb(0,"p-toast"),g.Qb(1,"div",0),g.Qb(2,"p-toolbar",1),g.Fc(3,Ht,5,2,"ng-template",2),g.Pb(),g.Qb(4,"div",3),g.Fc(5,wt,1,0,"div",4),g.bc(6,"async"),g.Qb(7,"p-table",5),g.Xb("selectionChange",function(e){return t.selectedItems=e})("onRowSelect",function(){return t.checkSelecteditems()})("sortFunction",function(e){return t.customSort(e)}),g.bc(8,"async"),g.Fc(9,zt,40,0,"ng-template",6),g.Fc(10,xt,39,26,"ng-template",7),g.Fc(11,Ot,4,4,"ng-template",8),g.Pb(),g.Pb(),g.Pb(),g.Qb(12,"div",9),g.Fc(13,Mt,3,0,"ng-container",10),g.Fc(14,Et,9,3,"ng-template",null,11,g.Gc),g.Pb(),g.Qb(16,"form",12),g.Xb("ngSubmit",function(){return t.confirmSend()}),g.Qb(17,"p-dialog",13),g.Xb("visibleChange",function(e){return t.confirmDialog=e}),g.Fc(18,jt,4,0,"ng-template",14),g.Fc(19,$t,2,0,"ng-template",15),g.Pb(),g.Pb()),2&e){var i=g.vc(15);g.zb(5),g.hc("ngForOf",g.cc(6,18,t.requests$)),g.zb(2),g.hc("value",g.cc(8,20,t.requests$))("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",g.lc(22,Vt))("selection",t.selectedItems)("paginator",!0)("metaKeySelection",!0)("customSort",!0),g.zb(6),g.hc("ngIf",!t.selectedRequest)("ngIfElse",i),g.zb(3),g.hc("formGroup",t.confirmForm),g.zb(1),g.Dc(g.lc(23,Kt)),g.hc("visible",t.confirmDialog)("modal",!0)("draggable",!1)("resizable",!1)}},directives:[dt.a,mt.a,k.i,w.m,z.h,w.n,R.y,R.q,R.h,ie.a,C.b,pt.a,z.j,z.g,z.f,z.d,z.i,ht.a,w.p,w.q,N.a,te.b,te.a,gt,Ft,R.b,q.a,R.p,R.f],pipes:[w.b,w.f,w.d],styles:[""]}),At),Jt=c("tyNb"),Gt=[{path:"",children:[{path:"",component:Ut}]}],Wt=((Xt=function e(){b(this,e)}).\u0275mod=g.Ib({type:Xt}),Xt.\u0275inj=g.Hb({factory:function(e){return new(e||Xt)},imports:[[Jt.j.forChild(Gt)],Jt.j]}),Xt),Zt=c("QIUk"),Yt=c("lVkt"),ei=c("+DzE"),ti=c("+la4"),ii=c("Ji6n"),ni=c("LuMj"),bi=c("zFJ7"),ci=c("b1Ni"),ri=c("+F6F"),oi=c("99NH"),ai={data:null,isLoading:!1,error:null,crudError:null,crudSuccessMessage:null,isSubmitting:!1},si=Object(p.p)(ai,Object(p.r)(v,function(e){return Object.assign(Object.assign({},e),{isSubmitting:!0,crudSuccessMessage:null,crudError:null})}),Object(p.r)(f,function(e,t){return Object.assign(Object.assign({},e),{isSubmitting:!1,crudSuccessMessage:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e"})}),Object(p.r)(P,function(e,t){return Object.assign(Object.assign({},e),{isSubmitting:!1,crudSuccessMessage:null,crudError:t.errors})}),Object(p.r)(Q,function(e,t){return Object.assign(Object.assign({},e),{crudError:t.errors})}),Object(p.r)(oi.b,function(){return ai}));function li(e,t){return si(e,t)}var ui,di=c("NCSE"),mi=((ui=function e(){b(this,e)}).\u0275mod=g.Ib({type:ui}),ui.\u0275inj=g.Hb({factory:function(e){return new(e||ui)},providers:[H.a,I.a,y.a,Z.a,k.g,Y.a],imports:[[w.c,q.b,dt.b,te.c,ii.b,C.c,ni.a,pt.b,H.c,bi.b,ie.b,be.b,di.a,N.b,ti.a,ce.b,z.k,ee.b,ht.b,R.j,ei.b,mt.b,Yt.b,s.b.forFeature([D]),p.j.forFeature("requests",li),o.a,a.a,Wt,R.v,Zt.b,ci.a,ri.a]]}),ui)}}])}();