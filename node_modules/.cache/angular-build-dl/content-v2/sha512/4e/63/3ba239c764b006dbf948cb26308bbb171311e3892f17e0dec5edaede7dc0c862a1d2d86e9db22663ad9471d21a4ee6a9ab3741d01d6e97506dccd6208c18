(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{fQQq:function(t,e,i){"use strict";i.r(e),i.d(e,"DelaysModule",function(){return j});var n=i("tyNb"),b=i("ofXK"),a=i("3Pt+"),r=i("quSY"),s=i("fXoL"),o=i("TMEm");const l=[[["",8,"mib-action"]]],c=[".mib-action"];let d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Eb({type:t,selectors:[["header-page"]],inputs:{title:"title",description:"description"},ngContentSelectors:c,decls:8,vars:2,consts:[[1,"header","lg"],[1,"title"],[1,"subheader"],[1,"actions"]],template:function(t,e){1&t&&(s.gc(l),s.Qb(0,"div",0),s.Qb(1,"div",1),s.Qb(2,"h2"),s.Hc(3),s.Pb(),s.Qb(4,"div",2),s.Hc(5),s.Pb(),s.Pb(),s.Qb(6,"div",3),s.fc(7),s.Pb(),s.Pb()),2&t&&(s.zb(3),s.Ic(e.title),s.zb(2),s.Ic(e.description))},encapsulation:2}),t})();var p=i("rEr+"),m=i("7zfz"),u=i("/RsI"),y=i("7kUa"),v=i("jIHw");function h(t,e){1&t&&(s.Qb(0,"tr"),s.Qb(1,"th"),s.Qb(2,"div",11),s.Qb(3,"div"),s.Hc(4,"\u041f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u044c"),s.Pb(),s.Pb(),s.Pb(),s.Qb(5,"th"),s.Qb(6,"div",11),s.Qb(7,"div"),s.Hc(8,"\u0414\u043e\u0433\u043e\u0432\u043e\u0440 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438"),s.Pb(),s.Pb(),s.Pb(),s.Qb(9,"th"),s.Qb(10,"div",11),s.Qb(11,"div"),s.Hc(12,"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f"),s.Pb(),s.Pb(),s.Pb(),s.Qb(13,"th"),s.Qb(14,"div",11),s.Qb(15,"div"),s.Hc(16,"\u0421\u0443\u043c\u043c\u0430 \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438"),s.Pb(),s.Pb(),s.Pb(),s.Qb(17,"th"),s.Qb(18,"div",11),s.Qb(19,"div"),s.Hc(20," \u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0441\u0440\u043e\u0447\u043a\u0438"),s.Pb(),s.Pb(),s.Pb(),s.Qb(21,"th"),s.Qb(22,"div",11),s.Qb(23,"div"),s.Hc(24,"\u0414\u0430\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439"),s.Pb(),s.Pb(),s.Pb(),s.Qb(25,"th"),s.Qb(26,"div",11),s.Qb(27,"div"),s.Hc(28,"\u0414\u0430\u0442\u0430 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"),s.Pb(),s.Pb(),s.Pb(),s.Qb(29,"th"),s.Qb(30,"div",11),s.Qb(31,"div"),s.Hc(32," \u0414\u0430\u0442\u0430 \u0434\u043e\u043f"),s.Pb(),s.Pb(),s.Pb(),s.Pb())}function P(t,e){if(1&t&&(s.Qb(0,"tr"),s.Qb(1,"td"),s.Qb(2,"div",12),s.Qb(3,"div"),s.Hc(4),s.Pb(),s.Pb(),s.Pb(),s.Qb(5,"td"),s.Qb(6,"div",12),s.Qb(7,"div"),s.Hc(8),s.Pb(),s.Pb(),s.Pb(),s.Qb(9,"td"),s.Qb(10,"div",12),s.Qb(11,"div"),s.Hc(12),s.Pb(),s.Pb(),s.Pb(),s.Qb(13,"td"),s.Qb(14,"div",13),s.Qb(15,"div"),s.Hc(16),s.bc(17,"currency"),s.Pb(),s.Pb(),s.Pb(),s.Qb(18,"td"),s.Qb(19,"div",13),s.Qb(20,"div"),s.Hc(21),s.bc(22,"currency"),s.Pb(),s.Pb(),s.Pb(),s.Qb(23,"td"),s.Qb(24,"div",12),s.Qb(25,"div"),s.Hc(26),s.bc(27,"date"),s.Pb(),s.Pb(),s.Pb(),s.Qb(28,"td"),s.Qb(29,"div",14),s.Qb(30,"div"),s.Hc(31),s.bc(32,"date"),s.Pb(),s.Pb(),s.Pb(),s.Qb(33,"td"),s.Qb(34,"div",15),s.Qb(35,"div"),s.Hc(36),s.bc(37,"date"),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&t){const t=e.$implicit,i=s.ac();s.zb(4),s.Jc(" ",t.DebtorTitle," "),s.zb(4),s.Jc("",t.ContractDeliveryNumber," "),s.zb(4),s.Jc(" ",t.ShipmentFullTitle,""),s.zb(4),s.Ic(s.ec(17,9,t.ShipmentSumm,"RUB","symbol-narrow")),s.zb(5),s.Ic(s.ec(22,13,t.DutyDebtor,"RUB","symbol-narrow")),s.zb(5),s.Ic(s.dc(27,17,t.DateShipment,"dd.MM.yyyy")),s.zb(5),s.Jc(" ",s.dc(32,20,t.DatePayment,"dd.MM.yyyy"),""),s.zb(3),s.hc("ngClass",i.checkDateAddon(t.DateAddon)?"red":""),s.zb(2),s.Ic(s.dc(37,23,t.DateAddon,"dd.MM.yyyy"))}}function g(t,e){1&t&&(s.Qb(0,"tr"),s.Qb(1,"td",16),s.Hc(2,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445."),s.Pb(),s.Pb())}function f(t,e){if(1&t){const t=s.Rb();s.Qb(0,"form",17),s.Xb("ngSubmit",function(){return s.yc(t),s.ac().updateDelays()}),s.Qb(1,"div",18),s.Qb(2,"label",19),s.Hc(3,"\u0414\u0430\u0442\u0430 \u043f\u043e: "),s.Pb(),s.Lb(4,"input",20),s.Pb(),s.Qb(5,"div",21),s.Lb(6,"button",22),s.Qb(7,"button",23),s.Xb("click",function(){return s.yc(t),s.ac().closeDateModal()}),s.Pb(),s.Pb(),s.Pb()}if(2&t){const t=s.ac();s.hc("formGroup",t.filterForm)}}const Q=function(){return[10,25,50]},D=function(){return{width:"450px"}},T=[{path:"",children:[{path:"",component:(()=>{class t{constructor(t,e,i){this.fb=t,this.datepipe=e,this.reportService=i,this.reportData=[],this.columns=[],this._subscription$=new r.a,this.filterDialog=!1}ngOnInit(){this._initializeForm(),this._initValues(),this._fetch()}exportExcel(){i.e(5).then(i.t.bind(null,"EUZL",7)).then(t=>{let e=[];this.reportData.forEach(t=>{let i={};this.columns.forEach(e=>{i[e.title]=t[e.name]}),e.push(i)});const i=t.utils.json_to_sheet(e),n=t.write({Sheets:{data:i},SheetNames:["data"]},{bookType:"xlsx",type:"array"});this._saveAsExcelFile(n,"\u043e\u0442\u0447\u0435\u0442")})}updateDelays(){this._fetch()}openDateModal(){this.filterDialog=!0}closeDateModal(){this.filterDialog=!1}checkDateAddon(t){return new Date(t)<new Date(this.filterForm.value.dateTo)}_fetch(){const t={Type:"DebtorDelay",Title:"\u041f\u0440\u043e\u0441\u0440\u043e\u0447\u043a\u0438 \u043f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u044f",Export:"JSON",CustomerID:0,Date:new Date(this.filterForm.value.dateTo),DebtorID:0,Delay:1};this._subscription$.add(this.reportService.getReport(t).subscribe(t=>{this.reportData=t,this.reportData.sort((t,e)=>new Date(t.DatePayment).getTime()-new Date(e.DatePayment).getTime()),this.closeDateModal(),this.isLoading=!1}))}_saveAsExcelFile(t,e){i.e(7).then(i.t.bind(null,"Iab2",7)).then(i=>{const n=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});i.saveAs(n,e+"_export_"+(new Date).getTime()+".xlsx")})}_initValues(){this.columns=[{name:"ShipmentID",title:"ID \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438",type:"string",visible:!0},{name:"CustomerTitle",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430",type:"string",visible:!0},{name:"DebtorTitle",title:"\u041f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u044c",type:"string",visible:!0},{name:"ContractDeliveryNumber",title:"\u0414\u043e\u0433\u043e\u0432\u043e\u0440 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438",type:"string",visible:!0},{name:"RequestDate",title:"\u0414\u0430\u0442\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430",type:"string",visible:!0},{name:"RequestNumber",title:"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043f\u0440\u043e\u0441\u0430",type:"string",visible:!0},{name:"ShipmentFullTitle",title:"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f",type:"string",visible:!0},{name:"StatusTitle",title:"\u0421\u0442\u0430\u0442\u0443\u0441",type:"string",visible:!0},{name:"CurrencyTitle",title:"\u0412\u0430\u043b\u044e\u0442\u0430",type:"string",visible:!0},{name:"ShipmentSumm",title:"\u0421\u0443\u043c\u043c\u0430 \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438",type:"string",visible:!0},{name:"DutyDebtor",title:"\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0441\u0440\u043e\u0447\u043a\u0438",type:"string",visible:!0},{name:"DutyCustomer",title:"\u0421\u0443\u043c\u043c\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0430",type:"string",visible:!0},{name:"DutyCommission",title:"\u0421\u0443\u043c\u043c\u0430 \u043a\u043e\u043c\u0438\u0441\u0441\u0438\u0438",type:"string",visible:!0},{name:"DateShipment",title:"\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438",type:"string",visible:!0},{name:"DatePayment",title:"\u0414\u0430\u0442\u0430 \u043e\u043f\u043b\u0430\u0442\u044b",type:"string",visible:!0},{name:"DateOpen",title:"\u0414\u0430\u0442\u0430 \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u044f",type:"string",visible:!0},{name:"DatePayed",title:"\u0414\u0430\u0442\u0430 \u043e\u043f\u043b\u0430\u0447\u0435\u043d\u043e",type:"string",visible:!0},{name:"DateAddon",title:"\u0414\u0430\u0442\u0430 \u0434\u043e\u043f",type:"string",visible:!0},{name:"RateStandart",title:"Rate Standart",type:"string",visible:!0},{name:"RateExtra",title:"Rate Extra",type:"string",visible:!0},{name:"CommissionPercent",title:"Commission Percent",type:"string",visible:!0},{name:"PenyPercent",title:"Peny Percent",type:"string",visible:!0},{name:"CommissionBottomBorder",title:"Commission Bottom Border",type:"string",visible:!0},{name:"CommissionTopBorder",title:"Commission Top Border",type:"string",visible:!0},{name:"RegionTitle",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0440\u0435\u0433\u0438\u043e\u043d\u0430",type:"string",visible:!0},{name:"ProductCodeTitle",title:"Product Code Title",type:"string",visible:!0}]}_initializeForm(){let t=new Date;this.filterForm=this.fb.group({dateTo:[this.datepipe.transform(t,"yyyy-MM-dd"),[a.x.required]]})}ngOnDestroy(){this._subscription$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Kb(a.d),s.Kb(b.f),s.Kb(o.a))},t.\u0275cmp=s.Eb({type:t,selectors:[["app-delays-page"]],features:[s.yb([b.f])],decls:13,vars:20,consts:[["id","step1",1,"card-content"],[3,"title"],[1,"mib-action","button-content","p-mr-2",3,"click"],["pTooltip","\u042d\u043a\u0441\u043f\u043e\u0440\u0442 \u0444\u0430\u0439\u043b\u0430 Excel",1,"mib-action","mib-button-icon","excel-icon","can-click",3,"click"],["src","../../../../../../assets/icons/mib-excel.png","alt",""],["styleClass","p-datatable-customers mib-table","currentPageReportTemplate","\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u043e: \u043e\u0442 {first} \u0434\u043e {last} \u0438\u0437 {totalRecords}",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","loading","paginator","metaKeySelection"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["header","\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0435\u0440\u0438\u043e\u0434","styleClass","p-fluid",3,"visible","draggable","resizable","modal","visibleChange"],["pTemplate","content"],[1,"m-th"],[1,"m-td"],[1,"m-td","currency"],[1,"m-td","red"],[1,"m-td",3,"ngClass"],["colspan","8"],[3,"formGroup","ngSubmit"],[1,"p-field"],["for","dateTo"],["id","dateTo","type","date","pInputText","","placeholder","\u0414\u0430\u0442\u0430 \u043f\u043e","formControlName","dateTo"],[1,"modal-actions"],["pButton","","pRipple","","label","\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c","type","submit",1,"p-button-text","save"],["pButton","","pRipple","","label","\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c","type","button",1,"p-button-text","cancel",3,"click"]],template:function(t,e){1&t&&(s.Qb(0,"div",0),s.Qb(1,"header-page",1),s.Qb(2,"div",2),s.Xb("click",function(){return e.openDateModal()}),s.Hc(3),s.bc(4,"date"),s.Pb(),s.Qb(5,"div",3),s.Xb("click",function(){return e.exportExcel()}),s.Lb(6,"img",4),s.Pb(),s.Pb(),s.Qb(7,"p-table",5),s.Fc(8,h,33,0,"ng-template",6),s.Fc(9,P,38,26,"ng-template",7),s.Fc(10,g,3,0,"ng-template",8),s.Pb(),s.Pb(),s.Qb(11,"p-dialog",9),s.Xb("visibleChange",function(t){return e.filterDialog=t}),s.Fc(12,f,8,1,"ng-template",10),s.Pb()),2&t&&(s.zb(1),s.hc("title","\u041f\u0440\u043e\u0441\u0440\u043e\u0447\u043a\u0438 \u043f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u044f"),s.zb(2),s.Jc(" ",s.dc(4,15,e.filterForm.value.dateTo,"dd.MM.yyyy")," "),s.zb(4),s.hc("value",e.reportData)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",s.lc(18,Q))("loading",e.isLoading)("paginator",!0)("metaKeySelection",!0),s.zb(4),s.Dc(s.lc(19,D)),s.hc("visible",e.filterDialog)("draggable",!1)("resizable",!1)("modal",!0))},directives:[d,p.h,m.i,u.a,b.l,a.y,a.q,a.h,a.b,y.a,a.p,a.f,v.b],pipes:[b.f,b.d],styles:[""]}),t})()}]}];let w=(()=>{class t{}return t.\u0275mod=s.Ib({type:t}),t.\u0275inj=s.Hb({factory:function(e){return new(e||t)},imports:[[n.j.forChild(T)],n.j]}),t})();var C=i("arFO"),H=i("QIUk"),z=i("lVkt"),x=i("+DzE"),S=i("+la4"),F=i("Ji6n"),I=i("LuMj"),k=i("zFJ7"),M=i("b1Ni"),R=i("+F6F"),E=i("tk/3");let _=(()=>{class t{constructor(t){this.http=t}}return t.\u0275fac=function(e){return new(e||t)(s.Ub(E.b))},t.\u0275prov=s.Gb({token:t,factory:t.\u0275fac}),t})(),B=(()=>{class t{}return t.\u0275mod=s.Ib({type:t}),t.\u0275inj=s.Hb({factory:function(e){return new(e||t)}}),t})();var J=i("J7/z");let j=(()=>{class t{}return t.\u0275mod=s.Ib({type:t}),t.\u0275inj=s.Hb({factory:function(e){return new(e||t)},providers:[J.a,_,o.a],imports:[[b.c,y.b,F.b,v.c,I.a,k.b,S.a,p.k,C.b,u.b,a.j,x.b,z.b,a.v,H.b,M.a,R.a,w,B]]}),t})()}}]);