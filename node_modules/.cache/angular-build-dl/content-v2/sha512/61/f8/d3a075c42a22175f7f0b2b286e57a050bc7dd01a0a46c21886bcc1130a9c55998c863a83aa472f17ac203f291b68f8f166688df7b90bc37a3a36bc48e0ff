(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{DWHD:function(e,t,i){"use strict";i.r(t),i.d(t,"RequestModule",function(){return ei});var b=i("i4ku"),n=i("KWQS"),c=i("9jGm"),s=i("eIep"),o=i("lJxs"),r=i("JIr8"),a=i("LRne"),l=i("l7P3"),d=function(e){return e.ADD_REQUEST="[Requests] Add request",e.ADD_REQUEST_SUCCESS="[Requests] Add request success",e.ADD_REQUEST_FAILURE="[Requests] Add request failure",e.SET_ERROR="[Requests] Set error",e}({});const u=Object(l.n)(d.ADD_REQUEST,Object(l.s)()),m=Object(l.n)(d.ADD_REQUEST_SUCCESS,Object(l.s)()),p=Object(l.n)(d.ADD_REQUEST_FAILURE,Object(l.s)()),h=Object(l.n)(d.SET_ERROR,Object(l.s)());var P=i("fXoL"),v=i("eUBX");let Q=(()=>{class e{constructor(e,t,i){this.actions$=e,this.store=t,this.requestsService=i,this.add$=Object(c.c)(()=>this.actions$.pipe(Object(c.d)(u),Object(s.a)(({request:e})=>this.requestsService.add(e).pipe(Object(o.a)(e=>m({response:e})),Object(r.a)(e=>Object(a.a)(p({errors:e.error})))))))}}return e.\u0275fac=function(t){return new(t||e)(P.Ub(c.a),P.Ub(l.h),P.Ub(v.a))},e.\u0275prov=P.Gb({token:e,factory:e.\u0275fac}),e})();var f=i("0s3d"),g=i("quSY"),D=function(e){return e.NonFinancing="NonFinancing",e.Financing="Financing",e.Correction="Correction",e}({}),I=i("J7/z"),y=i("ofXK"),S=i("rEr+"),F=i("7zfz"),H=i("jIHw"),w=i("qZOx"),z=i("3Pt+"),C=i("7kUa"),x=i("jeV5");function R(e,t){if(1&e&&P.Lb(0,"metib-success-messages",10),2&e){const e=P.ac();P.hc("message",e.successMessage)}}function q(e,t){1&e&&(P.Qb(0,"tr"),P.Qb(1,"th"),P.Qb(2,"div",11),P.Qb(3,"div"),P.Hc(4,"\u0421\u0447\u0451\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430"),P.Pb(),P.Pb(),P.Pb(),P.Qb(5,"th"),P.Qb(6,"div",11),P.Qb(7,"div"),P.Hc(8,"\u0421\u0447. \u0444\u0430\u043a\u0442\u0443\u0440 \u0434\u0430\u0442\u0430"),P.Pb(),P.Pb(),P.Pb(),P.Qb(9,"th"),P.Qb(10,"div",11),P.Qb(11,"div"),P.Hc(12,"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f"),P.Pb(),P.Pb(),P.Pb(),P.Qb(13,"th"),P.Qb(14,"div",11),P.Qb(15,"div"),P.Hc(16,"\u0414\u0430\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439"),P.Pb(),P.Pb(),P.Pb(),P.Qb(17,"th"),P.Qb(18,"div",11),P.Qb(19,"div"),P.Hc(20,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438"),P.Pb(),P.Pb(),P.Pb(),P.Qb(21,"th"),P.Qb(22,"div",11),P.Qb(23,"div"),P.Hc(24,"\u0421\u0443\u043c\u043c\u0430"),P.Pb(),P.Pb(),P.Pb(),P.Qb(25,"th"),P.Qb(26,"div",11),P.Qb(27,"div"),P.Hc(28,"\u0421\u0443\u043c\u043c\u0430(\u0418\u0441\u0445.)"),P.Pb(),P.Pb(),P.Pb(),P.Pb())}function N(e,t){if(1&e){const e=P.Rb();P.Qb(0,"input",21),P.Xb("ngModelChange",function(t){return P.yc(e),P.ac().$implicit.Summ=t})("ngModelChange",function(){P.yc(e);const t=P.ac().$implicit;return P.ac().setChangedShipment(t,t.Summ)}),P.Pb()}if(2&e){const e=P.ac().$implicit;P.hc("ngModel",e.Summ)("min",e.SummToFactor)}}function T(e,t){if(1&e&&(P.Lb(0,"div"),P.Hc(1),P.bc(2,"currency")),2&e){const e=P.ac().$implicit;P.zb(1),P.Jc(" ",P.ec(2,1,e.Summ,"RUB","symbol-narrow")," ")}}function L(e,t){if(1&e&&(P.Qb(0,"tr",12),P.Qb(1,"td"),P.Qb(2,"div",13),P.Qb(3,"div"),P.Hc(4),P.Pb(),P.Pb(),P.Pb(),P.Qb(5,"td"),P.Qb(6,"div",13),P.Qb(7,"div"),P.Hc(8),P.bc(9,"date"),P.Pb(),P.Pb(),P.Pb(),P.Qb(10,"td"),P.Qb(11,"div",13),P.Qb(12,"div"),P.Hc(13),P.Pb(),P.Pb(),P.Pb(),P.Qb(14,"td"),P.Qb(15,"div",13),P.Qb(16,"div"),P.Hc(17),P.bc(18,"date"),P.Pb(),P.Pb(),P.Pb(),P.Qb(19,"td"),P.Qb(20,"div",13),P.Qb(21,"div"),P.Hc(22),P.bc(23,"date"),P.Pb(),P.Pb(),P.Pb(),P.Qb(24,"td",14),P.Qb(25,"div",15),P.Qb(26,"div"),P.Qb(27,"p-cellEditor"),P.Fc(28,N,1,2,"ng-template",16),P.Fc(29,T,3,5,"ng-template",17),P.Pb(),P.Pb(),P.Qb(30,"div",18),P.Lb(31,"img",19),P.Pb(),P.Pb(),P.Pb(),P.Qb(32,"td"),P.Qb(33,"div",20),P.Qb(34,"div"),P.Hc(35),P.bc(36,"currency"),P.Pb(),P.Pb(),P.Pb(),P.Pb()),2&e){const e=t.$implicit;P.hc("pSelectableRow",e),P.zb(4),P.Ic(e.ID),P.zb(4),P.Ic(P.dc(9,7,e.AccountDate,"dd.MM.yyyy")),P.zb(5),P.Ic(e.InvoiceNumber),P.zb(4),P.Ic(P.dc(18,10,e.InvoiceDate,"dd.MM.yyyy")),P.zb(5),P.Ic(P.dc(23,13,e.DateShipment,"dd.MM.yyyy")),P.zb(13),P.Jc(" ",P.ec(36,16,e.SummToFactor,"RUB","symbol-narrow")," ")}}function k(e,t){if(1&e&&(P.Qb(0,"tr"),P.Lb(1,"td",22),P.Qb(2,"td",23),P.Hc(3),P.bc(4,"currency"),P.Pb(),P.Lb(5,"td",24),P.Pb()),2&e){const e=P.ac();P.zb(3),P.Jc(" ",P.ec(4,1,e.sumCurrentPage,"RUB","symbol-narrow")," ")}}function O(e,t){1&e&&(P.Ob(0),P.Qb(1,"tr"),P.Qb(2,"td",27),P.Hc(3,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445."),P.Pb(),P.Pb(),P.Nb())}function M(e,t){1&e&&(P.Qb(0,"tr"),P.Lb(1,"td"),P.Qb(2,"td"),P.Qb(3,"div",13),P.Lb(4,"p-skeleton"),P.Pb(),P.Pb(),P.Qb(5,"td"),P.Qb(6,"div",13),P.Lb(7,"p-skeleton"),P.Pb(),P.Pb(),P.Qb(8,"td"),P.Qb(9,"div",13),P.Lb(10,"p-skeleton"),P.Pb(),P.Pb(),P.Qb(11,"td"),P.Qb(12,"div",13),P.Lb(13,"p-skeleton"),P.Pb(),P.Pb(),P.Pb())}const E=function(){return{}},j=function(e,t,i,b,n){return[e,t,i,b,n]};function $(e,t){1&e&&P.Fc(0,M,14,0,"tr",28),2&e&&P.hc("ngForOf",P.qc(6,j,P.lc(1,E),P.lc(2,E),P.lc(3,E),P.lc(4,E),P.lc(5,E)))}function A(e,t){if(1&e&&(P.Fc(0,O,4,0,"ng-container",25),P.Fc(1,$,1,12,"ng-template",null,26,P.Gc)),2&e){const e=P.vc(2),t=P.ac();P.hc("ngIf",t.shipments)("ngIfElse",e)}}let B=(()=>{class e{constructor(e,t,i,b){this.ref=e,this.service=t,this.config=i,this.store=b,this.shipments=[],this.changedShipments=[],this.sumCurrentPage=0,this.successMessage="",this.subscription$=new g.a}ngOnInit(){this.initValues()}setChangedShipment(e,t){e.Summ<e.SummToFactor?e.Summ=e.SummToFactor:(this.changedShipments.push(e),this.calcSumCurrentPage())}onSubmit(){this.successMessage="";let e={Date:new Date,DeliveryID:this.request.Delivery.ID,ID:this.request.ID,Shipments:this.changedShipments,Type:D.Correction};this.subscription$.add(this.service.add(e).subscribe(e=>{this.successMessage="\u0417\u0430\u044f\u0432\u043a\u0430 \u043d\u0430 \u043a\u043e\u0440\u0440\u0435\u043a\u0446\u0438\u044e \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430!"}))}initValues(){this.subscription$.add(this.service.getRequestByIdAndParams(this.config.data[0].ID,!0,!1,!1).subscribe(e=>{this.request=e,this.shipments=this.request.Shipments,this.calcSumCurrentPage()}))}calcSumCurrentPage(){let e=this.shipments.map(e=>e.Summ);this.sumCurrentPage=e.reduce((e,t)=>Number(e)+Number(t))}ngOnDestroy(){this.subscription$.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(P.Kb(I.d),P.Kb(v.a),P.Kb(I.b),P.Kb(l.h))},e.\u0275cmp=P.Eb({type:e,selectors:[["app-request-correct-dialog"]],decls:12,vars:3,consts:[[3,"message",4,"ngIf"],[1,"p-field","p-col-12","p-md-12"],[1,"p-text-center"],[1,"responsive-table"],["styleClass","p-datatable-customers mib-table",3,"value","rows"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],["id","btn_submit","pButton","","pRipple","","type","submit","label","\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",1,"btn-mib-submit",3,"click"],[3,"message"],[1,"m-th"],[3,"pSelectableRow"],[1,"m-td"],["pEditableColumn",""],[1,"m-td","with-icon","can-click",2,"justify-self","flex-start","flex-direction","row-reverse"],["pTemplate","input"],["pTemplate","output"],[1,"icon"],["src","../../../../../../assets/icons/edit_icon.png","alt",""],[1,"m-td","currency"],["pInputText","","type","text","required","",3,"ngModel","min","ngModelChange"],["colspan","5"],[2,"text-align","right"],["colspan","1"],[4,"ngIf","ngIfElse"],["skeletonRequestsTemplate",""],["colspan","8"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(P.Fc(0,R,1,1,"metib-success-messages",0),P.Qb(1,"div",1),P.Qb(2,"p",2),P.Hc(3,'\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u0435 \u0441\u0443\u043c\u043c\u0443 \u043f\u043e\u0441\u0442\u0430\u0432\u043e\u043a \u0433\u0434\u0435 \u044d\u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"'),P.Pb(),P.Qb(4,"div",3),P.Qb(5,"p-table",4),P.Fc(6,q,29,0,"ng-template",5),P.Fc(7,L,37,20,"ng-template",6),P.Fc(8,k,6,5,"ng-template",7),P.Fc(9,A,3,2,"ng-template",8),P.Pb(),P.Pb(),P.Pb(),P.Qb(10,"div",1),P.Qb(11,"button",9),P.Xb("click",function(){return t.onSubmit()}),P.Pb(),P.Pb()),2&e&&(P.hc("ngIf",t.successMessage),P.zb(5),P.hc("value",t.shipments)("rows",10))},directives:[y.n,S.h,F.i,H.b,w.a,S.e,S.c,S.a,z.b,C.a,z.w,z.p,z.s,y.m,x.a],pipes:[y.f,y.d],styles:[".form[_ngcontent-%COMP%]{padding-top:10px}.p-fluid[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{height:45%}"]}),e})();var X=i("Qx8d"),V=i("lYeo");class K{processData(e){const t=e.split("\n");for(let i=0;i<t.length;i++)t[i]=t[i].split("\t"),1===t[t.length-1].length&&""===t[t.length-1][0]&&t.pop(),1!==t.length||1!==t[0].length||""!==t[0][0]&&"\r"!==t[0][0]||t.pop();return t}}var _=i("K0fe"),U=i("dixg"),J=i("arFO"),G=i("dPl2"),W=i("/RsI"),Z=i("DVgK"),Y=i("eO1q"),ee=i("7LiV");function te(e,t){if(1&e&&(P.Lb(0,"metib-backend-error-messages",38),P.bc(1,"async")),2&e){const e=P.ac();P.hc("backendErrors",P.cc(1,1,e.errorsMessage$))}}function ie(e,t){if(1&e&&(P.Lb(0,"metib-success-messages",39),P.bc(1,"async")),2&e){const e=P.ac();P.hc("message",P.cc(1,1,e.successMessage$))}}function be(e,t){1&e&&(P.Qb(0,"small",41),P.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),P.Pb())}function ne(e,t){if(1&e&&(P.Qb(0,"div"),P.Fc(1,be,2,0,"small",40),P.Pb()),2&e){const e=P.ac();P.zb(1),P.hc("ngIf",e.form.controls.deliveryID.errors.required)}}function ce(e,t){1&e&&(P.Qb(0,"small",41),P.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),P.Pb())}function se(e,t){if(1&e&&(P.Qb(0,"div"),P.Fc(1,ce,2,0,"small",40),P.Pb()),2&e){const e=P.ac();P.zb(1),P.hc("ngIf",e.form.controls.number.errors.required)}}function oe(e,t){1&e&&(P.Qb(0,"small",41),P.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),P.Pb())}function re(e,t){if(1&e&&(P.Qb(0,"div"),P.Fc(1,oe,2,0,"small",40),P.Pb()),2&e){const e=P.ac();P.zb(1),P.hc("ngIf",e.form.controls.type.errors.required)}}function ae(e,t){1&e&&(P.Qb(0,"small",41),P.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),P.Pb())}function le(e,t){if(1&e&&(P.Qb(0,"div"),P.Fc(1,ae,2,0,"small",40),P.Pb()),2&e){const e=P.ac();P.zb(1),P.hc("ngIf",e.form.controls.date.errors.required)}}function de(e,t){1&e&&(P.Qb(0,"tr"),P.Qb(1,"th",42),P.Lb(2,"p-tableHeaderCheckbox"),P.Pb(),P.Qb(3,"th"),P.Qb(4,"div",43),P.Qb(5,"div"),P.Hc(6,"ID"),P.Pb(),P.Pb(),P.Pb(),P.Qb(7,"th"),P.Qb(8,"div",43),P.Qb(9,"div"),P.Hc(10,"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f"),P.Pb(),P.Pb(),P.Pb(),P.Qb(11,"th"),P.Qb(12,"div",43),P.Qb(13,"div"),P.Hc(14,"\u0414\u0430\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439"),P.Pb(),P.Pb(),P.Pb(),P.Qb(15,"th"),P.Qb(16,"div",43),P.Qb(17,"div"),P.Hc(18,"\u0421\u0447\u0451\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430"),P.Pb(),P.Pb(),P.Pb(),P.Qb(19,"th"),P.Qb(20,"div",43),P.Qb(21,"div"),P.Hc(22,"\u0414\u0430\u0442\u0430 \u0441\u0447\u0451\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u044b"),P.Pb(),P.Pb(),P.Pb(),P.Qb(23,"th"),P.Qb(24,"div",43),P.Qb(25,"div"),P.Hc(26,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438"),P.Pb(),P.Pb(),P.Pb(),P.Qb(27,"th"),P.Qb(28,"div",43),P.Qb(29,"div"),P.Hc(30,"\u0421\u0443\u043c\u043c\u0430"),P.Pb(),P.Pb(),P.Pb(),P.Pb())}function ue(e,t){if(1&e&&(P.Qb(0,"tr"),P.Qb(1,"td"),P.Lb(2,"p-tableCheckbox",44),P.Pb(),P.Qb(3,"td"),P.Qb(4,"div",45),P.Qb(5,"div"),P.Hc(6),P.Pb(),P.Pb(),P.Pb(),P.Qb(7,"td"),P.Qb(8,"div",45),P.Qb(9,"div"),P.Hc(10),P.Pb(),P.Pb(),P.Pb(),P.Qb(11,"td"),P.Qb(12,"div",45),P.Qb(13,"div"),P.Hc(14),P.bc(15,"date"),P.Pb(),P.Pb(),P.Pb(),P.Qb(16,"td"),P.Qb(17,"div",45),P.Qb(18,"div"),P.Hc(19),P.Pb(),P.Pb(),P.Pb(),P.Qb(20,"td"),P.Qb(21,"div",45),P.Qb(22,"div"),P.Hc(23),P.bc(24,"date"),P.Pb(),P.Pb(),P.Pb(),P.Qb(25,"td"),P.Qb(26,"div",45),P.Qb(27,"div"),P.Hc(28),P.bc(29,"date"),P.Pb(),P.Pb(),P.Pb(),P.Qb(30,"td"),P.Qb(31,"div",46),P.Qb(32,"div"),P.Hc(33),P.bc(34,"currency"),P.Pb(),P.Pb(),P.Pb(),P.Pb()),2&e){const e=t.$implicit;P.zb(2),P.hc("value",e),P.zb(4),P.Ic(e.ID),P.zb(4),P.Ic(e.AccountNumber),P.zb(4),P.Ic(P.dc(15,8,e.AccountDate,"dd/MM/yyyy")),P.zb(5),P.Ic(e.InvoiceNumber),P.zb(4),P.Ic(P.dc(24,11,e.InvoiceDate,"dd/MM/yyyy")),P.zb(5),P.Ic(P.dc(29,14,e.DateShipment,"dd/MM/yyyy")),P.zb(5),P.Ic(P.ec(34,17,e.Summ,"RUB","symbol"))}}function me(e,t){if(1&e&&(P.Qb(0,"tr"),P.Lb(1,"td",47),P.Qb(2,"td"),P.Hc(3),P.bc(4,"currency"),P.Pb(),P.Pb()),2&e){const e=P.ac();P.zb(3),P.Ic(P.ec(4,1,e.getShipmentsSum(e.shipments),"RUB","symbol"))}}function pe(e,t){1&e&&(P.Qb(0,"small",41),P.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),P.Pb())}function he(e,t){if(1&e&&(P.Qb(0,"div"),P.Fc(1,pe,2,0,"small",40),P.Pb()),2&e){const e=P.ac(2);P.zb(1),P.hc("ngIf",e.shipmentForm.controls.accountNumber.errors.required)}}function Pe(e,t){1&e&&(P.Qb(0,"small",41),P.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),P.Pb())}function ve(e,t){if(1&e&&(P.Qb(0,"div"),P.Fc(1,Pe,2,0,"small",40),P.Pb()),2&e){const e=P.ac(2);P.zb(1),P.hc("ngIf",e.shipmentForm.controls.accountDate.errors.required)}}function Qe(e,t){1&e&&(P.Qb(0,"small",41),P.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),P.Pb())}function fe(e,t){if(1&e&&(P.Qb(0,"div"),P.Fc(1,Qe,2,0,"small",40),P.Pb()),2&e){const e=P.ac(2);P.zb(1),P.hc("ngIf",e.shipmentForm.controls.invoiceNumber.errors.required)}}function ge(e,t){1&e&&(P.Qb(0,"small",41),P.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),P.Pb())}function De(e,t){if(1&e&&(P.Qb(0,"div"),P.Fc(1,ge,2,0,"small",40),P.Pb()),2&e){const e=P.ac(2);P.zb(1),P.hc("ngIf",e.shipmentForm.controls.invoiceDate.errors.required)}}function Ie(e,t){1&e&&(P.Qb(0,"small",41),P.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),P.Pb())}function ye(e,t){if(1&e&&(P.Qb(0,"div"),P.Fc(1,Ie,2,0,"small",40),P.Pb()),2&e){const e=P.ac(2);P.zb(1),P.hc("ngIf",e.shipmentForm.controls.dateShipment.errors.required)}}function Se(e,t){1&e&&(P.Qb(0,"small",41),P.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),P.Pb())}function Fe(e,t){if(1&e&&(P.Qb(0,"div"),P.Fc(1,Se,2,0,"small",40),P.Pb()),2&e){const e=P.ac(2);P.zb(1),P.hc("ngIf",e.shipmentForm.controls.summ.errors.required)}}function He(e,t){if(1&e){const e=P.Rb();P.Qb(0,"form",2),P.Xb("ngSubmit",function(){return P.yc(e),P.ac().addShipment()}),P.Qb(1,"div",48),P.Qb(2,"label",49),P.Hc(3,"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f: "),P.Pb(),P.Lb(4,"input",50),P.Fc(5,he,2,1,"div",7),P.Pb(),P.Qb(6,"div",48),P.Qb(7,"label",51),P.Hc(8,"\u0414\u0430\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439: "),P.Pb(),P.Lb(9,"p-calendar",52),P.Fc(10,ve,2,1,"div",7),P.Pb(),P.Qb(11,"div",48),P.Qb(12,"label",53),P.Hc(13,"\u0421\u0447\u0435\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430: "),P.Pb(),P.Lb(14,"input",54),P.Fc(15,fe,2,1,"div",7),P.Pb(),P.Qb(16,"div",48),P.Qb(17,"label",55),P.Hc(18,"\u0414\u0430\u0442\u0430 \u0441\u0447\u0435\u0442\u0430-\u0444: "),P.Pb(),P.Lb(19,"p-calendar",56),P.Fc(20,De,2,1,"div",7),P.Pb(),P.Qb(21,"div",48),P.Qb(22,"label",57),P.Hc(23,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438: "),P.Pb(),P.Lb(24,"p-calendar",58),P.Fc(25,ye,2,1,"div",7),P.Pb(),P.Qb(26,"div",48),P.Qb(27,"label",59),P.Hc(28,"\u0421\u0443\u043c\u043c\u0430: "),P.Pb(),P.Lb(29,"input",60),P.Fc(30,Fe,2,1,"div",7),P.Pb(),P.Qb(31,"div",61),P.Lb(32,"button",62),P.Lb(33,"button",63),P.Pb(),P.Pb()}if(2&e){const e=P.ac();P.hc("formGroup",e.shipmentForm),P.zb(5),P.hc("ngIf",e.shipmentForm.controls.accountNumber.invalid),P.zb(4),P.hc("maxDate",e.maxDate)("readonlyInput",!0),P.zb(1),P.hc("ngIf",e.shipmentForm.controls.accountDate.invalid),P.zb(5),P.hc("ngIf",e.shipmentForm.controls.invoiceNumber.invalid),P.zb(4),P.hc("maxDate",e.maxDate)("readonlyInput",!0),P.zb(1),P.hc("ngIf",e.shipmentForm.controls.invoiceDate.invalid),P.zb(4),P.hc("maxDate",e.maxDate)("readonlyInput",!0),P.zb(1),P.hc("ngIf",e.shipmentForm.controls.dateShipment.invalid),P.zb(5),P.hc("ngIf",e.shipmentForm.controls.summ.invalid),P.zb(2),P.hc("disabled",e.shipmentForm.invalid)}}function we(e,t){if(1&e&&(P.Qb(0,"li"),P.Hc(1),P.Pb()),2&e){const e=t.$implicit;P.zb(1),P.Jc(" ",e," ")}}function ze(e,t){if(1&e&&(P.Ob(0),P.Qb(1,"p-accordion"),P.Qb(2,"p-accordionTab",64),P.Qb(3,"p"),P.Hc(4),P.Pb(),P.Qb(5,"p"),P.Hc(6,"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435, \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438: "),P.Pb(),P.Qb(7,"ul"),P.Fc(8,we,2,1,"li",65),P.Pb(),P.Pb(),P.Pb(),P.Nb()),2&e){const e=P.ac();P.zb(4),P.Kc("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c ",e.errorsShipments.length," \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0445 \u0438\u0437 ",e.lengthShipments,"."),P.zb(4),P.hc("ngForOf",e.errorsShipments)}}function Ce(e,t){if(1&e){const e=P.Rb();P.Qb(0,"p-button",66),P.Xb("click",function(){return P.yc(e),P.ac().rowDataValidateDialog=!1}),P.Pb()}}function xe(e,t){1&e&&(P.Qb(0,"tr"),P.Qb(1,"th",42),P.Lb(2,"p-tableHeaderCheckbox"),P.Pb(),P.Qb(3,"th"),P.Qb(4,"div",43),P.Qb(5,"div"),P.Hc(6," ID "),P.Pb(),P.Pb(),P.Pb(),P.Qb(7,"th"),P.Qb(8,"div",43),P.Qb(9,"div"),P.Hc(10," \u041d\u043e\u043c\u0435\u0440 "),P.Pb(),P.Pb(),P.Pb(),P.Qb(11,"th"),P.Qb(12,"div",43),P.Qb(13,"div"),P.Hc(14," \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 "),P.Pb(),P.Pb(),P.Pb(),P.Qb(15,"th"),P.Qb(16,"div",43),P.Qb(17,"div"),P.Hc(18," \u0422\u0438\u043f "),P.Pb(),P.Pb(),P.Pb(),P.Qb(19,"th"),P.Qb(20,"div",43),P.Qb(21,"div"),P.Hc(22," \u0421\u0442\u0430\u0442\u0443\u0441 "),P.Pb(),P.Pb(),P.Pb(),P.Qb(23,"th"),P.Qb(24,"div",43),P.Qb(25,"div"),P.Hc(26," \u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f "),P.Pb(),P.Pb(),P.Pb(),P.Qb(27,"th"),P.Qb(28,"div",43),P.Qb(29,"div"),P.Hc(30," \u0410\u043a\u0442\u0438\u0432\u043d\u0430\u044f... "),P.Pb(),P.Pb(),P.Pb(),P.Qb(31,"th"),P.Qb(32,"div",43),P.Qb(33,"div"),P.Hc(34," \u0424\u0430\u043c\u0438\u043b\u0438\u044f "),P.Pb(),P.Pb(),P.Pb(),P.Qb(35,"th"),P.Qb(36,"div",43),P.Qb(37,"div"),P.Hc(38," \u0418\u043c\u044f "),P.Pb(),P.Pb(),P.Pb(),P.Pb())}function Re(e,t){if(1&e&&(P.Ob(0),P.Qb(1,"tr",67),P.Qb(2,"td"),P.Lb(3,"p-tableCheckbox",44),P.Pb(),P.Qb(4,"td"),P.Qb(5,"div",45),P.Qb(6,"div"),P.Hc(7," ID "),P.Pb(),P.Pb(),P.Pb(),P.Qb(8,"td"),P.Qb(9,"div",45),P.Qb(10,"div"),P.Hc(11," \u041d\u043e\u043c\u0435\u0440 "),P.Pb(),P.Pb(),P.Pb(),P.Qb(12,"td"),P.Qb(13,"div",45),P.Qb(14,"div"),P.Hc(15),P.Pb(),P.Pb(),P.Pb(),P.Qb(16,"td"),P.Qb(17,"div",45),P.Qb(18,"div"),P.Hc(19," \u0422\u0438\u043f "),P.Pb(),P.Pb(),P.Pb(),P.Qb(20,"td"),P.Qb(21,"div",45),P.Qb(22,"div"),P.Hc(23," \u0421\u0442\u0430\u0442\u0443\u0441 "),P.Pb(),P.Pb(),P.Pb(),P.Qb(24,"td"),P.Qb(25,"div",45),P.Qb(26,"div"),P.Hc(27," \u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434... "),P.Pb(),P.Pb(),P.Pb(),P.Qb(28,"td"),P.Qb(29,"div",45),P.Qb(30,"div"),P.Hc(31," \u0410\u043a\u0442\u0438\u0432\u043d\u0430\u044f... "),P.Pb(),P.Pb(),P.Pb(),P.Qb(32,"td"),P.Qb(33,"div",45),P.Qb(34,"div"),P.Hc(35," \u0424\u0430\u043c\u0438\u043b\u0438\u044f "),P.Pb(),P.Pb(),P.Pb(),P.Qb(36,"td"),P.Qb(37,"div",45),P.Qb(38,"div"),P.Hc(39," \u0418\u043c\u044f "),P.Pb(),P.Pb(),P.Pb(),P.Pb(),P.Nb()),2&e){const e=P.ac(),t=e.$implicit,i=e.rowIndex;P.zb(1),P.hc("pSelectableRow",t)("pSelectableRowIndex",i),P.zb(2),P.hc("value",t),P.zb(12),P.Jc(" ",t.FileName," ")}}function qe(e,t){1&e&&P.Fc(0,Re,40,4,"ng-container",7),2&e&&P.hc("ngIf","Scan"===t.$implicit.Identifier)}function Ne(e,t){1&e&&(P.Qb(0,"tr"),P.Qb(1,"th",42),P.Lb(2,"p-tableHeaderCheckbox"),P.Pb(),P.Qb(3,"th"),P.Qb(4,"div",43),P.Qb(5,"div"),P.Hc(6," ID "),P.Pb(),P.Pb(),P.Pb(),P.Qb(7,"th"),P.Qb(8,"div",43),P.Qb(9,"div"),P.Hc(10," \u041d\u043e\u043c\u0435\u0440 "),P.Pb(),P.Pb(),P.Pb(),P.Qb(11,"th"),P.Qb(12,"div",43),P.Qb(13,"div"),P.Hc(14," \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 "),P.Pb(),P.Pb(),P.Pb(),P.Qb(15,"th"),P.Qb(16,"div",43),P.Qb(17,"div"),P.Hc(18," \u0422\u0438\u043f "),P.Pb(),P.Pb(),P.Pb(),P.Qb(19,"th"),P.Qb(20,"div",43),P.Qb(21,"div"),P.Hc(22," \u0421\u0442\u0430\u0442\u0443\u0441 "),P.Pb(),P.Pb(),P.Pb(),P.Qb(23,"th"),P.Qb(24,"div",43),P.Qb(25,"div"),P.Hc(26," \u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f "),P.Pb(),P.Pb(),P.Pb(),P.Qb(27,"th"),P.Qb(28,"div",43),P.Qb(29,"div"),P.Hc(30," \u0410\u043a\u0442\u0438\u0432\u043d\u0430\u044f... "),P.Pb(),P.Pb(),P.Pb(),P.Qb(31,"th"),P.Qb(32,"div",43),P.Qb(33,"div"),P.Hc(34," \u0424\u0430\u043c\u0438\u043b\u0438\u044f "),P.Pb(),P.Pb(),P.Pb(),P.Qb(35,"th"),P.Qb(36,"div",43),P.Qb(37,"div"),P.Hc(38," \u0418\u043c\u044f "),P.Pb(),P.Pb(),P.Pb(),P.Pb())}function Te(e,t){if(1&e&&(P.Ob(0),P.Qb(1,"tr",68),P.Qb(2,"td"),P.Lb(3,"p-tableCheckbox",44),P.Pb(),P.Qb(4,"td"),P.Qb(5,"div",45),P.Qb(6,"div"),P.Hc(7," ID "),P.Pb(),P.Pb(),P.Pb(),P.Qb(8,"td"),P.Qb(9,"div",45),P.Qb(10,"div"),P.Hc(11," \u041d\u043e\u043c\u0435\u0440 "),P.Pb(),P.Pb(),P.Pb(),P.Qb(12,"td"),P.Qb(13,"div",45),P.Qb(14,"div"),P.Hc(15),P.Pb(),P.Pb(),P.Pb(),P.Qb(16,"td"),P.Qb(17,"div",45),P.Qb(18,"div"),P.Hc(19," \u0422\u0438\u043f "),P.Pb(),P.Pb(),P.Pb(),P.Qb(20,"td"),P.Qb(21,"div",45),P.Qb(22,"div"),P.Hc(23," \u0421\u0442\u0430\u0442\u0443\u0441 "),P.Pb(),P.Pb(),P.Pb(),P.Qb(24,"td"),P.Qb(25,"div",45),P.Qb(26,"div"),P.Hc(27," \u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f "),P.Pb(),P.Pb(),P.Pb(),P.Qb(28,"td"),P.Qb(29,"div",45),P.Qb(30,"div"),P.Hc(31," \u0410\u043a\u0442\u0438\u0432\u043d\u0430\u044f... "),P.Pb(),P.Pb(),P.Pb(),P.Qb(32,"td"),P.Qb(33,"div",45),P.Qb(34,"div"),P.Hc(35," \u0424\u0430\u043c\u0438\u043b\u0438\u044f "),P.Pb(),P.Pb(),P.Pb(),P.Qb(36,"td"),P.Qb(37,"div",45),P.Qb(38,"div"),P.Hc(39," \u0418\u043c\u044f "),P.Pb(),P.Pb(),P.Pb(),P.Pb(),P.Nb()),2&e){const e=P.ac().$implicit;P.zb(1),P.hc("pSelectableRow",e),P.zb(2),P.hc("value",e),P.zb(12),P.Jc(" ",e.FileName," ")}}function Le(e,t){1&e&&P.Fc(0,Te,40,3,"ng-container",7),2&e&&P.hc("ngIf","All"===t.$implicit.Identifier)}const ke=function(){return{width:"650px"}},Oe=function(){return{width:"50vw"}};let Me=(()=>{class e{constructor(e,t,i,b,n,c,s){this.ref=e,this.fb=t,this.fileService=i,this.deliveryService=b,this.config=n,this.commonService=c,this.store=s,this.deliveries=[],this.types=[{name:"\u0411\u0435\u0437 \u0444\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",value:"NonFinancing"},{name:"\u0421 \u0444\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c",value:"Financing"}],this.freeDuty=0,this.shipments=[],this.selectedShipments=[],this.files=[],this.uploadedFiles=[],this.btnSubmitValue="\u0421\u043e\u0437\u0434\u0430\u0442\u044c",this.currentShipmentID=null,this.maxDate=new Date,this.errorsShipments=[],this.lengthShipments=0,this.selectedImages=[],this.subscription$=new g.a}ngOnInit(){this.errorsMessage$=this.store.pipe(Object(l.t)(X.a)),this.successMessage$=this.store.pipe(Object(l.t)(X.b)),this.initializeForm()}ngOnDestroy(){this.subscription$.unsubscribe()}initializeForm(){if(this.form=this.fb.group({deliveryID:[0,[z.x.required]],number:[""],type:["NonFinancing",[z.x.required]],date:["",[z.x.required]]}),this.shipmentForm=this.fb.group({accountNumber:["",[z.x.required]],accountDate:["",[z.x.required]],invoiceNumber:["",[z.x.required]],invoiceDate:["",[z.x.required]],dateShipment:["",[z.x.required]],summ:[1,[z.x.required]]}),this.subscription$.add(this.deliveryService.getDeliveriesWithStats().subscribe(e=>{if(this.deliveries=e.sort((e,t)=>new Date(e.DateTo).getTime()-new Date(t.DateTo).getTime()).reverse(),this.config.data){let e=this.deliveries.find(e=>e.ID===this.config.data.Delivery.ID);this.freeDuty=e.Statistics.DutyDebtor}})),this.config.data){let e=this.config.data;console.log(e),e.Shipments&&(this.shipments=e.Shipments),this.form.patchValue({deliveryID:e.Delivery.ID,number:e.Number,type:e.Type,date:e.Date}),this.btnSubmitValue="\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}}onSubmit(){if(this.shipments.length>0){const e={Date:new Date(this.form.value.date),DeliveryID:this.form.value.deliveryID,Files:this.files,Number:this.form.value.number,Shipments:this.shipments,Type:this.form.value.type};this.store.dispatch(u({request:e}))}else this.store.dispatch(h({errors:"\u041e\u0448\u0438\u0431\u043a\u0430! \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043c\u0438\u043d\u0438\u043c\u0443\u043c 1 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0443."}))}onDeliveryChange(e){let t=this.deliveries.find(t=>t.ID===e.value);this.freeDuty=t.Statistics.DutyDebtor}onKeyPress(e){if((e.ctrlKey||e.metaKey)&&86==e.keyCode){let e=new K;if(window.clipboardData){let t=window.clipboardData.getData("Text"),i=e.processData(t);this.addRowsFromClipboard(i)}else navigator.clipboard.readText().then(t=>{let i=e.processData(t);this.addRowsFromClipboard(i)})}}getShipmentsSum(e){if(e)return e.reduce((e,t)=>e+t.Summ,0)}openNew(e){if(e){let e=this.selectedShipments[0];if(!e)return;this.currentShipmentID=e.ID,this.shipmentForm.patchValue({accountNumber:e.AccountNumber||"",accountDate:new Date(e.AccountDate),invoiceNumber:e.InvoiceNumber,invoiceDate:new Date(e.InvoiceDate),dateShipment:new Date(e.DateShipment),summ:e.Summ})}this.addDeliveryDialog=!0}hideDialog(){this.addDeliveryDialog=!1}deleteShipments(){this.selectedShipments.forEach(e=>{this.shipments.splice(this.shipments.indexOf(e),1)}),this.selectedShipments=[]}addShipment(){let e={AccountNumber:this.shipmentForm.value.accountNumber,AccountDate:this.shipmentForm.value.accountDate,InvoiceNumber:this.shipmentForm.value.invoiceNumber,InvoiceDate:this.shipmentForm.value.invoiceDate,WaybillNumber:null,WaybillDate:null,DateShipment:this.shipmentForm.value.dateShipment,DatePayment:null,SummToFactor:null,Summ:this.shipmentForm.value.summ,ID:Math.floor(100*Math.random())};if(this.currentShipmentID){e.ID=this.currentShipmentID;let t=this.shipments.indexOf(this.shipments.find(e=>e.ID===this.currentShipmentID));this.shipments[t]=e,this.currentShipmentID=null}else this.shipments.push(e);this.shipmentForm.reset(),this.hideDialog()}removeFile(){this.selectedImages.forEach(e=>{this.files.splice(this.files.indexOf(this.files.find(t=>t===e)),1)}),this.selectedImages=[]}onSelect(e,t){let i=e.target.files;this.uploadedFiles=i;for(let b of i){let e=V.a.newGuid();this.subscription$.add(this.commonService.getBase64(b).subscribe(i=>{this.fileService.uploadFileChunks(i,b.name,b.size.toString(),e).subscribe(e=>{this.files.push({Code:e.Code,FileName:e.FileName,ID:e.ID,Size:e.Size,Identifier:t}),console.log(this.files)},e=>console.log(e))}))}}addRowsFromClipboard(e){this.lengthShipments=0,this.errorsShipments=[];let t=null,i=1,b=this.getColumns();for(const n of e){const e={};for(const t of b)e[t.field]=n[t.visibleIndex];if(this.validateRowData(e)){let t={AccountNumber:e.AccountNumber,AccountDate:e.AccountDate,InvoiceNumber:e.InvoiceNumber,InvoiceDate:e.InvoiceDate,WaybillNumber:null,WaybillDate:null,DateShipment:e.DateShipment,DatePayment:null,SummToFactor:null,Summ:e.Summ,ID:Math.floor(100*Math.random())};console.log(t),this.shipments.push(t)}else this.errorsShipments.push(i),t=!0;i++}t&&(this.lengthShipments=e.length,this.showRowDataValidateMessage())}validateRowData(e){return!!(e.AccountDate&&e.AccountNumber&&e.DateShipment&&e.InvoiceDate&&e.InvoiceNumber&&e.Summ)}showRowDataValidateMessage(){this.rowDataValidateDialog=!0}getColumns(){return[{field:"InvoiceNumber",visibleIndex:0},{field:"InvoiceDate",visibleIndex:1},{field:"AccountNumber",visibleIndex:2},{field:"AccountDate",visibleIndex:3},{field:"Summ",visibleIndex:4},{field:"DateShipment",visibleIndex:5}]}}return e.\u0275fac=function(t){return new(t||e)(P.Kb(I.d),P.Kb(z.d),P.Kb(_.a),P.Kb(f.a),P.Kb(I.b),P.Kb(U.a),P.Kb(l.h))},e.\u0275cmp=P.Eb({type:e,selectors:[["app-request-create-dialog"]],hostBindings:function(e,t){1&e&&P.Xb("keydown",function(e){return t.onKeyPress(e)},!1,P.xc)},decls:84,vars:49,consts:[[3,"backendErrors",4,"ngIf"],[3,"message",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","p-grid","form"],[1,"p-field","p-col-12","p-md-6"],["for","deliveryID"],["id","deliveryID","placeholder","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440","formControlName","deliveryID","optionLabel","Title","optionValue","ID",3,"options","onChange"],[4,"ngIf"],["for","freeDuty"],["id","freeDuty","type","text","pInputText","","placeholder","\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0439 \u041b\u0438\u043c\u0438\u0442","readonly","",3,"value"],["for","number"],["id","number","type","text","pInputText","","placeholder","\u041d\u043e\u043c\u0435\u0440 \u0417\u0430\u044f\u0432\u043a\u0438","formControlName","number"],["for","type"],["id","type","formControlName","type","optionLabel","name","optionValue","value",3,"options"],["for","date"],["id","date","type","date","pInputText","","placeholder","\u0414\u0430\u0442\u0430","formControlName","date"],["for","btn_submit"],["id","btn_submit","pButton","","pRipple","","type","submit",1,"btn-mib-submit",3,"label","disabled"],["header","\u041f\u043e\u0441\u0442\u0430\u0432\u043a\u0438"],[1,"card"],[1,"mib-toolbar"],["type","button","pButton","","pRipple","","label","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",1,"p-mr-2",3,"click"],["type","button","pButton","","pRipple","","label","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",1,"p-mr-2",3,"click"],["type","button","pButton","","pRipple","",1,"p-mr-2",3,"label","click"],["selectionMode","multiple",3,"rows","rowHover","value","selection","selectionChange"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["header","\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f","styleClass","p-fluid",3,"visible","modal","draggable","resizable","visibleChange"],["pTemplate","content"],["header","\u041e\u0448\u0438\u0431\u043a\u0430",3,"visible","baseZIndex","modal","draggable","resizable","visibleChange"],["header","\u0421\u043a\u0430\u043d-\u043a\u043e\u043f\u0438\u0438 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0445"],["type","file","id","Scan","multiple","true","accept","image/jpeg,image/png,image/gif,application/pdf","hidden","",3,"change"],["for","Scan","pButton","","pRipple","","label","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",1,"p-mr-2","button"],["selectionMode","multiple","dataKey","ID","styleClass","p-datatable-customers mib-table",3,"value","selection","metaKeySelection","selectionChange"],["header","\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u042d\u0414\u041e"],["type","file","id","All","multiple","true","accept","image/jpeg,image/png,image/gif,application/pdf","hidden","",3,"change"],["for","All","pButton","","pRipple","","label","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",1,"p-mr-2","button"],[3,"backendErrors"],[3,"message"],["class","p-error",4,"ngIf"],[1,"p-error"],[2,"width","3rem"],[1,"m-th"],[3,"value"],[1,"m-td"],[1,"m-td","currency"],["colspan","7",1,"p-text-right"],[1,"p-field"],["for","accountNumber"],["id","accountNumber","type","text","pInputText","","placeholder","\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f","formControlName","accountNumber"],["for","accountDate"],["id","accountDate","selectOtherMonths","true","formControlName","accountDate","placeholder","\u0414\u0430\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439",3,"maxDate","readonlyInput"],["for","invoiceNumber"],["id","invoiceNumber","type","text","pInputText","","placeholder","\u0421\u0447\u0435\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430","formControlName","invoiceNumber"],["for","invoiceDate"],["id","invoiceDate","selectOtherMonths","true","formControlName","invoiceDate","placeholder","\u0414\u0430\u0442\u0430 \u0441\u0447\u0435\u0442\u0430-\u0444",3,"maxDate","readonlyInput"],["for","dateShipment"],["id","dateShipment","selectOtherMonths","true","formControlName","dateShipment","placeholder","\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438",3,"maxDate","readonlyInput"],["for","summ"],["id","summ","type","number","pInputText","","placeholder","\u0421\u0443\u043c\u043c\u0430","formControlName","summ","min","1"],[1,"modal-actions"],["pButton","","pRipple","","label","\u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c","type","submit",1,"p-button-text","save",3,"disabled"],["pButton","","pRipple","","label","\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",1,"p-button-text","cancel"],["header","\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"],[4,"ngFor","ngForOf"],["icon","pi pi-check","label","\u041e\u041a","styleClass","p-button-text",3,"click"],[3,"pSelectableRow","pSelectableRowIndex"],[3,"pSelectableRow"]],template:function(e,t){1&e&&(P.Fc(0,te,2,3,"metib-backend-error-messages",0),P.bc(1,"async"),P.Fc(2,ie,2,3,"metib-success-messages",1),P.bc(3,"async"),P.Qb(4,"form",2),P.Xb("ngSubmit",function(){return t.onSubmit()}),P.Qb(5,"div",3),P.Qb(6,"div",4),P.Qb(7,"label",5),P.Hc(8,"\u0414\u043e\u0433\u043e\u0432\u043e\u0440 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438:"),P.Pb(),P.Qb(9,"p-dropdown",6),P.Xb("onChange",function(e){return t.onDeliveryChange(e)}),P.Pb(),P.Fc(10,ne,2,1,"div",7),P.Pb(),P.Qb(11,"div",4),P.Qb(12,"label",8),P.Hc(13,"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0439 \u043b\u0438\u043c\u0438\u0442:"),P.Pb(),P.Lb(14,"input",9),P.bc(15,"currency"),P.Pb(),P.Qb(16,"div",4),P.Qb(17,"label",10),P.Hc(18,"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u044f\u0432\u043a\u0438:"),P.Pb(),P.Lb(19,"input",11),P.Fc(20,se,2,1,"div",7),P.Pb(),P.Qb(21,"div",4),P.Qb(22,"label",12),P.Hc(23,"\u0422\u0438\u043f \u0437\u0430\u044f\u0432\u043a\u0438:"),P.Pb(),P.Lb(24,"p-dropdown",13),P.Fc(25,re,2,1,"div",7),P.Pb(),P.Qb(26,"div",4),P.Qb(27,"label",14),P.Hc(28,"\u0414\u0430\u0442\u0430: "),P.Pb(),P.Lb(29,"input",15),P.Fc(30,le,2,1,"div",7),P.Pb(),P.Qb(31,"div",4),P.Qb(32,"label",16),P.Hc(33,"\xa0"),P.Pb(),P.Lb(34,"button",17),P.Pb(),P.Pb(),P.Pb(),P.Qb(35,"p-tabView"),P.Qb(36,"p-tabPanel",18),P.Qb(37,"div",19),P.Qb(38,"div",20),P.Qb(39,"button",21),P.Xb("click",function(){return t.openNew(!1)}),P.Pb(),P.Qb(40,"button",22),P.Xb("click",function(){return t.openNew(!0)}),P.Pb(),P.Qb(41,"button",23),P.Xb("click",function(){return t.deleteShipments()}),P.Pb(),P.Pb(),P.Qb(42,"p-table",24),P.Xb("selectionChange",function(e){return t.selectedShipments=e}),P.Fc(43,de,31,0,"ng-template",25),P.Fc(44,ue,35,21,"ng-template",26),P.Fc(45,me,5,5,"ng-template",27),P.Pb(),P.Pb(),P.Qb(46,"p-dialog",28),P.Xb("visibleChange",function(e){return t.addDeliveryDialog=e}),P.Fc(47,He,34,14,"ng-template",29),P.Pb(),P.Qb(48,"p-dialog",30),P.Xb("visibleChange",function(e){return t.rowDataValidateDialog=e}),P.Qb(49,"h3"),P.Hc(50,"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0435 \u0438\u0437 \u0431\u0443\u0444\u0435\u0440\u0430 \u043e\u0431\u043c\u0435\u043d\u0430!"),P.Pb(),P.Qb(51,"p"),P.Hc(52,"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u043a\u043e\u043b\u043e\u043d\u043e\u043a:"),P.Pb(),P.Qb(53,"ul"),P.Qb(54,"li"),P.Hc(55,"\u041d\u043e\u043c\u0435\u0440 \u0441\u0447\u0435\u0442\u0430-\u0444\u0430\u043a\u0442\u0443\u0440\u044b"),P.Pb(),P.Qb(56,"li"),P.Hc(57,"\u0414\u0430\u0442\u0430 \u0441\u0447\u0435\u0442\u0430-\u0444\u0430\u043a\u0442\u0443\u0440\u044b"),P.Pb(),P.Qb(58,"li"),P.Hc(59,"\u041d\u043e\u043c\u0435\u0440 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439"),P.Pb(),P.Qb(60,"li"),P.Hc(61,"\u0414\u0430\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439"),P.Pb(),P.Qb(62,"li"),P.Hc(63,"\u0421\u0443\u043c\u043c\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439"),P.Pb(),P.Qb(64,"li"),P.Hc(65,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438"),P.Pb(),P.Pb(),P.Fc(66,ze,9,3,"ng-container",7),P.Fc(67,Ce,1,0,"ng-template",27),P.Pb(),P.Pb(),P.Qb(68,"p-tabPanel",31),P.Qb(69,"div",20),P.Qb(70,"input",32),P.Xb("change",function(e){return t.onSelect(e,"Scan")}),P.Pb(),P.Lb(71,"label",33),P.Qb(72,"button",23),P.Xb("click",function(){return t.removeFile()}),P.Pb(),P.Pb(),P.Qb(73,"p-table",34),P.Xb("selectionChange",function(e){return t.selectedImages=e}),P.Fc(74,xe,39,0,"ng-template",25),P.Fc(75,qe,1,1,"ng-template",26),P.Pb(),P.Pb(),P.Qb(76,"p-tabPanel",35),P.Qb(77,"div",20),P.Qb(78,"input",36),P.Xb("change",function(e){return t.onSelect(e,"All")}),P.Pb(),P.Lb(79,"label",37),P.Qb(80,"button",23),P.Xb("click",function(){return t.removeFile()}),P.Pb(),P.Pb(),P.Qb(81,"p-table",34),P.Xb("selectionChange",function(e){return t.selectedImages=e}),P.Fc(82,Ne,39,0,"ng-template",25),P.Fc(83,Le,1,1,"ng-template",26),P.Pb(),P.Pb(),P.Pb()),2&e&&(P.hc("ngIf",P.cc(1,39,t.errorsMessage$)),P.zb(2),P.hc("ngIf",P.cc(3,41,t.successMessage$)),P.zb(2),P.hc("formGroup",t.form),P.zb(5),P.hc("options",t.deliveries),P.zb(1),P.hc("ngIf",t.form.controls.deliveryID.invalid),P.zb(4),P.ic("value",P.ec(15,43,t.freeDuty,"RUB","symbol-narrow")),P.zb(6),P.hc("ngIf",t.form.controls.number.invalid),P.zb(4),P.hc("options",t.types),P.zb(1),P.hc("ngIf",t.form.controls.type.invalid),P.zb(5),P.hc("ngIf",t.form.controls.date.invalid),P.zb(4),P.ic("label",t.btnSubmitValue),P.hc("disabled",t.form.invalid),P.zb(7),P.jc("label","\u0423\u0434\u0430\u043b\u0438\u0442\u044c (",t.selectedShipments.length,")"),P.zb(1),P.hc("rows",10)("rowHover",!0)("value",t.shipments)("selection",t.selectedShipments),P.zb(4),P.Dc(P.lc(47,ke)),P.hc("visible",t.addDeliveryDialog)("modal",!0)("draggable",!1)("resizable",!1),P.zb(2),P.Dc(P.lc(48,Oe)),P.hc("visible",t.rowDataValidateDialog)("baseZIndex",1e4)("modal",!0)("draggable",!1)("resizable",!1),P.zb(18),P.hc("ngIf",t.errorsShipments),P.zb(6),P.jc("label","\u0423\u0434\u0430\u043b\u0438\u0442\u044c (",t.selectedImages.length,")"),P.zb(1),P.hc("value",t.files)("selection",t.selectedImages)("metaKeySelection",!0),P.zb(7),P.jc("label","\u0423\u0434\u0430\u043b\u0438\u0442\u044c (",t.selectedImages.length,")"),P.zb(1),P.hc("value",t.files)("selection",t.selectedImages)("metaKeySelection",!0))},directives:[y.n,z.y,z.q,z.h,J.a,z.p,z.f,C.a,z.b,H.b,G.b,G.a,S.h,F.i,W.a,Z.a,w.a,S.j,S.i,Y.a,z.t,ee.a,ee.c,y.m,H.a,S.e],pipes:[y.b,y.d,y.f],styles:[".form[_ngcontent-%COMP%]{padding-top:10px}.p-fluid[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{height:45%}"]}),e})();function Ee(e,t){1&e&&(P.Qb(0,"tr"),P.Qb(1,"th",24),P.Lb(2,"p-tableHeaderCheckbox"),P.Pb(),P.Qb(3,"th"),P.Qb(4,"div",25),P.Qb(5,"div"),P.Hc(6,"ID"),P.Pb(),P.Pb(),P.Pb(),P.Qb(7,"th"),P.Qb(8,"div",25),P.Qb(9,"div"),P.Hc(10,"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f"),P.Pb(),P.Pb(),P.Pb(),P.Qb(11,"th"),P.Qb(12,"div",25),P.Qb(13,"div"),P.Hc(14,"\u0414\u0430\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439"),P.Pb(),P.Pb(),P.Pb(),P.Qb(15,"th"),P.Qb(16,"div",25),P.Qb(17,"div"),P.Hc(18,"\u0421\u0447\u0451\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430"),P.Pb(),P.Pb(),P.Pb(),P.Qb(19,"th"),P.Qb(20,"div",25),P.Qb(21,"div"),P.Hc(22,"\u0414\u0430\u0442\u0430 \u0441\u0447\u0451\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u044b"),P.Pb(),P.Pb(),P.Pb(),P.Qb(23,"th"),P.Qb(24,"div",25),P.Qb(25,"div"),P.Hc(26,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438"),P.Pb(),P.Pb(),P.Pb(),P.Qb(27,"th"),P.Qb(28,"div",25),P.Qb(29,"div"),P.Hc(30,"\u0421\u0443\u043c\u043c\u0430"),P.Pb(),P.Pb(),P.Pb(),P.Pb())}function je(e,t){if(1&e&&(P.Qb(0,"tr"),P.Qb(1,"td"),P.Lb(2,"p-tableCheckbox",26),P.Pb(),P.Qb(3,"td"),P.Qb(4,"div",27),P.Qb(5,"div"),P.Hc(6),P.Pb(),P.Pb(),P.Pb(),P.Qb(7,"td"),P.Qb(8,"div",27),P.Qb(9,"div"),P.Hc(10),P.Pb(),P.Pb(),P.Pb(),P.Qb(11,"td"),P.Qb(12,"div",27),P.Qb(13,"div"),P.Hc(14),P.bc(15,"date"),P.Pb(),P.Pb(),P.Pb(),P.Qb(16,"td"),P.Qb(17,"div",27),P.Qb(18,"div"),P.Hc(19),P.Pb(),P.Pb(),P.Pb(),P.Qb(20,"td"),P.Qb(21,"div",27),P.Qb(22,"div"),P.Hc(23),P.bc(24,"date"),P.Pb(),P.Pb(),P.Pb(),P.Qb(25,"td"),P.Qb(26,"div",27),P.Qb(27,"div"),P.Hc(28),P.bc(29,"date"),P.Pb(),P.Pb(),P.Pb(),P.Qb(30,"td"),P.Qb(31,"div",28),P.Qb(32,"div"),P.Hc(33),P.bc(34,"currency"),P.Pb(),P.Pb(),P.Pb(),P.Pb()),2&e){const e=t.$implicit;P.zb(2),P.hc("value",e),P.zb(4),P.Ic(e.ID),P.zb(4),P.Ic(e.AccountNumber),P.zb(4),P.Ic(P.dc(15,8,e.AccountDate,"dd/MM/yyyy")),P.zb(5),P.Ic(e.InvoiceNumber),P.zb(4),P.Ic(P.dc(24,11,e.InvoiceDate,"dd/MM/yyyy")),P.zb(5),P.Ic(P.dc(29,14,e.DateShipment,"dd/MM/yyyy")),P.zb(5),P.Ic(P.ec(34,17,e.Summ,"RUB","symbol"))}}function $e(e,t){if(1&e&&(P.Qb(0,"tr"),P.Lb(1,"td",29),P.Qb(2,"td"),P.Hc(3),P.bc(4,"currency"),P.Pb(),P.Pb()),2&e){const e=P.ac().index,t=P.ac();P.zb(3),P.Ic(P.ec(4,1,t.getShipmentsSum(e),"RUB","symbol"))}}function Ae(e,t){if(1&e){const e=P.Rb();P.Qb(0,"p-accordionTab",8),P.Qb(1,"div",9),P.Qb(2,"div",10),P.Qb(3,"label",11),P.Hc(4,"\u0414\u043e\u0433\u043e\u0432\u043e\u0440 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438:"),P.Pb(),P.Qb(5,"p-dropdown",12),P.Xb("onChange",function(){P.yc(e);const i=t.index;return P.ac().deliveryChanged(i)}),P.Pb(),P.Pb(),P.Qb(6,"div",10),P.Qb(7,"label",13),P.Hc(8,"\u0414\u0430\u0442\u0430: "),P.Pb(),P.Lb(9,"input",14),P.Pb(),P.Pb(),P.Qb(10,"div",15),P.Qb(11,"div",16),P.Qb(12,"button",17),P.Xb("click",function(){P.yc(e);const i=t.index;return P.ac().openNew(!1,i)}),P.Pb(),P.Qb(13,"button",18),P.Xb("click",function(){P.yc(e);const i=t.index;return P.ac().openNew(!0,i)}),P.Pb(),P.Qb(14,"button",19),P.Xb("click",function(){P.yc(e);const i=t.index;return P.ac().deleteShipments(i)}),P.Pb(),P.Pb(),P.Qb(15,"p-table",20),P.Xb("selectionChange",function(t){return P.yc(e),P.ac().selectedShipments=t}),P.Fc(16,Ee,31,0,"ng-template",21),P.Fc(17,je,35,21,"ng-template",22),P.Fc(18,$e,5,5,"ng-template",23),P.Pb(),P.Pb(),P.Pb()}if(2&e){const e=t.index,i=P.ac();P.ic("header",i.requests.at(e).value.Title||"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438..."),P.zb(5),P.hc("options",i.deliveries)("formControlName",e),P.zb(4),P.ic("value",i.requests.at(e).value.DateFrom||"..."),P.hc("disabled",!0),P.zb(5),P.jc("label","\u0423\u0434\u0430\u043b\u0438\u0442\u044c (",i.selectedShipments.length,")"),P.zb(1),P.hc("rows",10)("rowHover",!0)("value",null==i.shipments[e]?null:i.shipments[e].shipmnets)("selection",i.selectedShipments)}}function Be(e,t){1&e&&(P.Qb(0,"small",48),P.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),P.Pb())}function Xe(e,t){if(1&e&&(P.Qb(0,"div"),P.Fc(1,Be,2,0,"small",47),P.Pb()),2&e){const e=P.ac(2);P.zb(1),P.hc("ngIf",e.shipmentForm.controls.accountNumber.errors.required)}}function Ve(e,t){1&e&&(P.Qb(0,"small",48),P.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),P.Pb())}function Ke(e,t){if(1&e&&(P.Qb(0,"div"),P.Fc(1,Ve,2,0,"small",47),P.Pb()),2&e){const e=P.ac(2);P.zb(1),P.hc("ngIf",e.shipmentForm.controls.accountDate.errors.required)}}function _e(e,t){1&e&&(P.Qb(0,"small",48),P.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),P.Pb())}function Ue(e,t){if(1&e&&(P.Qb(0,"div"),P.Fc(1,_e,2,0,"small",47),P.Pb()),2&e){const e=P.ac(2);P.zb(1),P.hc("ngIf",e.shipmentForm.controls.invoiceNumber.errors.required)}}function Je(e,t){1&e&&(P.Qb(0,"small",48),P.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),P.Pb())}function Ge(e,t){if(1&e&&(P.Qb(0,"div"),P.Fc(1,Je,2,0,"small",47),P.Pb()),2&e){const e=P.ac(2);P.zb(1),P.hc("ngIf",e.shipmentForm.controls.invoiceDate.errors.required)}}function We(e,t){1&e&&(P.Qb(0,"small",48),P.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),P.Pb())}function Ze(e,t){if(1&e&&(P.Qb(0,"div"),P.Fc(1,We,2,0,"small",47),P.Pb()),2&e){const e=P.ac(2);P.zb(1),P.hc("ngIf",e.shipmentForm.controls.dateShipment.errors.required)}}function Ye(e,t){1&e&&(P.Qb(0,"small",48),P.Hc(1," \u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e. "),P.Pb())}function et(e,t){if(1&e&&(P.Qb(0,"div"),P.Fc(1,Ye,2,0,"small",47),P.Pb()),2&e){const e=P.ac(2);P.zb(1),P.hc("ngIf",e.shipmentForm.controls.summ.errors.required)}}function tt(e,t){if(1&e){const e=P.Rb();P.Qb(0,"form",0),P.Xb("ngSubmit",function(){return P.yc(e),P.ac().addShipment()}),P.Qb(1,"div",30),P.Qb(2,"label",31),P.Hc(3,"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f: "),P.Pb(),P.Lb(4,"input",32),P.Fc(5,Xe,2,1,"div",33),P.Pb(),P.Qb(6,"div",30),P.Qb(7,"label",34),P.Hc(8,"\u0414\u0430\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439: "),P.Pb(),P.Lb(9,"p-calendar",35),P.Fc(10,Ke,2,1,"div",33),P.Pb(),P.Qb(11,"div",30),P.Qb(12,"label",36),P.Hc(13,"\u0421\u0447\u0435\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430: "),P.Pb(),P.Lb(14,"input",37),P.Fc(15,Ue,2,1,"div",33),P.Pb(),P.Qb(16,"div",30),P.Qb(17,"label",38),P.Hc(18,"\u0414\u0430\u0442\u0430 \u0441\u0447\u0435\u0442\u0430-\u0444: "),P.Pb(),P.Lb(19,"p-calendar",39),P.Fc(20,Ge,2,1,"div",33),P.Pb(),P.Qb(21,"div",30),P.Qb(22,"label",40),P.Hc(23,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438: "),P.Pb(),P.Lb(24,"p-calendar",41),P.Fc(25,Ze,2,1,"div",33),P.Pb(),P.Qb(26,"div",30),P.Qb(27,"label",42),P.Hc(28,"\u0421\u0443\u043c\u043c\u0430: "),P.Pb(),P.Lb(29,"input",43),P.Fc(30,et,2,1,"div",33),P.Pb(),P.Qb(31,"div",44),P.Lb(32,"button",45),P.Lb(33,"button",46),P.Pb(),P.Pb()}if(2&e){const e=P.ac();P.hc("formGroup",e.shipmentForm),P.zb(5),P.hc("ngIf",e.shipmentForm.controls.accountNumber.invalid),P.zb(4),P.hc("maxDate",e.maxDate)("readonlyInput",!0),P.zb(1),P.hc("ngIf",e.shipmentForm.controls.accountDate.invalid),P.zb(5),P.hc("ngIf",e.shipmentForm.controls.invoiceNumber.invalid),P.zb(4),P.hc("maxDate",e.maxDate)("readonlyInput",!0),P.zb(1),P.hc("ngIf",e.shipmentForm.controls.invoiceDate.invalid),P.zb(4),P.hc("maxDate",e.maxDate)("readonlyInput",!0),P.zb(1),P.hc("ngIf",e.shipmentForm.controls.dateShipment.invalid),P.zb(5),P.hc("ngIf",e.shipmentForm.controls.summ.invalid),P.zb(2),P.hc("disabled",e.shipmentForm.invalid)}}const it=function(){return{width:"650px"}};let bt=(()=>{class e{constructor(e,t,i,b,n){this.ref=e,this.fb=t,this.deliveryService=i,this.config=b,this.store=n,this.deliveries=[],this.maxDate=new Date,this.btnSubmitValue="\u0421\u043e\u0437\u0434\u0430\u0442\u044c",this.currentShipmentID=null,this.shipments=[],this.selectedShipments=[],this.subscription$=new g.a}ngOnInit(){this.initValues(),this.initializeForm()}onSubmit(){}deliveryChanged(e){console.log(this.requests.at(e).value)}getRequestByIndx(e){let t=this.requests.at(e).value;return this.deliveries.find(e=>e.ID===t)}addRequest(){this.requests.push(this.fb.control("")),this.shipments.push({formId:this.requests.controls.length-1,shipmnets:[]})}openNew(e,t){if(this.currentRequestId=t,e){let e=this.selectedShipments[0];if(!e)return;this.currentShipmentID=e.ID,this.shipmentForm.patchValue({accountNumber:e.AccountNumber||"",accountDate:new Date(e.AccountDate),invoiceNumber:e.InvoiceNumber,invoiceDate:new Date(e.InvoiceDate),dateShipment:new Date(e.DateShipment),summ:e.Summ})}this.addDeliveryDialog=!0}hideDialog(){this.addDeliveryDialog=!1}deleteShipments(e){let t=this.shipments.find(t=>t.formId===e).shipmnets;this.selectedShipments.forEach(e=>{this.shipments.splice(t.indexOf(e),1)}),this.selectedShipments=[]}addShipment(){let e=this.shipments.find(e=>e.formId===this.currentRequestId),t={AccountNumber:this.shipmentForm.value.accountNumber,AccountDate:this.shipmentForm.value.accountDate,InvoiceNumber:this.shipmentForm.value.invoiceNumber,InvoiceDate:this.shipmentForm.value.invoiceDate,WaybillNumber:null,WaybillDate:null,DateShipment:this.shipmentForm.value.dateShipment,DatePayment:null,SummToFactor:null,Summ:this.shipmentForm.value.summ,ID:Math.floor(100*Math.random())};if(this.currentShipmentID){t.ID=this.currentShipmentID;let i=e.shipmnets.indexOf(e.shipmnets.find(e=>e.ID===this.currentShipmentID));e.shipmnets[i]=t,this.currentShipmentID=null}else e.shipmnets.push(t);this.shipmentForm.reset(),this.hideDialog()}getShipmentsSum(e){var t;let i=null===(t=this.shipments.find(t=>t.formId===e))||void 0===t?void 0:t.shipmnets;if(i)return i.reduce((e,t)=>e+t.Summ,0)}get requests(){return this.form.get("requests")}initValues(){this.subscription$.add(this.deliveryService.getDeliveriesWithStats().subscribe(e=>{this.deliveries=e}))}initializeForm(){this.form=this.fb.group({requests:this.fb.array([this.fb.control("")])}),this.shipmentForm=this.fb.group({accountNumber:["",[z.x.required]],accountDate:["",[z.x.required]],invoiceNumber:["",[z.x.required]],invoiceDate:["",[z.x.required]],dateShipment:["",[z.x.required]],summ:[1,[z.x.required]]}),this.shipments.push({formId:0,shipmnets:[]})}ngOnDestroy(){this.subscription$.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(P.Kb(I.d),P.Kb(z.d),P.Kb(f.a),P.Kb(I.b),P.Kb(l.h))},e.\u0275cmp=P.Eb({type:e,selectors:[["app-agency-request-create-dialog"]],decls:10,vars:9,consts:[[3,"formGroup","ngSubmit"],["formArrayName","requests"],[3,"header",4,"ngFor","ngForOf"],[1,"p-field","p-col-12","p-md-12"],["id","btn_submit","pButton","","pRipple","","type","button","label","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443",1,"btn-mib-submit","p-button-outlined",3,"click"],["id","btn_submit","pButton","","pRipple","","type","submit","label","\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",1,"btn-mib-submit"],["header","\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f","styleClass","p-fluid",3,"visible","modal","draggable","resizable","visibleChange"],["pTemplate","content"],[3,"header"],[1,"p-fluid","p-formgrid","p-grid","form"],[1,"p-field","p-col-12","p-md-6"],["for","deliveryID"],["id","delivery","placeholder","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438","optionLabel","Title","valueLabel","ID",3,"options","formControlName","onChange"],["for","date"],["id","date","type","text","pInputText","","placeholder","\u0414\u0430\u0442\u0430",3,"value","disabled"],[1,"card"],[1,"mib-toolbar"],["type","button","pButton","","pRipple","","label","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",1,"p-mr-2",3,"click"],["type","button","pButton","","pRipple","","label","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",1,"p-mr-2",3,"click"],["type","button","pButton","","pRipple","",1,"p-mr-2",3,"label","click"],["selectionMode","multiple",3,"rows","rowHover","value","selection","selectionChange"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[2,"width","3rem"],[1,"m-th"],[3,"value"],[1,"m-td"],[1,"m-td","currency"],["colspan","7",1,"p-text-right"],[1,"p-field"],["for","accountNumber"],["id","accountNumber","type","text","pInputText","","placeholder","\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f","formControlName","accountNumber"],[4,"ngIf"],["for","accountDate"],["id","accountDate","formControlName","accountDate","selectOtherMonths","true","placeholder","\u0414\u0430\u0442\u0430 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e\u0439",3,"maxDate","readonlyInput"],["for","invoiceNumber"],["id","invoiceNumber","type","text","pInputText","","placeholder","\u0421\u0447\u0435\u0442-\u0444\u0430\u043a\u0442\u0443\u0440\u0430","formControlName","invoiceNumber"],["for","invoiceDate"],["id","invoiceDate","formControlName","invoiceDate","selectOtherMonths","true","placeholder","\u0414\u0430\u0442\u0430 \u0441\u0447\u0435\u0442\u0430-\u0444",3,"maxDate","readonlyInput"],["for","dateShipment"],["id","dateShipment","selectOtherMonths","true","formControlName","dateShipment","placeholder","\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438",3,"maxDate","readonlyInput"],["for","summ"],["id","summ","type","number","pInputText","","placeholder","\u0421\u0443\u043c\u043c\u0430","formControlName","summ","min","1"],[1,"modal-actions"],["pButton","","pRipple","","label","\u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c","type","submit",1,"p-button-text","save",3,"disabled"],["pButton","","pRipple","","label","\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",1,"p-button-text","cancel"],["class","p-error",4,"ngIf"],[1,"p-error"]],template:function(e,t){1&e&&(P.Qb(0,"form",0),P.Xb("ngSubmit",function(){return t.onSubmit()}),P.Qb(1,"div",1),P.Qb(2,"p-accordion"),P.Fc(3,Ae,19,10,"p-accordionTab",2),P.Pb(),P.Qb(4,"div",3),P.Qb(5,"button",4),P.Xb("click",function(){return t.addRequest()}),P.Pb(),P.Pb(),P.Pb(),P.Qb(6,"div",3),P.Lb(7,"button",5),P.Pb(),P.Pb(),P.Qb(8,"p-dialog",6),P.Xb("visibleChange",function(e){return t.addDeliveryDialog=e}),P.Fc(9,tt,34,14,"ng-template",7),P.Pb()),2&e&&(P.hc("formGroup",t.form),P.zb(3),P.hc("ngForOf",t.requests.controls),P.zb(5),P.Dc(P.lc(8,it)),P.hc("visible",t.addDeliveryDialog)("modal",!0)("draggable",!1)("resizable",!1))},directives:[z.y,z.q,z.h,z.c,ee.a,y.m,H.b,W.a,F.i,ee.c,J.a,z.p,z.f,C.a,S.h,S.j,S.i,z.b,y.n,Y.a,z.t],pipes:[y.f,y.d],styles:[".form[_ngcontent-%COMP%]{padding-top:10px}.p-fluid[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{height:45%}"]}),e})();var nt=i("tAQN"),ct=i("Gxio"),st=i("5EWq"),ot=i("B16f"),rt=i("xlun");function at(e,t){1&e&&(P.Qb(0,"tr"),P.Qb(1,"th"),P.Qb(2,"div",4),P.Hc(3,"ID"),P.Pb(),P.Pb(),P.Qb(4,"th"),P.Qb(5,"div",4),P.Hc(6,"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u0430\u044f"),P.Pb(),P.Pb(),P.Qb(7,"th"),P.Qb(8,"div",4),P.Hc(9,"\u0414\u0430\u0442\u0430"),P.Pb(),P.Pb(),P.Qb(10,"th"),P.Qb(11,"div",4),P.Hc(12,"\u0421\u0443\u043c\u043c\u0430"),P.Pb(),P.Pb(),P.Pb())}function lt(e,t){if(1&e&&(P.Qb(0,"tr"),P.Qb(1,"td"),P.Qb(2,"div",5),P.Qb(3,"div"),P.Hc(4),P.Pb(),P.Pb(),P.Pb(),P.Qb(5,"td"),P.Qb(6,"div",5),P.Qb(7,"div"),P.Hc(8),P.Pb(),P.Pb(),P.Pb(),P.Qb(9,"td"),P.Qb(10,"div",5),P.Qb(11,"div"),P.Hc(12),P.bc(13,"date"),P.Pb(),P.Pb(),P.Pb(),P.Qb(14,"td"),P.Qb(15,"div",6),P.Qb(16,"div"),P.Hc(17),P.bc(18,"currency"),P.Pb(),P.Pb(),P.Pb(),P.Pb()),2&e){const e=t.$implicit;P.zb(4),P.Jc(" ",e.ID," "),P.zb(4),P.Jc(" ",e.InvoiceNumber," "),P.zb(4),P.Jc(" ",P.dc(13,4,e.DateShipment,"dd.MM.yyyy")," "),P.zb(5),P.Jc(" ",P.ec(18,7,e.Summ,"RUB","symbol-narrow")," ")}}function dt(e,t){1&e&&(P.Qb(0,"tr"),P.Qb(1,"td",7),P.Hc(2,"\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0445, \u0434\u043b\u044f \u044d\u0442\u043e\u0439 \u0437\u0430\u044f\u0432\u043a\u0438 \u043d\u0435\u0442."),P.Pb(),P.Pb())}let ut=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=P.Eb({type:e,selectors:[["shipments-view"]],inputs:{shipments:"shipments"},decls:4,vars:1,consts:[[3,"value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"m-th"],[1,"m-td"],[1,"m-td","currency"],["colspan","4"]],template:function(e,t){1&e&&(P.Qb(0,"p-table",0),P.Fc(1,at,13,0,"ng-template",1),P.Fc(2,lt,19,11,"ng-template",2),P.Fc(3,dt,3,0,"ng-template",3),P.Pb()),2&e&&P.hc("value",t.shipments)},directives:[S.h,F.i],pipes:[y.f,y.d],encapsulation:2}),e})();function mt(e,t){1&e&&(P.Qb(0,"tr"),P.Qb(1,"th"),P.Qb(2,"div",4),P.Hc(3,"ID"),P.Pb(),P.Pb(),P.Qb(4,"th"),P.Qb(5,"div",4),P.Hc(6,"\u041d\u043e\u043c\u0435\u0440"),P.Pb(),P.Pb(),P.Qb(7,"th"),P.Qb(8,"div",4),P.Hc(9,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),P.Pb(),P.Pb(),P.Qb(10,"th"),P.Qb(11,"div",4),P.Hc(12,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),P.Pb(),P.Pb(),P.Pb())}function pt(e,t){if(1&e){const e=P.Rb();P.Qb(0,"tr",5),P.Xb("click",function(){P.yc(e);const i=t.$implicit;return P.ac().viewDocument(i)}),P.Qb(1,"td"),P.Qb(2,"div",6),P.Qb(3,"div"),P.Hc(4),P.Pb(),P.Pb(),P.Pb(),P.Qb(5,"td"),P.Qb(6,"div",6),P.Qb(7,"div"),P.Hc(8),P.Pb(),P.Pb(),P.Pb(),P.Qb(9,"td"),P.Qb(10,"div",7),P.Qb(11,"div"),P.Hc(12),P.Pb(),P.Pb(),P.Pb(),P.Qb(13,"td"),P.Qb(14,"div",6),P.Qb(15,"div"),P.Hc(16),P.Pb(),P.Pb(),P.Pb(),P.Pb()}if(2&e){const e=t.$implicit;P.zb(4),P.Jc(" ",e.DocumentID," "),P.zb(4),P.Jc(" ",e.Number," "),P.zb(2),P.ic("pTooltip",e.Description),P.zb(2),P.Jc(" ",e.Description," "),P.zb(4),P.Jc(" ",e.Title," ")}}function ht(e,t){1&e&&(P.Qb(0,"tr"),P.Qb(1,"td",8),P.Hc(2,"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0434\u043b\u044f \u044d\u0442\u043e\u0439 \u0437\u0430\u044f\u0432\u043a\u0438 \u043d\u0435\u0442."),P.Pb(),P.Pb())}let Pt=(()=>{class e{constructor(){this.documentView=new P.n}ngOnInit(){}viewDocument(e){this.documentView.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=P.Eb({type:e,selectors:[["documents-view"]],inputs:{documents:"documents"},outputs:{documentView:"documentView"},decls:4,vars:1,consts:[[3,"value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"m-th"],[1,"can-click",3,"click"],[1,"m-td"],["tooltipPosition","bottom",1,"m-td",3,"pTooltip"],["colspan","4"]],template:function(e,t){1&e&&(P.Qb(0,"p-table",0),P.Fc(1,mt,13,0,"ng-template",1),P.Fc(2,pt,17,5,"ng-template",2),P.Fc(3,ht,3,0,"ng-template",3),P.Pb()),2&e&&P.hc("value",t.documents)},directives:[S.h,F.i,rt.a],encapsulation:2}),e})();function vt(e,t){if(1&e){const e=P.Rb();P.Qb(0,"button",16,17),P.Xb("click",function(t){return P.yc(e),P.vc(3).toggle(t)}),P.Pb(),P.Lb(2,"p-tieredMenu",18,19),P.Qb(4,"button",20),P.Xb("click",function(){return P.yc(e),P.ac().refresh()}),P.Pb()}if(2&e){const e=P.ac();P.zb(2),P.hc("model",e.items)("popup",!0)}}function Qt(e,t){1&e&&P.Lb(0,"div")}function ft(e,t){1&e&&(P.Qb(0,"tr"),P.Qb(1,"th",21),P.Lb(2,"p-tableHeaderCheckbox"),P.Pb(),P.Qb(3,"th",22),P.Qb(4,"div",23),P.Qb(5,"div"),P.Hc(6," ID "),P.Lb(7,"p-sortIcon",24),P.Pb(),P.Pb(),P.Pb(),P.Qb(8,"th"),P.Qb(9,"div",23),P.Qb(10,"div"),P.Hc(11,"\u0414\u043e\u0433\u043e\u0432\u043e\u0440"),P.Pb(),P.Pb(),P.Pb(),P.Qb(12,"th",25),P.Qb(13,"div",23),P.Qb(14,"div"),P.Hc(15,"\u041d\u043e\u043c\u0435\u0440 "),P.Lb(16,"p-sortIcon",26),P.Pb(),P.Pb(),P.Pb(),P.Qb(17,"th",27),P.Qb(18,"div",23),P.Qb(19,"div"),P.Hc(20,"\u0414\u0430\u0442\u0430 "),P.Lb(21,"p-sortIcon",28),P.Pb(),P.Pb(),P.Pb(),P.Qb(22,"th",29),P.Qb(23,"div",23),P.Qb(24,"div"),P.Hc(25,"\u0422\u0438\u043f "),P.Lb(26,"p-sortIcon",30),P.Pb(),P.Pb(),P.Pb(),P.Qb(27,"th",31),P.Qb(28,"div",23),P.Qb(29,"div"),P.Hc(30,"\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 "),P.Lb(31,"p-sortIcon",32),P.Pb(),P.Pb(),P.Pb(),P.Qb(32,"th"),P.Qb(33,"div",23),P.Qb(34,"div"),P.Hc(35,"\u041f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u044c"),P.Pb(),P.Pb(),P.Pb(),P.Qb(36,"th"),P.Qb(37,"div",23),P.Qb(38,"div"),P.Hc(39,"\u0421\u0443\u043c\u043c\u0430 \u0437\u0430\u044f\u0432\u043a\u0438"),P.Pb(),P.Pb(),P.Pb(),P.Pb())}function gt(e,t){1&e&&(P.Qb(0,"div"),P.Hc(1," \u0421 \u0444\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c "),P.Pb())}function Dt(e,t){1&e&&(P.Qb(0,"div"),P.Hc(1," \u0411\u0435\u0437 \u0444\u0438\u043d\u0430\u043d\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f "),P.Pb())}function It(e,t){if(1&e){const e=P.Rb();P.Qb(0,"tr",33),P.Xb("click",function(){P.yc(e);const i=t.$implicit;return P.ac().selectRow(i)}),P.Qb(1,"td"),P.Lb(2,"p-tableCheckbox",34),P.Pb(),P.Qb(3,"td"),P.Qb(4,"div",35),P.Qb(5,"div"),P.Hc(6),P.Pb(),P.Pb(),P.Pb(),P.Qb(7,"td"),P.Qb(8,"div",36),P.Qb(9,"div"),P.Hc(10),P.Pb(),P.Pb(),P.Pb(),P.Qb(11,"td"),P.Qb(12,"div",35),P.Qb(13,"div"),P.Hc(14),P.Pb(),P.Pb(),P.Pb(),P.Qb(15,"td"),P.Qb(16,"div",35),P.Qb(17,"div"),P.Hc(18),P.bc(19,"date"),P.Pb(),P.Pb(),P.Pb(),P.Qb(20,"td"),P.Qb(21,"div",35),P.Qb(22,"div",37),P.Fc(23,gt,2,0,"div",38),P.Fc(24,Dt,2,0,"div",38),P.Pb(),P.Pb(),P.Pb(),P.Qb(25,"td"),P.Qb(26,"div",35),P.Qb(27,"div"),P.Hc(28),P.Pb(),P.Pb(),P.Pb(),P.Qb(29,"td"),P.Qb(30,"div",36),P.Qb(31,"div"),P.Hc(32),P.Pb(),P.Pb(),P.Pb(),P.Qb(33,"td"),P.Qb(34,"div",39),P.bc(35,"currency"),P.Qb(36,"div"),P.Hc(37),P.bc(38,"currency"),P.Pb(),P.Pb(),P.Pb(),P.Pb()}if(2&e){const e=t.$implicit;P.hc("pRowToggler",e),P.zb(2),P.hc("value",e),P.zb(4),P.Ic(e.ID),P.zb(2),P.ic("pTooltip",e.Delivery.Title),P.zb(2),P.Ic(e.Delivery.Title),P.zb(4),P.Jc(" ",e.Number,""),P.zb(4),P.Ic(P.dc(19,15,e.Date,"dd.MM.yyyy")),P.zb(4),P.hc("ngSwitch",e.Type),P.zb(1),P.hc("ngSwitchCase","Financing"),P.zb(1),P.hc("ngSwitchCase","NonFinancing"),P.zb(4),P.Ic(e.Status),P.zb(2),P.ic("pTooltip",e.Delivery.Debtor),P.zb(2),P.Ic(e.Delivery.Debtor),P.zb(2),P.ic("pTooltip",P.ec(35,18,e.Summ,"RUB","symbol-narrow")),P.zb(3),P.Ic(P.ec(38,22,e.Summ,"RUB","symbol-narrow"))}}function yt(e,t){1&e&&(P.Ob(0),P.Qb(1,"tr"),P.Qb(2,"td",41),P.Hc(3,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445."),P.Pb(),P.Pb(),P.Nb())}function St(e,t){1&e&&(P.Qb(0,"tr"),P.Lb(1,"td"),P.Qb(2,"td"),P.Qb(3,"div",35),P.Qb(4,"div"),P.Lb(5,"p-skeleton",42),P.Pb(),P.Pb(),P.Pb(),P.Qb(6,"td"),P.Qb(7,"div",35),P.Qb(8,"div"),P.Lb(9,"p-skeleton",42),P.Pb(),P.Pb(),P.Pb(),P.Qb(10,"td"),P.Qb(11,"div",35),P.Qb(12,"div"),P.Lb(13,"p-skeleton",42),P.Pb(),P.Pb(),P.Pb(),P.Qb(14,"td"),P.Qb(15,"div",35),P.Qb(16,"div"),P.Lb(17,"p-skeleton",42),P.Pb(),P.Pb(),P.Pb(),P.Qb(18,"td"),P.Qb(19,"div",35),P.Qb(20,"div"),P.Lb(21,"p-skeleton",42),P.Pb(),P.Pb(),P.Pb(),P.Qb(22,"td"),P.Qb(23,"div",35),P.Qb(24,"div"),P.Lb(25,"p-skeleton",42),P.Pb(),P.Pb(),P.Pb(),P.Qb(26,"td"),P.Qb(27,"div",35),P.Qb(28,"div"),P.Lb(29,"p-skeleton",42),P.Pb(),P.Pb(),P.Pb(),P.Qb(30,"td"),P.Qb(31,"div",35),P.Qb(32,"div"),P.Lb(33,"p-skeleton",42),P.Pb(),P.Pb(),P.Pb(),P.Pb())}const Ft=function(){return{}},Ht=function(e,t,i,b,n){return[e,t,i,b,n]};function wt(e,t){1&e&&P.Fc(0,St,34,0,"tr",4),2&e&&P.hc("ngForOf",P.qc(6,Ht,P.lc(1,Ft),P.lc(2,Ft),P.lc(3,Ft),P.lc(4,Ft),P.lc(5,Ft)))}function zt(e,t){if(1&e&&(P.Fc(0,yt,4,0,"ng-container",10),P.bc(1,"async"),P.Fc(2,wt,1,12,"ng-template",null,40,P.Gc)),2&e){const e=P.vc(3),t=P.ac();P.hc("ngIf",P.cc(1,2,t.loading$))("ngIfElse",e)}}function Ct(e,t){1&e&&(P.Ob(0),P.Qb(1,"div",43),P.Hc(2," \u0414\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u041d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0445 \u0438 \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 - \u043d\u0430\u0436\u043c\u0438\u0442\u0435, \u043d\u0430 \u043b\u044e\u0431\u0443\u044e \u0437\u0430\u044f\u0432\u043a\u0443. "),P.Pb(),P.Nb())}function xt(e,t){if(1&e){const e=P.Rb();P.Qb(0,"p"),P.Hc(1,"ID \u0417\u0430\u044f\u0432\u043a\u0438: "),P.Qb(2,"strong"),P.Hc(3),P.Pb(),P.Pb(),P.Qb(4,"p-tabView"),P.Qb(5,"p-tabPanel",44),P.Lb(6,"shipments-view",45),P.Pb(),P.Qb(7,"p-tabPanel",46),P.Qb(8,"documents-view",47),P.Xb("documentView",function(t){return P.yc(e),P.ac().documentViewHandler(t)}),P.Pb(),P.Pb(),P.Pb()}if(2&e){const e=P.ac();P.zb(3),P.Jc(" ",e.selectedRequest.ID,""),P.zb(3),P.hc("shipments",e.selectedRequest.Shipments),P.zb(2),P.hc("documents",e.selectedRequest.Documents)}}function Rt(e,t){1&e&&(P.Qb(0,"div",48),P.Qb(1,"label",49),P.Hc(2,"\u041f\u0438\u043d-\u043a\u043e\u0434: "),P.Pb(),P.Lb(3,"input",50),P.Pb())}function qt(e,t){1&e&&(P.Lb(0,"button",51),P.Lb(1,"button",52))}const Nt=function(){return[10,25,50]},Tt=function(){return{width:"450px"}};let Lt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=P.Fb({type:e,selectors:[["","tableHighlight",""]]}),e})(),kt=(()=>{class e{constructor(e,t,i,b,n){this.dialogService=e,this.fb=t,this.requestService=i,this.requestStoreService=b,this.fileService=n,this.items=[],this.confirmDialog=!1,this.documentViewDialog=!1,this.selectedItems=[],this.successRequestsDialogMessage=null,this.errorRequestsDialogMessage=null,this.subscription$=new g.a}ngOnInit(){this.initializeValues(),this.fetch()}initializeValues(){this.items=[{id:"create",label:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",command:()=>this.showCreateRequestDialog()},{id:"edit",label:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",command:()=>this.showEditDialog()},{id:"agency",label:"\u0410\u0433\u0435\u043d\u0442\u0441\u043a\u0430\u044f \u0437\u0430\u044f\u0432\u043a\u0430",command:()=>this.showCreateAgencyRequestDialog()},{id:"createFrom",label:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0437 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0439",routerLink:""},{id:"createCorrection",label:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043a\u043e\u0440\u0440\u0435\u043a\u0446\u0438\u044e",command:()=>this.showCorrectionDialog()},{id:"events",label:"\u0421\u043e\u0431\u044b\u0442\u0438\u044f",routerLink:""},{id:"documents",label:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b",routerLink:""},{id:"remove",label:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",routerLink:""},{id:"send",label:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",command:()=>this.initSend()}],this.confirmForm=this.fb.group({pin:["",[z.x.required]],confirmCode:[""]})}selectRow(e){this.subscription$.add(this.requestService.getRequestByIdAndParams(e.ID,!0,!0,!0).subscribe(e=>{this.selectedRequest=e,console.log("SELECTED ROW: ",this.selectedRequest)}))}documentViewHandler(e){console.log(e),this.subscription$.add(this.fileService.getFile(this.selectedRequest.ID,e.DocumentID).subscribe(e=>{this.documentViewDialog=!0}))}refresh(){this.fetch(!0)}fetch(e){this.requests$=this.requestStoreService.getRequests(e),this.loading$=this.requestStoreService.getLoading()}showCreateAgencyRequestDialog(){this.ref=this.dialogService.open(bt,{header:"\u0417\u0430\u044f\u0432\u043a\u0430 \u043d\u0430 \u0430\u0433\u0435\u043d\u0442\u0441\u043a\u0438\u0439 \u0444\u0430\u043a\u0442\u043e\u0440\u0438\u043d\u0433",width:"85%",contentStyle:{height:"800px",overflow:"auto"},baseZIndex:1e4}),this.ref.onClose.subscribe(e=>{console.log("closed")})}showCreateRequestDialog(){this.ref=this.dialogService.open(Me,{header:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u044f\u0432\u043a\u0438",width:"85%",contentStyle:{height:"800px",overflow:"auto"},baseZIndex:1e4}),this.ref.onClose.subscribe(e=>{console.log("closed")})}customSort(e){}showCorrectionDialog(){this.ref=this.dialogService.open(B,{data:this.selectedItems,header:"\u0417\u0430\u044f\u0432\u043a\u0430 \u043d\u0430 \u043a\u043e\u0440\u0440\u0435\u043a\u0446\u0438\u044e",width:"85%",baseZIndex:1e4})}showEditDialog(){let e=this.selectedItems[0];this.subscription$.add(this.requestService.getRequestByIdAndParams(e.ID,!0,!0,!0).subscribe(t=>{e=t,e&&(this.ref=this.dialogService.open(Me,{header:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u044f\u0432\u043a\u0438",width:"70%",contentStyle:{height:"800px",overflow:"auto"},baseZIndex:1e4,data:e}),this.ref.onClose.subscribe(e=>{console.log("closed")}))}))}initSend(){let e=this.selectedItems.map(e=>e.ID);this.subscription$.add(this.requestService.sendInit(e).subscribe(e=>{this.confirmForm.patchValue({confirmCode:e.ConfirmationCode}),this.confirmDialog=!0}))}confirmSend(){this.successRequestsDialogMessage=null,this.errorRequestsDialogMessage=null,this.subscription$.add(this.requestService.sendConfirm({ConfirmationCode:this.confirmForm.value.confirmCode,Pin:this.confirmForm.value.pin}).subscribe(e=>{this.confirmDialog=!1,this.successRequestsDialogMessage="\u0417\u0430\u044f\u0432\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0430"}))}checkSelecteditems(){this.items.forEach(e=>{"send"===e.id&&(e.disabled=this.checkSelectedItemIsCreate()),"remove"===e.id&&(e.disabled=this.checkSelectedItemIsCreate()),"edit"!==e.id?"edit"!==e.id||(e.disabled=this.checkSelectedItemIsCreate()):e.disabled=this.checkSelectedItemIsReadonly()})}checkSelectedItemIsReadonly(){let e=this.selectedItems.filter(e=>!0===e.ReadOnly);return console.log(e),e.length>0}checkSelectedItemIsCreate(){let e=this.selectedItems.filter(e=>"\u0421\u043e\u0437\u0434\u0430\u043d\u0430"!==e.Status);return console.log(e),e.length>0}ngOnDestroy(){this.subscription$.unsubscribe(),this.ref&&this.ref.close()}}return e.\u0275fac=function(t){return new(t||e)(P.Kb(I.a),P.Kb(z.d),P.Kb(v.a),P.Kb(nt.a),P.Kb(_.a))},e.\u0275cmp=P.Eb({type:e,selectors:[["app-requests-page"]],viewQuery:function(e,t){if(1&e&&P.Nc(Lt,!0),2&e){let e;P.uc(e=P.Yb())&&(t.tableHighlight=e)}},decls:20,vars:24,consts:[["id","step1",1,"card-content"],["styleClass","p-mb-4"],["pTemplate","left"],[1,"responsive-table"],[4,"ngFor","ngForOf"],["selectionMode","multiple","dataKey","ID","styleClass","p-datatable-customers mib-table","tableHighlight","","currentPageReportTemplate","\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u043e: \u043e\u0442 {first} \u0434\u043e {last} \u0438\u0437 {totalRecords}",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","selection","paginator","metaKeySelection","customSort","selectionChange","onRowSelect","sortFunction"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"card-content","card-content__tabs"],[4,"ngIf","ngIfElse"],["selectedRequestTemplate",""],[3,"formGroup","ngSubmit"],["header","\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435","styleClass","p-fluid",3,"visible","modal","draggable","resizable","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["type","button","pButton","","label","\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435","icon","pi pi-angle-down","id","step2",1,"basic",3,"click"],["btn",""],[3,"model","popup"],["menu",""],["type","button","pButton","","label","\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435",1,"basic","p-mr-2",3,"click"],[2,"width","3rem"],["pSortableColumn","ID"],[1,"m-th"],["field","ID"],["pSortableColumn","Number"],["field","Number"],["pSortableColumn","Date"],["field","Date"],["pSortableColumn","Type"],["field","Type"],["pSortableColumn","Status"],["field","Status"],[1,"can-click",3,"pRowToggler","click"],[3,"value"],[1,"m-td"],["tooltipPosition","bottom",1,"m-td",3,"pTooltip"],[3,"ngSwitch"],[4,"ngSwitchCase"],["tooltipPosition","bottom",1,"m-td","currency",3,"pTooltip"],["skeletonRequestsTemplate",""],["colspan","8"],["width","10rem"],[1,"card-content__text-center"],["header","\u041d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0435"],[3,"shipments"],["header","\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b"],[3,"documents","documentView"],[1,"p-field"],["for","pin"],["id","pin","type","text","pInputText","","placeholder","\u041f\u0438\u043d-\u043a\u043e\u0434","formControlName","pin"],["pButton","","pRipple","","label","\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c","icon","pi pi-times",1,"p-button-text"],["pButton","","pRipple","","label","\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c","icon","pi pi-check","type","submit",1,"p-button-text"]],template:function(e,t){if(1&e&&(P.Lb(0,"p-toast"),P.Qb(1,"div",0),P.Qb(2,"p-toolbar",1),P.Fc(3,vt,5,2,"ng-template",2),P.Pb(),P.Qb(4,"div",3),P.Fc(5,Qt,1,0,"div",4),P.bc(6,"async"),P.Qb(7,"p-table",5),P.Xb("selectionChange",function(e){return t.selectedItems=e})("onRowSelect",function(){return t.checkSelecteditems()})("sortFunction",function(e){return t.customSort(e)}),P.bc(8,"async"),P.Fc(9,ft,40,0,"ng-template",6),P.Fc(10,It,39,26,"ng-template",7),P.Fc(11,zt,4,4,"ng-template",8),P.Pb(),P.Pb(),P.Pb(),P.Qb(12,"div",9),P.Fc(13,Ct,3,0,"ng-container",10),P.Fc(14,xt,9,3,"ng-template",null,11,P.Gc),P.Pb(),P.Qb(16,"form",12),P.Xb("ngSubmit",function(){return t.confirmSend()}),P.Qb(17,"p-dialog",13),P.Xb("visibleChange",function(e){return t.confirmDialog=e}),P.Fc(18,Rt,4,0,"ng-template",14),P.Fc(19,qt,2,0,"ng-template",15),P.Pb(),P.Pb()),2&e){const e=P.vc(15);P.zb(5),P.hc("ngForOf",P.cc(6,18,t.requests$)),P.zb(2),P.hc("value",P.cc(8,20,t.requests$))("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",P.lc(22,Nt))("selection",t.selectedItems)("paginator",!0)("metaKeySelection",!0)("customSort",!0),P.zb(6),P.hc("ngIf",!t.selectedRequest)("ngIfElse",e),P.zb(3),P.hc("formGroup",t.confirmForm),P.zb(1),P.Dc(P.lc(23,Tt)),P.hc("visible",t.confirmDialog)("modal",!0)("draggable",!1)("resizable",!1)}},directives:[ct.a,st.a,F.i,y.m,S.h,y.n,z.y,z.q,z.h,W.a,H.b,ot.a,S.j,S.g,S.f,S.d,S.i,rt.a,y.p,y.q,x.a,G.b,G.a,ut,Pt,z.b,C.a,z.p,z.f],pipes:[y.b,y.f,y.d],styles:[""]}),e})();var Ot=i("tyNb");const Mt=[{path:"",children:[{path:"",component:kt}]}];let Et=(()=>{class e{}return e.\u0275mod=P.Ib({type:e}),e.\u0275inj=P.Hb({factory:function(t){return new(t||e)},imports:[[Ot.j.forChild(Mt)],Ot.j]}),e})();var jt=i("QIUk"),$t=i("lVkt"),At=i("+DzE"),Bt=i("+la4"),Xt=i("Ji6n"),Vt=i("LuMj"),Kt=i("zFJ7"),_t=i("b1Ni"),Ut=i("+F6F"),Jt=i("99NH");const Gt={data:null,isLoading:!1,error:null,crudError:null,crudSuccessMessage:null,isSubmitting:!1},Wt=Object(l.p)(Gt,Object(l.r)(u,e=>Object.assign(Object.assign({},e),{isSubmitting:!0,crudSuccessMessage:null,crudError:null})),Object(l.r)(m,(e,t)=>Object.assign(Object.assign({},e),{isSubmitting:!1,crudSuccessMessage:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e"})),Object(l.r)(p,(e,t)=>Object.assign(Object.assign({},e),{isSubmitting:!1,crudSuccessMessage:null,crudError:t.errors})),Object(l.r)(h,(e,t)=>Object.assign(Object.assign({},e),{crudError:t.errors})),Object(l.r)(Jt.b,()=>Gt));function Zt(e,t){return Wt(e,t)}var Yt=i("NCSE");let ei=(()=>{class e{}return e.\u0275mod=P.Ib({type:e}),e.\u0275inj=P.Hb({factory:function(t){return new(t||e)},providers:[I.a,f.a,v.a,_.a,F.g,U.a],imports:[[y.c,C.b,ct.b,G.c,Xt.b,H.c,Vt.a,ot.b,I.c,Kt.b,W.b,Y.b,Yt.a,x.b,Bt.a,ee.b,S.k,J.b,rt.b,z.j,At.b,st.b,$t.b,c.b.forFeature([Q]),l.j.forFeature("requests",Zt),b.a,n.a,Et,z.v,jt.b,_t.a,Ut.a]]}),e})()}}]);