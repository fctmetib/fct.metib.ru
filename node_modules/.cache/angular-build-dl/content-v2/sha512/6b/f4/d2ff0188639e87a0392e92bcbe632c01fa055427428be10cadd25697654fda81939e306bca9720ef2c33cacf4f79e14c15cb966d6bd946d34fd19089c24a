!function(){function t(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,n,e){return n&&i(t.prototype,n),e&&i(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{BMXd:function(n,i,o){"use strict";o.r(i),o.d(i,"ContractsModule",function(){return Lt});var r,a,s=o("0s3d"),l=o("ofXK"),b=o("arFO"),u=o("QIUk"),p=o("jIHw"),d=o("rEr+"),h=o("lVkt"),g=o("+DzE"),f=o("+la4"),m=o("3Pt+"),y=o("7kUa"),v=o("Ji6n"),P=o("LuMj"),C=o("zFJ7"),O=o("b1Ni"),D=o("+F6F"),w=o("tyNb"),M=o("xrr7"),_=o("quSY"),S=o("fXoL"),x=new S.q("WindowToken","undefined"!=typeof window&&window.document?{providedIn:"root",factory:function(){return window}}:{providedIn:"root",factory:function(){}}),k=o("XNiG"),z=((a=function(){function t(n,i){e(this,t),this.document=n,this.window=i,this.copySubject=new k.a,this.copyResponse$=this.copySubject.asObservable(),this.config={}}return c(t,[{key:"configure",value:function(t){this.config=t}},{key:"copy",value:function(t){if(!this.isSupported||!t)return this.pushCopyResponse({isSuccess:!1,content:t});var n=this.copyFromContent(t);return this.pushCopyResponse(n?{content:t,isSuccess:n}:{isSuccess:!1,content:t})}},{key:"isTargetValid",value:function(t){if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement){if(t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');return!0}throw new Error("Target should be input or textarea")}},{key:"copyFromInputElement",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{this.selectTarget(t);var e=this.copyText();return this.clearSelection(n?t:void 0,this.window),e&&this.isCopySuccessInIE11()}catch(i){return!1}}},{key:"isCopySuccessInIE11",value:function(){var t=this.window.clipboardData;return!(t&&t.getData&&!t.getData("Text"))}},{key:"copyFromContent",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.document.body;if(this.tempTextArea&&!n.contains(this.tempTextArea)&&this.destroy(this.tempTextArea.parentElement||void 0),!this.tempTextArea){this.tempTextArea=this.createTempTextArea(this.document,this.window);try{n.appendChild(this.tempTextArea)}catch(i){throw new Error("Container should be a Dom element")}}this.tempTextArea.value=t;var e=this.copyFromInputElement(this.tempTextArea,!1);return this.config.cleanUpAfterCopy&&this.destroy(this.tempTextArea.parentElement||void 0),e}},{key:"destroy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.document.body;this.tempTextArea&&(t.removeChild(this.tempTextArea),this.tempTextArea=void 0)}},{key:"selectTarget",value:function(t){return t.select(),t.setSelectionRange(0,t.value.length),t.value.length}},{key:"copyText",value:function(){return this.document.execCommand("copy")}},{key:"clearSelection",value:function(t,n){var e;t&&t.focus(),null===(e=n.getSelection())||void 0===e||e.removeAllRanges()}},{key:"createTempTextArea",value:function(t,n){var e,i="rtl"===t.documentElement.getAttribute("dir");return(e=t.createElement("textarea")).style.fontSize="12pt",e.style.border="0",e.style.padding="0",e.style.margin="0",e.style.position="absolute",e.style[i?"right":"left"]="-9999px",e.style.top=(n.pageYOffset||t.documentElement.scrollTop)+"px",e.setAttribute("readonly",""),e}},{key:"pushCopyResponse",value:function(t){this.copySubject.next(t)}},{key:"pushCopyReponse",value:function(t){this.pushCopyResponse(t)}},{key:"isSupported",get:function(){return!!this.document.queryCommandSupported&&!!this.document.queryCommandSupported("copy")&&!!this.window}}]),t}()).\u0275fac=function(t){return new(t||a)(S.Ub(l.e),S.Ub(x,8))},a.\u0275prov=Object(S.Gb)({factory:function(){return new a(Object(S.Ub)(l.e),Object(S.Ub)(x,8))},token:a,providedIn:"root"}),a),Q=((r=function t(){e(this,t)}).\u0275mod=S.Ib({type:r}),r.\u0275inj=S.Hb({factory:function(t){return new(t||r)},imports:[[l.c]]}),r),F=o("5EWq"),T=o("7zfz"),I=o("6t4m"),A=o("/RsI"),E=o("jeV5"),L=o("xlun"),R=o("DVgK"),H=["paginator"];function N(t,n){if(1&t){var e=S.Rb();S.Qb(0,"div"),S.Qb(1,"button",12),S.Xb("click",function(){return S.yc(e),S.ac().showAllToggle()}),S.Pb(),S.Qb(2,"button",13),S.Xb("click",function(){return S.yc(e),S.ac().updateData()}),S.Pb(),S.Pb(),S.Qb(3,"div"),S.Qb(4,"p-dropdown",14),S.Xb("ngModelChange",function(t){return S.yc(e),S.ac().onDebtorChange(t)}),S.Pb(),S.Pb()}if(2&t){var i=S.ac();S.zb(1),S.ic("label",i.btnShowAllText),S.zb(3),S.hc("options",i.debtorsList)("ngModel",i.selectedDebtorDisplay)}}function $(t,n){1&t&&(S.Qb(0,"div",17),S.Qb(1,"div",18),S.Qb(2,"div",19),S.Lb(3,"p-skeleton",20),S.Pb(),S.Qb(4,"div",21),S.Lb(5,"p-skeleton",20),S.Pb(),S.Qb(6,"div",22),S.Lb(7,"p-skeleton",20),S.Pb(),S.Pb(),S.Qb(8,"div",23),S.Qb(9,"div",24),S.Lb(10,"p-skeleton",20),S.Pb(),S.Qb(11,"div",25),S.Hc(12,"\u0423\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u043e "),S.Pb(),S.Pb(),S.Qb(13,"div",26),S.Qb(14,"div",24),S.Lb(15,"p-skeleton",20),S.Pb(),S.Qb(16,"div",25),S.Hc(17,"\u041f\u0440\u043e\u0441\u0440\u043e\u0447\u043a\u0430"),S.Pb(),S.Pb(),S.Qb(18,"div",27),S.Qb(19,"div",24),S.Lb(20,"p-skeleton",20),S.Pb(),S.Qb(21,"div",25),S.Hc(22,"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0439 \u043b\u0438\u043c\u0438\u0442"),S.Pb(),S.Pb(),S.Pb())}var j=function(){return[1,2,3,4,5]};function U(t,n){1&t&&(S.Ob(0),S.Qb(1,"div",15),S.Fc(2,$,23,0,"div",16),S.Pb(),S.Nb()),2&t&&(S.zb(2),S.hc("ngForOf",S.lc(1,j)))}function B(t,n){if(1&t){var e=S.Rb();S.Qb(0,"div",17),S.Qb(1,"div",18),S.Qb(2,"div",28),S.Qb(3,"div",29),S.Hc(4),S.Lb(5,"div",30),S.Pb(),S.Qb(6,"div",31),S.Qb(7,"div",32),S.Xb("click",function(){S.yc(e);var t=n.$implicit;return S.ac(2).showPropertyDialog(t.ID)}),S.Lb(8,"i",33),S.Pb(),S.Qb(9,"div",34),S.Xb("click",function(){S.yc(e);var t=n.$implicit;return S.ac(2).showShipmentsDialog(t.ID)}),S.Lb(10,"i",35),S.Pb(),S.Pb(),S.Pb(),S.Qb(11,"div",21),S.Hc(12),S.bc(13,"date"),S.Qb(14,"div",22),S.Qb(15,"span",36),S.Hc(16),S.Pb(),S.Hc(17),S.Pb(),S.Pb(),S.Pb(),S.Qb(18,"div",23),S.Qb(19,"div",24),S.Hc(20),S.bc(21,"currency"),S.Pb(),S.Qb(22,"div",25),S.Hc(23,"\u0423\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u043e"),S.Pb(),S.Pb(),S.Qb(24,"div",26),S.Qb(25,"div",24),S.Hc(26),S.bc(27,"currency"),S.Pb(),S.Qb(28,"div",25),S.Hc(29,"\u041f\u0440\u043e\u0441\u0440\u043e\u0447\u043a\u0430"),S.Pb(),S.Pb(),S.Qb(30,"div",27),S.Qb(31,"div",24),S.Hc(32),S.bc(33,"currency"),S.Pb(),S.Qb(34,"div",25),S.Hc(35,"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0439 \u043b\u0438\u043c\u0438\u0442"),S.Pb(),S.Pb(),S.Pb()}if(2&t){var i=n.$implicit;S.zb(4),S.Jc(" ",i.Debtor.Title," "),S.zb(8),S.Kc("",i.Number," \u043e\u0442 ",S.dc(13,8,i.DateFrom,"dd.MM.yyyy")," "),S.zb(4),S.Jc("",i.Tariff,","),S.zb(1),S.Jc(" ",i.Delay.Count," \u043a.\u0434."),S.zb(3),S.Ic(S.dc(21,11,null==i||null==i.Statistics?null:i.Statistics.DutyCustomer,"RUB")),S.zb(6),S.Ic(S.dc(27,14,null==i||null==i.Statistics?null:i.Statistics.DutyDebtor,"RUB")),S.zb(6),S.Ic(S.dc(33,17,null==i||null==i.Statistics?null:i.Statistics.FreeLimit,"RUB"))}}function X(t,n){if(1&t&&(S.Qb(0,"div",15),S.Fc(1,B,36,20,"div",16),S.Pb()),2&t){var e=S.ac();S.zb(1),S.hc("ngForOf",e.listDisplayContracts)}}function J(t,n){1&t&&(S.Ob(0),S.Qb(1,"p",37),S.Hc(2,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),S.Pb(),S.Nb())}function K(t,n){1&t&&(S.Ob(0),S.Lb(1,"metib-backend-error-messages",39),S.Nb()),2&t&&(S.zb(1),S.hc("backendErrors","\u041e\u0448\u0438\u0431\u043a\u0430! \u0423 \u0412\u0430\u0441 \u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430, \u043a \u044d\u0442\u043e\u0439 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438."))}function q(t,n){if(1&t&&(S.Ob(0),S.Hc(1),S.Lb(2,"br"),S.Nb()),2&t){var e=n.$implicit;S.zb(1),S.Jc(" ",e," ")}}function G(t,n){if(1&t&&(S.Qb(0,"p",37),S.Fc(1,q,3,1,"ng-container",40),S.Pb()),2&t){var e=S.ac(2);S.zb(1),S.hc("ngForOf",e.getOrganizationList())}}function W(t,n){if(1&t&&(S.Fc(0,K,2,1,"ng-container",3),S.Fc(1,G,2,1,"ng-template",null,38,S.Gc)),2&t){var e=S.vc(2),i=S.ac();S.hc("ngIf",i.isOrganizationError)("ngIfElse",e)}}function V(t,n){if(1&t){var e=S.Rb();S.Qb(0,"p-button",41),S.Xb("click",function(){return S.yc(e),S.ac().copyDynamicText()}),S.Pb(),S.Qb(1,"p-button",42),S.Xb("click",function(){return S.yc(e),S.ac().displayProperty=!1}),S.Pb()}}function Z(t,n){1&t&&(S.Ob(0),S.Qb(1,"p",37),S.Hc(2,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),S.Pb(),S.Nb())}function Y(t,n){1&t&&(S.Ob(0),S.Lb(1,"metib-backend-error-messages",39),S.Nb()),2&t&&(S.zb(1),S.hc("backendErrors","\u041e\u0448\u0438\u0431\u043a\u0430!"))}var tt=function(){return{minWidth:"200px"}};function nt(t,n){if(1&t){var e=S.Rb();S.Qb(0,"p-multiSelect",48),S.Xb("ngModelChange",function(t){return S.yc(e),S.ac(3).selectedColumns=t}),S.Pb(),S.Qb(1,"div",49),S.Xb("click",function(){return S.yc(e),S.ac(3).exportExcel()}),S.Lb(2,"img",50),S.Pb()}if(2&t){var i=S.ac(3);S.Dc(S.lc(4,tt)),S.hc("options",i.cols)("ngModel",i.selectedColumns)}}function et(t,n){if(1&t&&(S.Qb(0,"th"),S.Qb(1,"div",51),S.Qb(2,"div"),S.Hc(3),S.Pb(),S.Pb(),S.Pb()),2&t){var e=n.$implicit;S.zb(3),S.Jc(" ",e.header," ")}}function it(t,n){if(1&t&&(S.Qb(0,"tr"),S.Fc(1,et,4,1,"th",40),S.Pb()),2&t){var e=n.$implicit;S.zb(1),S.hc("ngForOf",e)}}function ct(t,n){if(1&t&&(S.Ob(0),S.Qb(1,"div",55),S.Qb(2,"div"),S.Hc(3),S.bc(4,"date"),S.Pb(),S.Pb(),S.Nb()),2&t){var e=S.ac().$implicit,i=S.ac().$implicit;S.zb(3),S.Jc(" ",S.dc(4,1,i[e.field],"dd.MM.yyyy")," ")}}function ot(t,n){if(1&t&&(S.Ob(0),S.Qb(1,"div",55),S.Qb(2,"div"),S.Hc(3),S.bc(4,"date"),S.Pb(),S.Pb(),S.Nb()),2&t){var e=S.ac().$implicit,i=S.ac().$implicit;S.zb(3),S.Jc(" ",S.dc(4,1,i[e.field],"dd.MM.yyyy")," ")}}function rt(t,n){if(1&t&&(S.Ob(0),S.Qb(1,"div",55),S.Qb(2,"div"),S.Hc(3),S.bc(4,"date"),S.Pb(),S.Pb(),S.Nb()),2&t){var e=S.ac().$implicit,i=S.ac().$implicit;S.zb(3),S.Jc(" ",S.dc(4,1,i[e.field],"dd.MM.yyyy")," ")}}function at(t,n){if(1&t&&(S.Ob(0),S.Qb(1,"div",56),S.Qb(2,"div"),S.Hc(3),S.bc(4,"currency"),S.Pb(),S.Pb(),S.Nb()),2&t){var e=S.ac().$implicit,i=S.ac().$implicit;S.zb(3),S.Jc(" ",S.ec(4,1,i[e.field],"RUB","symbol-narrow")," ")}}function st(t,n){if(1&t&&(S.Ob(0),S.Qb(1,"div",56),S.Qb(2,"div"),S.Hc(3),S.bc(4,"currency"),S.Pb(),S.Pb(),S.Nb()),2&t){var e=S.ac().$implicit,i=S.ac().$implicit;S.zb(3),S.Jc(" ",S.ec(4,1,i[e.field],"RUB","symbol-narrow")," ")}}function lt(t,n){if(1&t&&(S.Ob(0),S.Qb(1,"div",56),S.Qb(2,"div"),S.Hc(3),S.bc(4,"currency"),S.Pb(),S.Pb(),S.Nb()),2&t){var e=S.ac().$implicit,i=S.ac().$implicit;S.zb(3),S.Jc(" ",S.ec(4,1,i[e.field],"RUB","symbol-narrow")," ")}}function bt(t,n){if(1&t&&(S.Ob(0),S.Qb(1,"div",55),S.Qb(2,"div"),S.Hc(3),S.Pb(),S.Pb(),S.Nb()),2&t){var e=S.ac().$implicit,i=S.ac().$implicit;S.zb(3),S.Jc(" ",i[e.field]," ")}}function ut(t,n){if(1&t&&(S.Qb(0,"td"),S.Ob(1,52),S.Fc(2,ct,5,4,"ng-container",53),S.Fc(3,ot,5,4,"ng-container",53),S.Fc(4,rt,5,4,"ng-container",53),S.Fc(5,at,5,5,"ng-container",53),S.Fc(6,st,5,5,"ng-container",53),S.Fc(7,lt,5,5,"ng-container",53),S.Fc(8,bt,4,1,"ng-container",54),S.Nb(),S.Pb()),2&t){var e=n.$implicit;S.zb(1),S.hc("ngSwitch",e.field),S.zb(1),S.hc("ngSwitchCase","DateAddon"),S.zb(1),S.hc("ngSwitchCase","DatePayment"),S.zb(1),S.hc("ngSwitchCase","DateShipment"),S.zb(1),S.hc("ngSwitchCase","Summ"),S.zb(1),S.hc("ngSwitchCase","DutyDebtor"),S.zb(1),S.hc("ngSwitchCase","DutyCustomer")}}function pt(t,n){if(1&t&&(S.Qb(0,"tr"),S.Fc(1,ut,9,7,"td",40),S.Pb()),2&t){var e=n.columns;S.zb(1),S.hc("ngForOf",e)}}function dt(t,n){if(1&t&&(S.Ob(0),S.Qb(1,"div",57),S.Hc(2),S.bc(3,"currency"),S.Pb(),S.Nb()),2&t){var e=S.ac(5);S.zb(2),S.Jc(" ",S.ec(3,1,e.getSumDutyDebtor(),"RUB","symbol")," ")}}function ht(t,n){if(1&t&&(S.Ob(0),S.Qb(1,"div",57),S.Hc(2),S.bc(3,"currency"),S.Pb(),S.Nb()),2&t){var e=S.ac(5);S.zb(2),S.Jc(" ",S.ec(3,1,e.getSumDutyCustomer(),"RUB","symbol")," ")}}function gt(t,n){1&t&&S.Mb(0)}function ft(t,n){if(1&t&&(S.Qb(0,"td"),S.Ob(1,52),S.Fc(2,dt,4,5,"ng-container",53),S.Fc(3,ht,4,5,"ng-container",53),S.Fc(4,gt,1,0,"ng-container",54),S.Nb(),S.Pb()),2&t){var e=n.$implicit;S.zb(1),S.hc("ngSwitch",e.field),S.zb(1),S.hc("ngSwitchCase","DutyDebtor"),S.zb(1),S.hc("ngSwitchCase","DutyCustomer")}}function mt(t,n){if(1&t&&(S.Qb(0,"tr"),S.Fc(1,ft,5,3,"td",40),S.Pb()),2&t){var e=S.ac(3);S.zb(1),S.hc("ngForOf",e.selectedColumns)}}function yt(t,n){if(1&t&&(S.Qb(0,"p-table",44),S.Fc(1,nt,3,5,"ng-template",45),S.Fc(2,it,2,1,"ng-template",46),S.Fc(3,pt,2,1,"ng-template",47),S.Fc(4,mt,2,1,"ng-template",9),S.Pb()),2&t){var e=S.ac(2);S.hc("columns",e.selectedColumns)("value",e.currentShipments)}}function vt(t,n){if(1&t&&(S.Fc(0,Y,2,1,"ng-container",3),S.Fc(1,yt,5,2,"ng-template",null,43,S.Gc)),2&t){var e=S.vc(2),i=S.ac();S.hc("ngIf",i.isShipmentsError)("ngIfElse",e)}}function Pt(t,n){if(1&t){var e=S.Rb();S.Qb(0,"p-button",58),S.Xb("click",function(){return S.yc(e),S.ac().displayProperty=!1}),S.Pb()}}function Ct(t,n){if(1&t){var e=S.Rb();S.Qb(0,"p-button",58),S.Xb("click",function(){return S.yc(e),S.ac().displayShipments=!1}),S.Pb()}}var Ot,Dt,wt,Mt,_t=function(t){return{hidden:t}},St=function(){return{width:"50vw"}},xt=function(){return{width:"90vw"}},kt=[{path:"",children:[{path:"",component:(Ot=function(){function n(t,i){e(this,n),this.deliveryService=t,this._clipboardService=i,this.noFilter=!0,this.isLoading=!1,this.listContracts=[],this.listContractsFiltered=[],this.isPagination=!0,this.btnShowAllText="\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0451",this.listDisplayContracts=[],this.type="current",this.paginationPage=0,this.paginationRows=10,this.displayProperty=!1,this.displayShipments=!1,this.debtorsList=[],this.selectedDebtorDisplay={ID:0,Title:"\u0412\u0441\u0435"},this.selectedDebtor={ID:0,Title:"\u0412\u0441\u0435"},this.isOrganizationError=!1,this.isOrganizationLoading=!1,this.currentOrganization={ABSID:0,Account:{BIK:"",Bank:"",COR:"",Number:""},Accountant:"",CustomerID:0,DebtorID:0,Description:"",Email:"",ID:0,INN:"",KPP:"",LegalForm:"",OGRN:"",OKATO:"",OKPO:"",OKVED:"",RegDate:new Date,RegRegion:"",Signer:{FIO:"",Position:"",Reason:""},State:"",Telephone:"",Title:"",WebSite:""},this.isShipmentsError=!1,this.isShipmentsLoading=!1,this.currentShipments=[],this.subscription$=new _.a}return c(n,[{key:"ngOnInit",value:function(){this.fetch(),this.cols=[{field:"ID",header:"ID"},{field:"Account",header:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"},{field:"DateAddon",header:"\u0414\u0430\u0442\u0430 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"},{field:"DatePayment",header:"\u0414\u0430\u0442\u0430 \u043e\u043f\u043b\u0430\u0442\u0430"},{field:"DateShipment",header:"\u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438"},{field:"DutyCustomer",header:"\u0417\u0430\u0434\u043e\u043b\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u0434\u0435\u0431\u0442\u043e\u0440\u0430"},{field:"DutyDebtor",header:"\u0417\u0430\u0434\u043e\u043b\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430"}],this._selectedColumns=this.cols}},{key:"showPropertyDialog",value:function(t){var n=this;this.displayProperty=!0,this.isOrganizationLoading=!0,this.isOrganizationError=!1,this.subscription$.add(this.deliveryService.getRequisitesByDeliveryId(t).subscribe(function(t){n.currentOrganizationContent=t,n.isOrganizationLoading=!1},function(t){n.isOrganizationError=!0,n.isOrganizationLoading=!1}))}},{key:"getSumDutyDebtor",value:function(){if(this.cols.find(function(t){return"DutyDebtor"===t.field}))return this.currentShipments.reduce(function(t,n){return t+n.DutyDebtor},0)}},{key:"getSumDutyCustomer",value:function(){if(this.cols.find(function(t){return"DutyCustomer"===t.field}))return this.currentShipments.reduce(function(t,n){return t+n.DutyCustomer},0)}},{key:"showShipmentsDialog",value:function(t){var n=this;this.displayShipments=!0,this.isShipmentsLoading=!0,this.isShipmentsError=!1,this.subscription$.add(this.deliveryService.getShipments(t).subscribe(function(t){n.currentShipments=t,n.isShipmentsLoading=!1},function(t){n.isShipmentsError=!0,n.isShipmentsLoading=!1}))}},{key:"getAccountInfo",value:function(t){var n=this.currentShipments.find(function(n){return n.ID===t});return n.Waybill?n.Waybill:n.Account?n.Account:n.Request.Number?n.Request.Number:""}},{key:"getOrganizationList",value:function(){if(this.currentOrganizationContent)return this.currentOrganizationContent.split("\n")}},{key:"copyDynamicText",value:function(){this._clipboardService.copyFromContent(this.currentOrganizationContent)}},{key:"showAllToggle",value:function(){"all"===this.type?(this.btnShowAllText="\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0451",this.type="current"):"current"===this.type&&(this.btnShowAllText="\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435",this.type="all"),this.updateDisplayData(this.type,this.selectedDebtor.ID)}},{key:"updateDisplayData",value:function(t,n){var e,i=this.listContracts,c=[];"current"===t&&(c=this.getCurrentList(i)),"all"===t&&(c=i),e=n?c.filter(function(t){return t.Debtor.ID===n}):c,this.listContractsFiltered=e,this.paginateData()}},{key:"paginateData",value:function(t){if(this.listDisplayContracts=[],t){this.paginationPage=t.page;var n=t.page*t.rows;this.listDisplayContracts=this.listContractsFiltered.slice(n,n+t.rows)}else{var e=this.paginationPage*this.paginationRows;this.updateCurrentPage(e),this.listDisplayContracts=this.listContractsFiltered.slice(e,e+this.paginationRows)}}},{key:"getCurrentList",value:function(t){return t.filter(function(t){return new Date(t.DateTo)>new Date})}},{key:"updateData",value:function(){this.fetch()}},{key:"paginate",value:function(t){if(this.noFilter=!0,this.listDisplayContracts=[],t){this.paginationPage=t.page;var n=t.page*t.rows;this.listDisplayContracts=this.listContractsFiltered.slice(n,n+t.rows)}else{var e=this.paginationPage*this.paginationRows;this.updateCurrentPage(e),this.listDisplayContracts=this.listContractsFiltered.slice(e,e+this.paginationRows)}}},{key:"onDebtorChange",value:function(t){if(0===t)this.selectedDebtor={ID:0,Title:"\u0412\u0441\u0435"},this.btnShowAllText="\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0451",this.type="current",this.updateDisplayData(this.type,this.selectedDebtor.ID);else{var n=this.debtorsList.find(function(n){return n.ID===t});this.selectedDebtor={ID:t,Title:n.Title},this.paginationPage=0,this.paginationRows=10,this.updateDisplayData(this.type,this.selectedDebtor.ID)}}},{key:"fetch",value:function(){var n=this;this.isLoading=!0,this.subscription$.add(this.deliveryService.getDeliveriesWithStats().subscribe(function(e){var i;n.listContracts=e.sort(function(t,n){return new Date(n.DateFrom).getTime()-new Date(t.DateFrom).getTime()}),n.filterByDate(),n.paginate(),n.selectedDebtorDisplay={ID:0,Title:"\u0412\u0441\u0435"},n.selectedDebtor={ID:0,Title:"\u0412\u0441\u0435"},n.debtorsList=[{ID:0,Title:"\u0412\u0441\u0435"}];var c=n.listContracts.map(function(t){return t.Debtor}),o=M.a.getUniqByProperty(c,"Title");(i=n.debtorsList).push.apply(i,t(o)),n.isLoading=!1}))}},{key:"updateCurrentPage",value:function(t){this.paginator.changePage(t)}},{key:"filterByDate",value:function(){this.listContractsFiltered=this.listContracts.filter(function(t){return new Date(t.DateTo)>new Date}),console.log(this.listContractsFiltered)}},{key:"ngOnDestroy",value:function(){this.subscription$.unsubscribe()}},{key:"exportExcel",value:function(){var t=this;o.e(5).then(o.t.bind(null,"EUZL",7)).then(function(n){var e=[];console.log("shipments",t.currentShipments),console.log("cols",t.cols),t.currentShipments.forEach(function(n){var i={};t.cols.forEach(function(t){i[t.field]=n[t.field]}),e.push(i)});var i=n.utils.json_to_sheet(e),c=n.write({Sheets:{data:i},SheetNames:["data"]},{bookType:"xlsx",type:"array"});t._saveAsExcelFile(c,"\u043e\u0442\u0447\u0435\u0442")})}},{key:"_saveAsExcelFile",value:function(t,n){o.e(7).then(o.t.bind(null,"Iab2",7)).then(function(e){var i=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});e.saveAs(i,n+"_export_"+(new Date).getTime()+".xlsx")})}},{key:"selectedColumns",get:function(){return this._selectedColumns},set:function(t){this._selectedColumns=this.cols.filter(function(n){return t.includes(n)})}}]),n}(),Ot.\u0275fac=function(t){return new(t||Ot)(S.Kb(s.a),S.Kb(z))},Ot.\u0275cmp=S.Eb({type:Ot,selectors:[["app-contracts-page"]],viewQuery:function(t,n){var e;1&t&&S.Nc(H,!0),2&t&&S.uc(e=S.Yb())&&(n.paginator=e.first)},inputs:{selectedColumns:"selectedColumns"},decls:19,vars:27,consts:[["id","step1",1,"card-content"],["styleClass","p-mb-4 ml-0 additional-actions"],["pTemplate","left"],[4,"ngIf","ngIfElse"],["contentTemplate",""],[3,"rows","totalRecords","ngClass","onPageChange"],["paginator",""],["header","\u0420\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b",3,"visible","modal","baseZIndex","draggable","resizable","visibleChange"],["organizationTemplate",""],["pTemplate","footer"],["header","\u0422\u043e\u0432\u0430\u0440\u043d\u044b\u0435 \u041d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0435",3,"visible","modal","baseZIndex","draggable","resizable","visibleChange"],["shipmentsTemplate",""],["type","button","pButton","",1,"basic","p-mr-2",3,"label","click"],["type","button","pButton","","label","\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435",1,"basic","p-mr-2",3,"click"],["placeholder","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0435\u0431\u0438\u0442\u043e\u0440\u0430","optionLabel","Title","optionValue","ID",1,"fix-width--200",3,"options","ngModel","ngModelChange"],[1,"contracts-list"],["class","contract-item",4,"ngFor","ngForOf"],[1,"contract-item"],[1,"contract-info","item"],[1,"contract-name"],["width","10rem","styleClass","p-mb-2"],[1,"contract-number"],[1,"contract-type"],[1,"contract-step","item"],[1,"price"],[1,"description"],[1,"contract-delay","item"],[1,"contract-limit","item"],[1,"contract-info-name"],[1,"contract-name","can-click"],[1,"icon","arrow_right"],[1,"contract-actions"],["pTooltip","\u0420\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b",1,"icon",3,"click"],[1,"pi","pi-book"],["pTooltip","\u0421\u043f\u0438\u0441\u043e\u043a \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0445",1,"icon",3,"click"],[1,"pi","pi-list"],[1,"main-color"],[1,"p-m-0"],["noErrorOrganizationTemplate",""],[3,"backendErrors"],[4,"ngFor","ngForOf"],["label","\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c","styleClass","p-button-text",3,"click"],["label","\u0417\u0430\u043a\u0440\u044b\u0442\u044c","styleClass","p-button-text",3,"click"],["noErrorShipmentsTemplate",""],["dataKey","ID","styleClass","p-datatable-customers mib-table header-add h-500",3,"columns","value"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["optionLabel","header","selectedItemsLabel","\u0412\u044b\u0431\u0440\u0430\u043d\u043e \u043a\u043e\u043b\u043e\u043d\u043e\u043a - {0}","placeholder","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043e\u043b\u043e\u043d\u043a\u0438",3,"options","ngModel","ngModelChange"],["pTooltip","\u042d\u043a\u0441\u043f\u043e\u0440\u0442 \u0444\u0430\u0439\u043b\u0430 Excel",1,"mib-action","mib-button-icon","excel-icon","can-click",3,"click"],["src","../../../../../../assets/icons/mib-excel.png","alt",""],[1,"m-th"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"m-td"],[1,"m-td","currency"],[2,"text-align","right"],["icon","pi pi-check","label","\u0417\u0430\u043a\u0440\u044b\u0442\u044c","styleClass","p-button-text",3,"click"]],template:function(t,n){if(1&t&&(S.Qb(0,"div",0),S.Qb(1,"p-toolbar",1),S.Fc(2,N,5,3,"ng-template",2),S.Pb(),S.Fc(3,U,3,2,"ng-container",3),S.Fc(4,X,2,1,"ng-template",null,4,S.Gc),S.Qb(6,"p-paginator",5,6),S.Xb("onPageChange",function(t){return n.paginate(t)}),S.Pb(),S.Pb(),S.Qb(8,"p-dialog",7),S.Xb("visibleChange",function(t){return n.displayProperty=t}),S.Fc(9,J,3,0,"ng-container",3),S.Fc(10,W,3,2,"ng-template",null,8,S.Gc),S.Fc(12,V,2,0,"ng-template",9),S.Pb(),S.Qb(13,"p-dialog",10),S.Xb("visibleChange",function(t){return n.displayShipments=t}),S.Fc(14,Z,3,0,"ng-container",3),S.Fc(15,vt,3,2,"ng-template",null,11,S.Gc),S.Fc(17,Pt,1,0,"ng-template",9),S.Fc(18,Ct,1,0,"ng-template",9),S.Pb()),2&t){var e=S.vc(5),i=S.vc(11),c=S.vc(16);S.zb(3),S.hc("ngIf",n.isLoading)("ngIfElse",e),S.zb(3),S.ic("totalRecords",n.listContractsFiltered.length),S.hc("rows",10)("ngClass",S.mc(23,_t,!n.noFilter)),S.zb(2),S.Dc(S.lc(25,St)),S.hc("visible",n.displayProperty)("modal",!0)("baseZIndex",1e4)("draggable",!1)("resizable",!1),S.zb(1),S.hc("ngIf",n.isOrganizationLoading)("ngIfElse",i),S.zb(4),S.Dc(S.lc(26,xt)),S.hc("visible",n.displayShipments)("modal",!0)("baseZIndex",1e4)("draggable",!1)("resizable",!1),S.zb(1),S.hc("ngIf",n.isShipmentsLoading)("ngIfElse",c)}},directives:[F.a,T.i,l.n,I.a,l.l,A.a,p.b,b.a,m.p,m.s,l.m,E.a,L.a,R.a,p.a,d.h,h.a,l.p,l.q,l.r],pipes:[l.f,l.d],styles:[".contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]{display:flex;margin-bottom:10px}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:12px;border-radius:10px;border:1px solid #d4d4d4}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .contract-info[_ngcontent-%COMP%]{width:100%;min-width:400px;display:flex;flex-direction:column;justify-content:center}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .contract-info[_ngcontent-%COMP%]   .contract-info-name[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .contract-info[_ngcontent-%COMP%]   .contract-actions[_ngcontent-%COMP%]{display:flex;margin-bottom:10px}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .contract-info[_ngcontent-%COMP%]   .contract-actions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:10px;font-size:2rem;color:#0c83f1}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .contract-info[_ngcontent-%COMP%]   .contract-actions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .icon-own[_ngcontent-%COMP%]{font-size:2rem;color:#0c83f1}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .contract-info[_ngcontent-%COMP%]   .contract-name[_ngcontent-%COMP%]{display:flex;font-size:1.2rem;font-weight:500;margin-bottom:8px;align-items:center}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .contract-info[_ngcontent-%COMP%]   .contract-name[_ngcontent-%COMP%]   .icon.arrow_right[_ngcontent-%COMP%]{margin-left:13px;background:url(/assets/icons/arrow_right.png) no-repeat 50%;width:20px;height:20px}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .contract-info[_ngcontent-%COMP%]   .contract-number[_ngcontent-%COMP%]{font-size:.875rem;margin-bottom:9px;color:#989898;display:flex;justify-content:space-between}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .contract-step[_ngcontent-%COMP%]{text-align:center;width:40%;min-width:220px}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .contract-step[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#69cf74;height:47px}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .contract-step[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;display:flex;align-items:center;justify-content:center}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .contract-step[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:10px;font-size:2rem;color:#0c83f1}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .contract-delay[_ngcontent-%COMP%]{text-align:center;width:40%;min-width:220px}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .contract-delay[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#e74630;height:47px}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .contract-delay[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;justify-content:end}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .contract-limit[_ngcontent-%COMP%]{text-align:center;width:40%;min-width:220px}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .contract-limit[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#0c83f1;height:47px}.contracts-list[_ngcontent-%COMP%]   .contract-item[_ngcontent-%COMP%]   .contract-limit[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;justify-content:end}.contracts-list[_ngcontent-%COMP%]   .main-color[_ngcontent-%COMP%]{color:#0c83f1}.p-dialog-content[_ngcontent-%COMP%]{height:500px!important}[_nghost-%COMP%]   .p-datatable[_ngcontent-%COMP%]   .p-datatable-header[_ngcontent-%COMP%]{padding-left:0;padding-right:0;display:flex;justify-content:space-between}"]}),Ot)}]}],zt=((Dt=function t(){e(this,t)}).\u0275mod=S.Ib({type:Dt}),Dt.\u0275inj=S.Hb({factory:function(t){return new(t||Dt)},imports:[[w.j.forChild(kt)],w.j]}),Dt),Qt=o("B16f"),Ft=o("i4ku"),Tt=o("eUBX"),It=o("AytR"),At=o("tk/3"),Et=((Mt=function(){function t(n){e(this,t),this.http=n}return c(t,[{key:"getAccounts",value:function(){return this.http.get(It.a.apiUrl+"/accounts")}}]),t}()).\u0275fac=function(t){return new(t||Mt)(S.Ub(At.b))},Mt.\u0275prov=S.Gb({token:Mt,factory:Mt.\u0275fac}),Mt),Lt=((wt=function t(){e(this,t)}).\u0275mod=S.Ib({type:wt}),wt.\u0275inj=S.Hb({factory:function(t){return new(t||wt)},providers:[s.a,Tt.a,Et],imports:[[l.c,y.b,v.b,p.c,P.a,C.b,f.a,A.b,d.k,E.b,Ft.a,b.b,I.b,F.b,L.b,Qt.b,Q,m.j,g.b,h.b,m.v,u.b,O.a,D.a,zt]]}),wt)}}])}();