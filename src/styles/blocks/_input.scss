@import 'src/styles/helpers/_icon_tools';
@import 'src/styles/_typography.vars.scss';

@mixin input {
	border-radius: var(--main-border-radius);
	width: 100%;
	@include body-text;
	border: 1px solid transparent;
	&::placeholder {
		color: transparent;
	}
}

@mixin input-size($height, $iconSize, $iconsGap, $paddingsHorizontal: 16px) {
	height: $height;
	padding: 0 $paddingsHorizontal;
	& ~ .input {
		&_icon-wrapper {
			mib-ref-icon {
				@include icon-size($iconSize);
			}
			gap: $iconsGap;
		}
	}
}

@mixin input-type-filled-secondary {
	background: var(--wgr-secondary);
	&.input {
		outline: 0;
		// &:hover {
		// 	border: 1px solid var(--wgr-tertiary);
		// }
		&:focus {
			border: 1px solid var(--mc-default);
			color: var(--bti-primary);
		}
		&:disabled {
			color: var(--wti-quaternary);
			background: var(--wgr-tertiary);
			border: none;
		}
	}
}

@mixin input-type-floating {
	background: var(--wgr-primary);
	&.input {
		outline: 0;
		&:focus {
			border: 1px solid var(--mc-default);
			box-shadow: var(--custom-floating-shadow);
		}
		&:disabled {
			color: var(--wti-quaternary);
			background: var(--wgr-tertiary);
			box-shadow: none;
			mib-ref-icon {
				@include icon-color(var(--wti-quaternary));
			}
		}
	}
}

@mixin input-l {
	@include input-size(56px, var(--input-l-icon-size), var(--input-l-icons-gap));
	@include text-l;
}

@mixin input-m {
	@include input-size(48px, var(--input-m-icon-size), var(--input-m-icons-gap));
	@include text-m;
}

@mixin input-s {
	@include input-size(40px, var(--input-s-icon-size), var(--input-s-icons-gap));
	@include text-m;
}

@mixin input-xs {
	@include input-size(
		32px,
		var(--input-xs-icon-size),
		var(--input-xs-icons-gap)
	);
	@include text-s;
}

// @mixin input-iconly($default_color) {
// 	& ~ &_icon-wrapper mib-ref-icon,
// 	& ~ .textarea-panel mib-ref-icon {
// 		@include icon-color($default_color);
// 	}
// }

.box-wrapper {
	max-width: 360px;
	position: relative;
	--input-l-icon-size: 20px;
	--input-m-icon-size: 20px;
	--input-s-icon-size: 20px;
	--input-xs-icon-size: 16px;
	--input-l-icons-gap: 8px;
	--input-m-icons-gap: 8px;
	--input-s-icons-gap: 8px;
	--input-xs-icons-gap: 8px;
	border-radius: var(--main-border-radius);
	border: 1px solid transparent;
	& mib-ref-icon {
		@include icon-color(var(--bti-tertiary));
	}
	&:hover:has(.input_type-filled-secondary) {
		border: 1px solid var(--wgr-tertiary);
	}
	&:hover:has(.input_type-floating) {
		box-shadow: var(--custom-floating-shadow);
	}
	&:hover .left-wrapper mib-ref-icon {
		@include icon-color(var(--bti-secondary));
	}
	&:hover .box-label {
		color: (var(--bti-secondary));
	}
	.box-label {
		top: 28%;
		// top: 50%;
		// transform: translateY(-50%);
		position: absolute;
		padding-left: 16px;
		white-space: nowrap;
		cursor: text;
		transition: var(--main-transition);
	}
	.box-right-iconly {
		.right-wrapper {
			display: flex;
		}
	}
	.box-left-iconly {
		.left-wrapper {
			display: flex;
		}
	}
	.input,
	.left-wrapper {
		transition: var(--main-transition);
	}
	&:has(input:focus) {
		.input,
		.left-wrapper {
			padding-top: 12px;
		}
		.box-label {
			display: block;
			transform: unset;
			padding-left: 16px !important;
			@include highlight-text;
			@include highlight-xs;
			color: var(--mc-default);
			transition: var(--main-transition);
		}
	}
	&:has(.input_l) {
		.box-label {
			@include text-l;
		}
	}
	&:has(.input_l):has(input:focus) {
		.box-label {
			top: 10px;
		}
	}
	&:has(.input_m) {
		.box-label {
			@include text-m;
		}
		&:has(.input_m):has(input:focus) {
			.box-label {
				top: 8px;
			}
		}
	}
	&:has(.input_s) {
		.box-label {
			@include text-s;
		}
		&:has(.input_s):has(input:focus) {
			.box-label {
				top: 4px;
			}
		}
	}
	&:has(.input_xs) {
		.box-label {
			@include text-s;
		}
		&:has(.input_xs):has(input:focus) {
			.box-label {
				top: 2px;
			}
		}
		mib-ref-icon {
			@include icon-size(var(--input-s-icon-size));
		}
	}
}

.input {
	@include input();
	&_l {
		@include input-l;
	}
	&_m {
		@include input-m;
	}
	&_s {
		@include input-s;
	}
	&_xs {
		@include input-xs;
	}
	&_icon-wrapper {
		top: 50%;
		transform: translateY(-50%);
		position: absolute;
		display: none;
		&.right-wrapper {
			right: 16px;
			padding-left: 8px;
		}
		&.left-wrapper {
			left: 16px;
			padding-right: 4px;
		}
	}
	&_type-filled-secondary {
		@include input-type-filled-secondary;
	}
	&_type-floating {
		@include input-type-floating;
	}
}

div.textarea-panel {
	display: none !important;
}
