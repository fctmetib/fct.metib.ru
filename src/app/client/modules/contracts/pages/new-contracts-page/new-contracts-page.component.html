<div class="container container_large">
	<mib-spacing type="m"></mib-spacing>
	<h3>Договоры</h3>
	<mib-spacing type="m"></mib-spacing>
</div>
<mib-tab-group>
	<mib-navbar class="container container_large">
		<mib-navbar-point value="1">Действующие</mib-navbar-point>
		<mib-navbar-point value="2">Прошедшие</mib-navbar-point>
		<mib-navbar-point value="3">Все договоры</mib-navbar-point>
	</mib-navbar>
	<div class="container container_large">
		<mib-tab-item value="1">
			<mib-spacing type="m"></mib-spacing>
			<!--			<div class="flex flex_justify-between">-->
			<!--				<mib-select-->
			<!--					type="outline"-->
			<!--					class="supply-select-width"-->
			<!--					placeholder="Выберите дебитора"-->
			<!--				>-->
			<!--					<mib-dropdown-point-->
			<!--						[value]="true"-->
			<!--						text="Выберите дебитора 123"-->
			<!--					></mib-dropdown-point>-->
			<!--					<mib-dropdown-point-->
			<!--						[value]="true"-->
			<!--						text="Выберите дебитора 345"-->
			<!--					></mib-dropdown-point>-->
			<!--					<mib-dropdown-point-->
			<!--						[value]="false"-->
			<!--						text="Выберите дебитора 678"-->
			<!--					></mib-dropdown-point>-->
			<!--				</mib-select>-->
			<!--				<mib-select-->
			<!--					type="outline"-->
			<!--					class="supply-select-width"-->
			<!--					placeholder="5 из 8 колонн в таблице"-->
			<!--				>-->
			<!--					<mib-dropdown-point-->
			<!--						[value]="true"-->
			<!--						text="3 из 8 колонн в таблице"-->
			<!--					></mib-dropdown-point>-->
			<!--					<mib-dropdown-point-->
			<!--						[value]="true"-->
			<!--						text="5 из 8 колонн в таблице"-->
			<!--					></mib-dropdown-point>-->
			<!--					<mib-dropdown-point-->
			<!--						[value]="false"-->
			<!--						text="8 из 8 колонн в таблице"-->
			<!--					></mib-dropdown-point>-->
			<!--				</mib-select>-->
			<!--			</div>-->
			<!--			<mib-spacing type="xs"></mib-spacing>-->
			<mib-table (selectionChange)="selectionChange($event)">
				<mib-table-head>
					<mib-table-head-cell [sortable]="true" [showCheckbox]="true"
						>Договор</mib-table-head-cell
					>
					<mib-table-head-cell>Дебитор</mib-table-head-cell>
					<mib-table-head-cell>Вступил в силу</mib-table-head-cell>
					<mib-table-head-cell>Действует до</mib-table-head-cell>
					<mib-table-head-cell>Отсрочка</mib-table-head-cell>
					<mib-table-head-cell>Лимит</mib-table-head-cell>
					<mib-table-head-cell>Просрочка</mib-table-head-cell>
				</mib-table-head>
				<ng-container *ngIf="loading$ | async; else table">
					<mib-skeleton
						[styles]="last ? skeletonWithoutUnderline : skeleton"
						*ngFor="
							let i of toolsService.createEmptyArray(PAGINATOR_ITEMS_PER_PAGE);
							let last = last
						"
					></mib-skeleton>
				</ng-container>
				<ng-template #table>
					<mib-table-row
						(dblclick)="newContractPageDrawer(contract?.ID)"
						*ngFor="let contract of listOfContractsVisible; let last = last"
						[underlined]="!last"
					>
						<mib-table-cell contracted="true" type="main">
							<ng-container table-cell-title>{{
								contract?.Number
							}}</ng-container>
							<ng-container table-cell-description>
								{{ contract?.Tariff.Title }}</ng-container
							>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title>{{
								contract?.Debtor?.Title
							}}</ng-container>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title>{{
								contract?.DateFrom | date : 'dd.MM.YYYY'
							}}</ng-container>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title>{{
								contract?.DateTo | date : 'dd.MM.YYYY'
							}}</ng-container>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title
								>{{ contract?.Delay.Count }} к.д.</ng-container
							>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title>{{
								contract?.Statistics.FreeLimit | rub
							}}</ng-container>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title>{{
								contract?.Statistics.DelayDuty | rub
							}}</ng-container>
						</mib-table-cell>
						<mib-button
							[mibDropdownTrigger]="newDocumentRowMenu"
							table-row-button
							size="s"
							type="ghost-secondary"
						>
							<mib-icon
								class="stroke"
								btn-icon
								name="fi_more-vertical"
							></mib-icon>
						</mib-button>
						<mib-dropdown #newDocumentRowMenu>
							<mib-dropdown-point
								(press)="newContractPageDrawer(contract?.ID)"
								text="Открыть"
							></mib-dropdown-point>
						</mib-dropdown>
					</mib-table-row>
				</ng-template>
				<mib-table-footer [showIsland]="true" [lined]="!(loading$ | async)">
					<mib-paginator
						(pageChange)="onPageChange($event)"
						[totalCount]="listOfContracts.length"
						[pagesToShow]="PAGINATOR_PAGE_TO_SHOW"
						[itemsPerPage]="PAGINATOR_ITEMS_PER_PAGE"
					></mib-paginator>
				</mib-table-footer>
			</mib-table>
			<mib-spacing type="m"></mib-spacing>
		</mib-tab-item>
		<mib-tab-item value="2">
			<!-- <mib-spacing type="m"></mib-spacing>
			<div class="flex flex_justify-between">
				<mib-select
					type="outline"
					class="supply-select-width"
					placeholder="Выберите дебитора"
				>
					<mib-dropdown-point
						[value]="true"
						text="Выберите дебитора 123"
					></mib-dropdown-point>
					<mib-dropdown-point
						[value]="true"
						text="Выберите дебитора 345"
					></mib-dropdown-point>
					<mib-dropdown-point
						[value]="false"
						text="Выберите дебитора 678"
					></mib-dropdown-point>
				</mib-select>
				<mib-select
					type="outline"
					class="supply-select-width"
					placeholder="5 из 8 колонн в таблице"
				>
					<mib-dropdown-point
						[value]="true"
						text="3 из 8 колонн в таблице"
					></mib-dropdown-point>
					<mib-dropdown-point
						[value]="true"
						text="5 из 8 колонн в таблице"
					></mib-dropdown-point>
					<mib-dropdown-point
						[value]="false"
						text="8 из 8 колонн в таблице"
					></mib-dropdown-point>
				</mib-select>
			</div>
			<mib-spacing type="xs"></mib-spacing>
			<mib-table (selectionChange)="selectionChange($event)">
				<mib-table-head>
					<mib-table-head-cell [sortable]="true" [showCheckbox]="true"
						>Договор</mib-table-head-cell
					>
					<mib-table-head-cell>Дебитор</mib-table-head-cell>
					<mib-table-head-cell>Вступил в силу</mib-table-head-cell>
					<mib-table-head-cell>Действует до</mib-table-head-cell>
					<mib-table-head-cell>Отсрочка</mib-table-head-cell>
					<mib-table-head-cell>Лимит</mib-table-head-cell>
					<mib-table-head-cell>Просрочка</mib-table-head-cell>
				</mib-table-head>
				<ng-container *ngIf="loading$ | async; else table">
					<mib-skeleton
						[styles]="last ? skeletonWithoutUnderline : skeleton"
						*ngFor="
							let i of toolsService.createEmptyArray(PAGINATOR_ITEMS_PER_PAGE);
							let last = last
						"
					></mib-skeleton>
				</ng-container>
				<ng-template #table>
					<mib-table-row
						*ngFor="let contract of listOfContractsVisible; let last = last"
						[underlined]="!last"
					>
						<mib-table-cell type="main">
							<ng-container table-cell-title>{{
								contract?.Number
							}}</ng-container>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title>asdfgd</ng-container>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title>sretad</ng-container>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title>sadvcxbsa</ng-container>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title>acvxbsd</ng-container>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title>7t87</ng-container>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title>7jhgjhu7</ng-container>
						</mib-table-cell>
						<mib-button
							[mibDropdownTrigger]="newDocumentRowMenu"
							table-row-button
							size="s"
							type="ghost-secondary"
						>
							<mib-icon
								class="stroke"
								btn-icon
								name="fi_more-vertical"
							></mib-icon>
						</mib-button>
						<mib-dropdown #newDocumentRowMenu>
							<mib-dropdown-point
								(press)="newContractPageDrawer()"
								text="Открыть"
							></mib-dropdown-point>
						</mib-dropdown>
					</mib-table-row>
				</ng-template>
				<mib-table-footer [showIsland]="true" [lined]="!(loading$ | async)">
					<mib-paginator
						(pageChange)="onPageChange($event)"
						[totalCount]="listOfContracts.length"
						[pagesToShow]="PAGINATOR_PAGE_TO_SHOW"
						[itemsPerPage]="PAGINATOR_ITEMS_PER_PAGE"
					></mib-paginator>
				</mib-table-footer>
			</mib-table> -->
			<mib-spacing type="m"></mib-spacing>
			<p class="headline">tab 2</p>
		</mib-tab-item>
		<mib-tab-item value="3">
			<mib-spacing type="m"></mib-spacing>
			<!-- <div class="flex flex_justify-between">
				<mib-select
					type="outline"
					class="supply-select-width"
					placeholder="Выберите дебитора"
				>
					<mib-dropdown-point
						[value]="true"
						text="Выберите дебитора 123"
					></mib-dropdown-point>
					<mib-dropdown-point
						[value]="true"
						text="Выберите дебитора 345"
					></mib-dropdown-point>
					<mib-dropdown-point
						[value]="false"
						text="Выберите дебитора 678"
					></mib-dropdown-point>
				</mib-select>
				<mib-select
					type="outline"
					class="supply-select-width"
					placeholder="5 из 8 колонн в таблице"
				>
					<mib-dropdown-point
						[value]="true"
						text="3 из 8 колонн в таблице"
					></mib-dropdown-point>
					<mib-dropdown-point
						[value]="true"
						text="5 из 8 колонн в таблице"
					></mib-dropdown-point>
					<mib-dropdown-point
						[value]="false"
						text="8 из 8 колонн в таблице"
					></mib-dropdown-point>
				</mib-select>
			</div> -->
			<!-- <mib-spacing type="xs"></mib-spacing> -->
			<mib-table (selectionChange)="selectionChange($event)">
				<mib-table-head>
					<mib-table-head-cell [sortable]="true" [showCheckbox]="true"
						>Договор</mib-table-head-cell
					>
					<mib-table-head-cell>Дебитор</mib-table-head-cell>
					<mib-table-head-cell>Вступил в силу</mib-table-head-cell>
					<mib-table-head-cell>Действует до</mib-table-head-cell>
					<mib-table-head-cell>Отсрочка</mib-table-head-cell>
					<mib-table-head-cell>Статус</mib-table-head-cell>
					<mib-table-head-cell>Лимит</mib-table-head-cell>
					<mib-table-head-cell>Просрочка</mib-table-head-cell>
				</mib-table-head>
				<ng-container *ngIf="loading$ | async; else table3">
					<mib-skeleton
						[styles]="last ? skeletonWithoutUnderline : skeleton"
						*ngFor="
							let i of toolsService.createEmptyArray(PAGINATOR_ITEMS_PER_PAGE);
							let last = last
						"
					></mib-skeleton>
				</ng-container>
				<ng-template #table3>
					<mib-table-row
						(dblclick)="newContractPageDrawer(contract?.ID)"
						*ngFor="let contract of advancedContractsVisible; let last = last"
						[underlined]="!last"
					>
						<mib-table-cell contracted="true" type="main">
							<ng-container table-cell-title>{{
								contract?.Number
							}}</ng-container>
							<ng-container table-cell-description>
								{{ contract?.Tariff.Title }}</ng-container
							>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title>{{
								contract?.Debtor?.Title
							}}</ng-container>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title>{{
								contract?.DateFrom | date : 'dd.MM.YYYY'
							}}</ng-container>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title>{{
								contract?.DateTo | date : 'dd.MM.YYYY'
							}}</ng-container>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title
								>{{ contract?.Delay.Count }} к.д.</ng-container
							>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title>
								<mib-badge
									[type]="
										contract?.AdvancedContract
											? 'filled-accent'
											: 'filled-success'
									"
									[extended]="true"
									size="m"
									>{{
										contract?.AdvancedContract ? 'Исполнен' : 'Действует'
									}}</mib-badge
								></ng-container
							>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title>{{
								contract?.Statistics.FreeLimit | rub
							}}</ng-container>
						</mib-table-cell>
						<mib-table-cell>
							<ng-container table-cell-title>{{
								contract?.Statistics.DelayDuty | rub
							}}</ng-container>
						</mib-table-cell>
						<mib-button
							[mibDropdownTrigger]="newDocumentRowMenu"
							table-row-button
							size="s"
							type="ghost-secondary"
						>
							<mib-icon
								class="stroke"
								btn-icon
								name="fi_more-vertical"
							></mib-icon>
						</mib-button>
						<mib-dropdown #newDocumentRowMenu>
							<mib-dropdown-point
								(press)="newContractPageDrawer(contract?.ID)"
								text="Открыть"
							></mib-dropdown-point>
						</mib-dropdown>
					</mib-table-row>
				</ng-template>
				<mib-table-footer [showIsland]="true" [lined]="!(loading$ | async)">
					<mib-paginator
						(pageChange)="onPageChange($event)"
						[totalCount]="advancedContracts.length"
						[pagesToShow]="PAGINATOR_PAGE_TO_SHOW"
						[itemsPerPage]="PAGINATOR_ITEMS_PER_PAGE"
					></mib-paginator>
				</mib-table-footer>
			</mib-table>
		</mib-tab-item>
	</div>
</mib-tab-group>
